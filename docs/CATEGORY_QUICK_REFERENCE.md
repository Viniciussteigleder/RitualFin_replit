# RitualFin Category Structure - Quick Reference

**Last Updated:** 2025-12-30
**Version:** Proposed 3-Level Hierarchy
**Status:** Documentation Complete, Implementation Pending

---

## ğŸ“‹ Overview

**Total Categories:**
- **Level 1:** 13 major categories
- **Level 2:** 40+ subcategories
- **Level 3:** 100+ specific items
- **Keywords:** 1000+ identified and documented

**Database Status:**
- âœ… Level 1: Enum (simplified, 20 values)
- âœ… Level 2: Text field (flexible)
- âœ… Level 3: Text field (flexible)

---

## ğŸ—‚ï¸ Level 1 Categories (13)

| # | Category PT | Category DE | Count L2 | Count L3 |
|---|-------------|-------------|----------|----------|
| 1 | **Moradia** | Wohnen | 3 | 26 |
| 2 | **AlimentaÃ§Ã£o** | Essen | 5 | 7 |
| 3 | **Compras & Estilo de Vida** | Konsum & Lifestyle | 8 | 18 |
| 4 | **Mobilidade** | MobilitÃ¤t | 2 | 5 |
| 5 | **SaÃºde & Seguros** | Gesundheit & Versicherungen | 2 | 7 |
| 6 | **EducaÃ§Ã£o & CrianÃ§as** | Bildung & Kinder | 3 | 3 |
| 7 | **Lazer & Viagens** | Freizeit & Reisen | 2 | 5 |
| 8 | **Interna** | Finanzen & Transfers (Intern) | 1 | 2 |
| 9 | **FinanÃ§as & TransferÃªncias** | Finanzen & Transfers | 4 | 9 |
| 10 | **Trabalho & Receitas** | Arbeit & Einnahmen | 4 | 5 |
| 11 | **DoaÃ§Ãµes & Outros** | Spenden & Sonstiges | 1 | 1 |
| 12 | **RevisÃ£o & NÃ£o Classificado** | PrÃ¼fung & Unkategorisiert | 4 | 10 |
| 13 | **Outros** | Sonstiges | 1 | 1 |

---

## ğŸ  1. Moradia (Housing) - 26 subcategories

### Casa Olching (7)
- Aluguel (Pago)
- Energia (Strom)
- Internet/TV/Telefone (Casa)
- Nebenkosten/CondomÃ­nio
- ManutenÃ§Ã£o e Reparos
- Materiais e Compras para Casa
- Impostos e Taxas (ImÃ³vel)

### Casa Karlsruhe (8)
- Aluguel (Recebido) â† **RECEITA**
- Financiamento
- Nebenkosten/WEG/Hausverwaltung
- Aquecimento/FernwÃ¤rme
- Energia/Ãgua (Utilidades)
- Internet/TV (ImÃ³vel)
- ManutenÃ§Ã£o e Reparos
- Impostos e Taxas (ImÃ³vel)

### Casa Esting (5)
- Financiamento
- Materiais e Obras (ConstruÃ§Ã£o)
- ServiÃ§os (Projetos/Arquitetura/Admin)
- Utilidades (ProvisÃ³rio/ConstruÃ§Ã£o)
- ManutenÃ§Ã£o e Reparos

**Top Keywords:** Schroeder, LichtBlick, Vodafone, WEG, Commerzbank, R+V, Baumarkt, OBI

---

## ğŸ½ï¸ 2. AlimentaÃ§Ã£o (Food) - 7 subcategories

### Supermercado e Mercearia (2)
- Supermercado â€“ REWE/Lidl/Edeka/Netto/Aldi
- Supermercado â€“ Outros/Mercados especiais

### Padaria e CafÃ© (2)
- Padaria/CafÃ© â€“ Ihle/WÃ¼nsche e similares
- Padaria/CafÃ© â€“ Outros

### Restaurantes e AlimentaÃ§Ã£o fora (2)
- Restaurante â€“ Geral
- Fast-food â€“ McDonald's e similares

### Bebidas e Especialidades (1)
- Bebidas â€“ Vinhos/Loja especializada

### RefeiÃ§Ã£o no trabalho (1)
- AlmoÃ§o â€“ Bosch

**Top Keywords:** REWE, LIDL, EDEKA, ALDI, NETTO, BÃ¤ckerei Ihle, MCDONALDS, Bosch

---

## ğŸ›ï¸ 3. Compras & Estilo de Vida (Shopping & Lifestyle) - 18 subcategories

### Compras online & marketplace (4)
- Marketplace â€“ Amazon
- Marketplace â€“ Temu
- Loja online â€“ Zalando
- Pagamentos online â€“ PayPal (Compras)

### VestuÃ¡rio & calÃ§ados (2)
- Roupas â€“ Geral (H&M/About You/Hollister etc.)
- Esportes/roupa esportiva â€“ Decathlon

### Higiene & drogaria (3)
- Drogaria â€“ DM
- Drogaria â€“ Rossmann
- Drogaria/Perfumaria â€“ MÃ¼ller

### Assinaturas digitais & software (8)
- Assinatura â€“ Apple (iCloud/App Store)
- Assinatura â€“ Google One/Google
- Assinatura â€“ Netflix
- Assinatura â€“ Disney+
- Assinatura â€“ YouTube Premium
- Assinatura â€“ OpenAI (ChatGPT)
- Assinatura â€“ Claude.ai
- Assinatura â€“ ElevenLabs

### Outros (3)
- Casa â€“ TEDi/lojas de utilidades
- Pets â€“ AlimentaÃ§Ã£o e acessÃ³rios
- Academia â€“ Hommer Fitness
- Artes marciais â€“ BJJ
- Presentes â€“ Geral

**Top Keywords:** AMAZON, TEMU, ZALANDO, H&M, DM, ROSSMANN, NETFLIX, APPLE.COM/BILL, TEDI

---

## ğŸš— 4. Mobilidade (Mobility) - 5 subcategories

### Carro (4)
- Carro â€“ CombustÃ­vel/Posto
- Carro â€“ Seguro
- Carro â€“ Estacionamento/PedÃ¡gio
- Carro â€“ Multas/InfraÃ§Ãµes

### Transporte pÃºblico (1)
- Transporte â€“ MVV/Ã”nibus/Trem

**Top Keywords:** Tankstelle, Q1, Esso, Shell, DEVK, Handyparken, MVV, DB

---

## ğŸ¥ 5. SaÃºde & Seguros (Health & Insurance) - 7 subcategories

### SaÃºde (4)
- MÃ©dico/ClÃ­nica â€“ PVS/consultas
- Dentista/Ortodontia
- FarmÃ¡cia
- Ã“tica e Ã³culos (Compra)

### Seguros (3)
- Seguro saÃºde â€“ AOK
- Seguros â€“ DEVK (Vida/Residencial/RC/Legal)
- Seguro vida/financiamento â€“ R+V

**Top Keywords:** PVS bayern, Apotheke, Apollo Optik, AOK, DEVK, R+V

---

## ğŸ‘¶ 6. EducaÃ§Ã£o & CrianÃ§as (Education & Children) - 3 subcategories

- Escola â€“ Gymnasium Olching (Taxas/viagens/licenÃ§as)
- BenefÃ­cio â€“ Kindergeld â† **RECEITA**
- Atividades â€“ Cursos/clubes (CrianÃ§as)

**Top Keywords:** Gymnasium Olching, Familienkasse, Kindergeld, Schullandheim

---

## âœˆï¸ 7. Lazer & Viagens (Leisure & Travel) - 5 subcategories

### Viagens (3)
- Viagens â€“ HotÃ©is
- Viagens â€“ Aluguel de carro (Car rental)
- Viagens â€“ TransferÃªncias internacionais (Wise/TransferWise)

### Entretenimento & eventos (2)
- Eventos â€“ Ingressos/Tickets
- Lazer â€“ Compras/serviÃ§os nÃ£o essenciais

**Top Keywords:** Hilton, HERTZ, Wise, MÃ¼nchen Ticket, booking, lodging

---

## ğŸ” 8. Interna (Internal Transfers) - 2 subcategories

âš ï¸ **SPECIAL CATEGORY:** Excluded from budgets, reports, and analytics

### Pagamento de cartÃµes (2)
- Pagamento â€“ Amex (LiquidaÃ§Ã£o/Fatura)
- Pagamento â€“ Miles & More / DKB (LiquidaÃ§Ã£o)

**Top Keywords:** AMERICAN EXPRESS EUROPE, DKB, KREDITKARTENABRECHNUNG, pagamento Amex, FOLGELASTSCHRIFT

**Rule:** Always exclude from:
- Spend totals
- Income totals
- Category analytics
- Budget consumption
- Dashboard KPIs

---

## ğŸ’° 9. FinanÃ§as & TransferÃªncias (Finance & Transfers) - 9 subcategories

### TransferÃªncias & Pix/PayPal (1)
- TransferÃªncia â€“ PayPal (Top-up/withdraw)

### Saque em dinheiro (1)
- Saque â€“ Caixa eletrÃ´nico (Sparkasse/ATM)

### Taxas & juros (4)
- Taxas bancÃ¡rias â€“ Sparkasse
- Juros/cÃ¢mbio â€“ Taxa internacional (1,95%)
- Mensalidade cartÃ£o â€“ Miles & More
- Taxas â€“ DevoluÃ§Ã£o/Retorno de dÃ©bito

### DÃ­vidas & crÃ©dito (3)
- CrÃ©dito pessoal â€“ ING DiBa (Rahmenkredit)
- Financiamento varejista â€“ Apollo Optik (Parcelamento)
- EmprÃ©stimo recebido â€“ Targobank â† **RECEITA**

**Top Keywords:** PayPal Europe, BARGELDAUSZAHLUNG, ENTGELTABSCHLUSS, ING-DiBa, TARGOBANK

---

## ğŸ’¼ 10. Trabalho & Receitas (Work & Income) - 5 subcategories

â­ **RECEITA CATEGORY**

### SalÃ¡rio (2)
- SalÃ¡rio â€“ Vinicius (Bosch)
- SalÃ¡rio â€“ Erica (TransferÃªncia)

### Receita profissional (1)
- Receita profissional â€“ Clientes (PayPal/Ãœberweisung)

### Vendas online (1)
- Vendas online â€“ Vinted/Mangopay

### Aluguel e rendas (1)
- Renda â€“ Aluguel (Karlsruhe)

**Top Keywords:** Robert Bosch GmbH, LOHN GEHALT, Bianca De Freitas Lima, Vinted, Dr. David Mueller, Miete

---

## ğŸ 11. DoaÃ§Ãµes & Outros (Donations & Others) - 1 subcategory

- DoaÃ§Ã£o/AssociaÃ§Ã£o â€“ Projeto social

**Top Keywords:** PAYPAL *BRUEDERLICH, Spende, donation, Verein

---

## â“ 12. RevisÃ£o & NÃ£o Classificado (Review & Unclassified) - 10 subcategories

### Moradia â€“ Geral (RevisÃ£o) (6)
- Moradia â€“ Geral (RevisÃ£o) â€“ Financiamento
- Moradia â€“ Geral (RevisÃ£o) â€“ Nebenkosten/CondomÃ­nio
- Moradia â€“ Geral (RevisÃ£o) â€“ Utilidades
- Moradia â€“ Geral (RevisÃ£o) â€“ ManutenÃ§Ã£o/Reparos
- Moradia â€“ Geral (RevisÃ£o) â€“ Materiais/Obras
- Moradia â€“ Geral (RevisÃ£o) â€“ Aluguel

### Outros (3)
- TransferÃªncia â€“ FamÃ­lia/Amigos
- Despesa â€“ Comerciante nÃ£o identificado (RevisÃ£o)
- Receita â€“ Entrada nÃ£o identificada (RevisÃ£o)

**Purpose:** Catch-all for transactions that need manual review and proper categorization

---

## ğŸ”§ 13. Outros (Others) - 1 subcategory

- Outros â€“ NÃ£o classificado

**Purpose:** Final fallback for truly uncategorizable transactions

---

## ğŸ“Š Category Statistics (Based on Proposal)

### Distribution by Type

| Type | Count L1 | % |
|------|----------|---|
| **Despesa** (Expense) | 10 | 77% |
| **Receita** (Income) | 1 | 8% |
| **Interna** (Internal) | 1 | 8% |
| **RevisÃ£o** (Review) | 1 | 8% |

### Top 5 Categories by Subcategory Count

1. **Moradia** - 26 subcategories (property-specific breakdown)
2. **Compras & Estilo de Vida** - 18 subcategories (diverse lifestyle expenses)
3. **FinanÃ§as & TransferÃªncias** - 9 subcategories (banking, fees, credit)
4. **AlimentaÃ§Ã£o** - 7 subcategories (groceries, restaurants, work meals)
5. **SaÃºde & Seguros** - 7 subcategories (health services, insurance)

### Keyword Density by Category

| Category | Avg Keywords per L3 |
|----------|---------------------|
| **Moradia** | 15-20 (property names, providers) |
| **AlimentaÃ§Ã£o** | 10-15 (store names, locations) |
| **Compras & Estilo de Vida** | 8-12 (brands, merchants) |
| **Mobilidade** | 8-10 (gas stations, parking) |
| **Interna** | 15-20 (bank identifiers, payment patterns) |

---

## ğŸ¯ Implementation Status

### Current Database (shared/schema.ts)

```typescript
// Category1: ENUM (20 values) - Simplified
"Receitas", "Moradia", "Mercado", "Compras Online",
"Transporte", "SaÃºde", "Lazer", "Viagem", "Roupas",
"Tecnologia", "AlimentaÃ§Ã£o", "Energia", "Internet",
"EducaÃ§Ã£o", "Presentes", "Streaming", "Academia",
"Investimentos", "Outros", "Interno"

// Category2: TEXT (flexible)
// Category3: TEXT (flexible)
```

### Proposed Structure (Documentation)

```typescript
// Category1: 13 major categories
"Moradia", "AlimentaÃ§Ã£o", "Compras & Estilo de Vida",
"Mobilidade", "SaÃºde & Seguros", "EducaÃ§Ã£o & CrianÃ§as",
"Lazer & Viagens", "Interna", "FinanÃ§as & TransferÃªncias",
"Trabalho & Receitas", "DoaÃ§Ãµes & Outros",
"RevisÃ£o & NÃ£o Classificado", "Outros"

// Category2: 40+ subcategories (property, merchant type, etc.)
// Category3: 100+ specific items (detailed breakdown)
```

### Migration Path

- **Phase 1:** Use application-layer mapping (`shared/categoryMapping.ts`)
- **Phase 2:** Update database enum (`migrations/003_category_restructure.sql`)

---

## ğŸ” Common Keyword Patterns

### Merchant Normalization
- **Location codes:** OLCHING, BERGKIRCHEN, MUENCHEN
- **Store numbers:** FIL. 4534, REWE 0887, LIDL 4691
- **Payment methods:** contactless, retail-store, e-commerce
- **Transaction types:** FOLGELASTSCHRIFT, GUTSCHR. UEBERWEISUNG

### Negative Keywords (Exclusions)
- `-BARGELDAUSZAHLUNG` (exclude cash withdrawals)
- `-KREDITKARTENABRECHNUNG` (exclude card statements)
- `-GUTSCHR` (exclude refunds in some contexts)
- `-RÃ¼ckerstattung` (exclude reimbursements)

### Special Identifiers
- **Account IDs:** IBAN codes (DE22, DE92, DE65, etc.)
- **Reference numbers:** V 2004774510, AZ, EPZ-
- **Customer numbers:** Kunden-Nr., K-NR., Kd-Nr

---

## ğŸ“– Related Documentation

- **Full Analysis:** `/CATEGORY_ANALYSIS.md` (comprehensive keyword list)
- **Migration Plan:** `/docs/SUPABASE_MIGRATION_PLAN.md`
- **Mapping Config:** `/shared/categoryMapping.ts` (TypeScript mappings)
- **Migration Script:** `/migrations/003_category_restructure.sql`
- **Original Proposal:** `/docs/_codex/CATEGORY_CLASSIFICATION_PROPOSAL.md`

---

## âœ… Next Steps

1. Review this quick reference
2. Decide on migration strategy (Option A or Option B)
3. Test category mappings with sample transactions
4. Implement UI dropdowns using `categoryHierarchy`
5. Plan Supabase migration timeline
6. Execute Phase 1 migration (infrastructure)
7. Execute Phase 2 migration (category restructuring)

---

**Questions or Issues?**
Refer to `/CATEGORY_ANALYSIS.md` for detailed breakdown or `/docs/SUPABASE_MIGRATION_PLAN.md` for migration guidance.
