
> rest-express@1.0.1 test:unit
> npx tsx tests/unit/rules-engine.test.ts


========================================
Rules Engine Unit Tests
Logic Contract: docs/LOGIC_CONTRACT.md
========================================

TC-001: Testing determinism...
  ✓ TC-001 passed: Deterministic output
TC-002: Testing strict rule short-circuit...
  ✓ TC-002 passed: Strict rule short-circuits correctly
TC-003: Testing priority order...
  ✓ TC-003 passed: Higher priority wins
TC-004: Testing negative keywords...
  ✓ TC-004 passed: Negative keywords exclude correctly
TC-005: Testing Interno auto-flagging...
  ✓ TC-005 passed: Interno auto-flags correctly
TC-006: Manual override preservation...
  ⚠ Note: Full test requires database integration
  ✓ TC-006 skipped: Tested at integration level
TC-007: Testing conflict detection...
  ✓ TC-007 passed: Conflict detection works
TC-008: Testing confidence threshold...
  ✓ TC-008 passed: Confidence threshold respected
TC-009: Testing inactive rule handling...
  ✓ TC-009 passed: Inactive rules ignored
TC-010: Testing negative keyword exclusion in matchRules...
  ✓ TC-010 passed: matchRules respects negative keywords
EC-001: Testing empty keywords handling...
  ✓ EC-001 passed: Empty keywords handled
EC-002: Testing special characters...
  ✓ EC-002 passed: Special characters work
EC-003: Testing unicode normalization...
  ✓ EC-003 passed: Unicode normalization works
EC-004: Testing case insensitivity...
  ✓ EC-004 passed: Case insensitivity works

========================================
Results: 14 passed, 0 failed
========================================

