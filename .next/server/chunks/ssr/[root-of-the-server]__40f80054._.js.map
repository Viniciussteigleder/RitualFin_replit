{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../src/lib/actions/taxonomy.ts","../../../../.next-internal/server/app/%28dashboard%29/settings/taxonomy/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","\"use server\";\n\nimport { db } from \"@/lib/db\";\nimport { taxonomyLevel1, taxonomyLevel2, taxonomyLeaf } from \"@/lib/db/schema\";\nimport { eq } from \"drizzle-orm\";\nimport { auth } from \"@/auth\";\n\nexport async function getTaxonomyTree() {\n  const session = await auth();\n  if (!session?.user?.id) return [];\n\n  const userId = session.user.id;\n\n  const level1 = await db.query.taxonomyLevel1.findMany({\n    where: eq(taxonomyLevel1.userId, userId),\n    with: {\n      level2s: {\n        with: {\n          leaves: true\n        }\n      }\n    }\n  });\n\n  return level1;\n}\n\nexport async function createLevel1(name: string) {\n  const session = await auth();\n  if (!session?.user?.id) throw new Error(\"Unauthorized\");\n\n  return await db.insert(taxonomyLevel1).values({\n    userId: session.user.id,\n    nivel1Pt: name,\n  }).returning();\n}\n\n// Additional CRUD actions can be added as needed\n","export {getTaxonomyTree as '00f9c426d2412404caaf150ede9c675cfade1daad5'} from 'ACTIONS_MODULE0'\nexport {createLevel1 as '4029240b9f5f7e76345e991e577656abae86ac9932'} from 'ACTIONS_MODULE0'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"gNAAoD,OAAA,cAAA,CAAA,EAAA,aAAA,oCAC3CA,0BAAAA,qCAAAA,EAAAA,uBAAuB,YAAQ,CAAA,CAAA,IAAA,iCCEjC,SAASC,EAAyBC,CAAc,EACrD,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAQE,MAAM,CAAED,IAAK,CACvC,IAAME,EAASH,CAAO,CAACC,EAAE,CACzB,GAAsB,YAAlB,AAA8B,OAAvBE,EACT,MAAM,OAAA,cAEL,CAFK,AAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,EAAO;AAAA,oEAAuE,CAAC,EADhJ,oBAAA,OAAA,mBAAA,gBAAA,CAEN,EAEJ,CACF,0EATgBJ,2BAAAA,qCAAAA,qDCDhB,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,+BAEO,eAAe,IACpB,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,IAAA,AAAI,IAC1B,GAAI,CAAC,GAAS,MAAM,GAAI,MAAO,EAAE,CAEjC,IAAM,EAAS,EAAQ,IAAI,CAAC,EAAE,CAa9B,OAXe,AAWR,MAXc,EAAA,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CACpD,MAAO,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAA,cAAc,CAAC,MAAM,CAAE,GACjC,KAAM,CACJ,QAAS,CACP,KAAM,CACJ,QAAQ,CACV,CACF,CACF,CACF,EAGF,CAEO,eAAe,EAAa,CAAY,EAC7C,IAAM,EAAU,MAAM,CAAA,EAAA,EAAA,IAAA,AAAI,IAC1B,GAAI,CAAC,GAAS,MAAM,GAAI,MAAM,AAAI,MAAM,gBAExC,OAAO,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,EAAA,cAAc,EAAE,MAAM,CAAC,CAC5C,OAAQ,EAAQ,IAAI,CAAC,EAAE,CACvB,SAAU,CACZ,GAAG,SAAS,EACd,EAEA,iDAAiD,SA9B3B,EAoBA,IApBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAoBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,gHC3BtB,IAAA,EAAA,EAAA,CAAA,CAAA","ignoreList":[0,1]}