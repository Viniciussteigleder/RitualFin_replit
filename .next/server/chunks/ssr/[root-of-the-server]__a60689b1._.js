module.exports=[54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},23862,a=>a.a(async(b,c)=>{try{let b=await a.y("pg-587764f78a6c7a9c");a.n(b),c()}catch(a){c(a)}},!0),37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},64874,a=>a.a(async(b,c)=>{try{var d=a.i(37936),e=a.i(22028),f=a.i(13148),g=a.i(72849),h=a.i(83111),i=a.i(77607);a.i(40522);var j=a.i(77419),k=a.i(13095),l=b([e,i]);[e,i]=l.then?(await l)():l;let n=h.z.object({username:h.z.string().min(3,"Username must be at least 3 characters"),email:h.z.string().email("Invalid email address"),password:h.z.string().min(6,"Password must be at least 6 characters")});async function m(a,b){let c=Object.fromEntries(b.entries()),d=n.safeParse(c);if(!d.success)return"Invalid input data";let{username:h,email:k,password:l}=d.data;try{if(await e.db.query.users.findFirst({where:(a,{or:b,eq:c})=>b(c(a.email,k),c(a.username,h))}))return"User already exists (email or username)";let a=await g.default.hash(l,10),[b]=await e.db.insert(f.users).values({username:h,email:k,passwordHash:a}).returning();await (0,i.signIn)("credentials",{email:k,password:l,redirectTo:"/dashboard"})}catch(a){if(a instanceof j.AuthError)if("CredentialsSignin"===a.type)return"Invalid credentials.";else throw a;return console.error("Registration error:",a),"Failed to register user."}}(0,k.ensureServerEntryExports)([m]),(0,d.registerServerReference)(m,"60365ce5c242b6e8c086221eb1a4b44ee52029f623",null),a.s(["registerUser",()=>m]),c()}catch(a){c(a)}},!1),56096,a=>a.a(async(b,c)=>{try{var d=a.i(64874),e=b([d]);[d]=e.then?(await e)():e,a.s([]),c()}catch(a){c(a)}},!1),46381,a=>a.a(async(b,c)=>{try{var d=a.i(56096),e=a.i(64874),f=b([d,e]);[d,e]=f.then?(await f)():f,a.s(["60365ce5c242b6e8c086221eb1a4b44ee52029f623",()=>e.registerUser]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__a60689b1._.js.map