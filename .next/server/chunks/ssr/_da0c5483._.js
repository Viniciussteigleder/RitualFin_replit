module.exports=[63227,a=>{"use strict";let b=Symbol.for("drizzle:entityKind");function c(a,c){if(!a||"object"!=typeof a)return!1;if(a instanceof c)return!0;if(!Object.prototype.hasOwnProperty.call(c,b))throw Error(`Class "${c.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let d=Object.getPrototypeOf(a).constructor;if(d)for(;d;){if(b in d&&d[b]===c[b])return!0;d=Object.getPrototypeOf(d)}return!1}Symbol.for("drizzle:hasOwnEntityKind"),a.s(["entityKind",()=>b,"is",()=>c])},17981,a=>{"use strict";var b=a.i(63227);class c{static [b.entityKind]="ConsoleLogWriter";write(a){console.log(a)}}class d{static [b.entityKind]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new c}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class e{static [b.entityKind]="NoopLogger";logQuery(){}}a.s(["DefaultLogger",()=>d,"NoopLogger",()=>e])},7484,a=>{"use strict";var b=a.i(63227);class c{static [b.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}a.s(["QueryPromise",()=>c])},18208,84113,a=>{"use strict";let b,c;function d(a,...b){return a(...b)}a.s(["iife",()=>d],18208);let e={startActiveSpan:(a,e)=>b?(c||(c=b.trace.getTracer("drizzle-orm","0.39.3")),d((b,c)=>c.startActiveSpan(a,a=>{try{return e(a)}catch(c){throw a.setStatus({code:b.SpanStatusCode.ERROR,message:c instanceof Error?c.message:"Unknown error"}),c}finally{a.end()}}),b,c)):e()};a.s(["tracer",()=>e],84113)},94415,77396,37003,5302,96178,4501,55280,20713,51674,a=>{"use strict";var b,c=a.i(63227);class d{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [c.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}a.s(["Column",()=>d],94415);class e{static [c.entityKind]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}a.s(["ColumnBuilder",()=>e],77396);let f=Symbol.for("drizzle:Name");a.s(["TableName",()=>f],37003);class g{static [c.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new h(a,this)}}class h{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [c.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),g=[this.table[f],...d,c[0].table[f],...e];return a??`${g.join("_")}_fk`}}var i=a.i(18208);function j(a,b){return`${a[f]}_${b.join("_")}_unique`}class k{constructor(a,b){this.name=b,this.columns=a}static [c.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new m(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class l{static [c.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new k(a,this.name)}}class m{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??j(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [c.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function n(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class o extends e{foreignKeyConfigs=[];static [c.entityKind]="PgColumnBuilder";array(a){return new s(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>(0,i.iife)((c,d)=>{let e=new g(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new q(a,this.config)}}class p extends d{constructor(a,b){b.uniqueName||(b.uniqueName=j(a,[b.name])),super(a,b),this.table=a}static [c.entityKind]="PgColumn"}class q extends p{static [c.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class r{static [c.entityKind]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class s extends o{static [c.entityKind]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new t(a,this.config,b)}}class t extends p{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [c.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=n(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=n(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let d=a.map(a=>null===a?null:(0,c.is)(this.baseColumn,t)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?d:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(d)}}a.s(["IndexedColumn",()=>r,"PgColumn",()=>p,"PgColumnBuilder",()=>o],5302);let u=Symbol.for("drizzle:isPgEnum");function v(a){return!!a&&"function"==typeof a&&u in a&&!0===a[u]}class w extends o{static [c.entityKind]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new x(a,this.config)}}class x extends p{static [c.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}function y(a,b){let c;return c=Object.assign(a=>new w(a??"",c),{enumName:a,enumValues:b,schema:void 0,[u]:!0})}a.s(["isPgEnum",()=>v,"pgEnum",()=>y],96178);class z{static [c.entityKind]="Subquery";constructor(a,b,c,d=!1){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d}}}class A extends z{static [c.entityKind]="WithSubquery"}a.s(["Subquery",()=>z,"WithSubquery",()=>A],4501);var B=a.i(84113);let C=Symbol.for("drizzle:ViewBaseConfig");a.s(["ViewBaseConfig",()=>C],55280);let D=Symbol.for("drizzle:Schema"),E=Symbol.for("drizzle:Columns"),F=Symbol.for("drizzle:ExtraConfigColumns"),G=Symbol.for("drizzle:OriginalName"),H=Symbol.for("drizzle:BaseName"),I=Symbol.for("drizzle:IsAlias"),J=Symbol.for("drizzle:ExtraConfigBuilder"),K=Symbol.for("drizzle:IsDrizzleTable");class L{static [c.entityKind]="Table";static Symbol={Name:f,Schema:D,OriginalName:G,Columns:E,ExtraConfigColumns:F,BaseName:H,IsAlias:I,ExtraConfigBuilder:J};[f];[G];[D];[E];[F];[H];[I]=!1;[K]=!0;[J]=void 0;constructor(a,b,c){this[f]=this[G]=a,this[D]=b,this[H]=c}}function M(a){return a[f]}function N(a){return`${a[D]??"public"}.${a[f]}`}a.s(["Columns",()=>E,"IsAlias",()=>I,"Table",()=>L,"getTableName",()=>M,"getTableUniqueName",()=>N],20713);class O{static [c.entityKind]="FakePrimitiveParam"}function P(a){return null!=a&&"function"==typeof a.getSQL}class Q{static [c.entityKind]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new R([this])}}class R{constructor(a){this.queryChunks=a}static [c.entityKind]="SQL";decoder=U;shouldInlineParams=!1;append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return B.tracer.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let e=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:f,escapeName:g,escapeParam:h,prepareTyping:i,inlineParams:j,paramStartIndex:k}=e;var l=a.map(a=>{if((0,c.is)(a,Q))return{sql:a.value.join(""),params:[]};if((0,c.is)(a,S))return{sql:g(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new Q("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new Q(", "));return b.push(new Q(")")),this.buildQueryFromSourceParams(b,e)}if((0,c.is)(a,R))return this.buildQueryFromSourceParams(a.queryChunks,{...e,inlineParams:j||a.shouldInlineParams});if((0,c.is)(a,L)){let b=a[L.Symbol.Schema],c=a[L.Symbol.Name];return{sql:void 0===b||a[I]?g(c):g(b)+"."+g(c),params:[]}}if((0,c.is)(a,d)){let c=f.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:g(c),params:[]};let d=a.table[L.Symbol.Schema];return{sql:a.table[I]||void 0===d?g(a.table[L.Symbol.Name])+"."+g(c):g(d)+"."+g(a.table[L.Symbol.Name])+"."+g(c),params:[]}}if((0,c.is)(a,ab)){let b=a[C].schema,c=a[C].name;return{sql:void 0===b||a[C].isAlias?g(c):g(b)+"."+g(c),params:[]}}if((0,c.is)(a,W)){if((0,c.is)(a.value,$))return{sql:h(k.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if((0,c.is)(b,R))return this.buildQueryFromSourceParams([b],e);if(j)return{sql:this.mapInlineParam(b,e),params:[]};let d=["none"];return i&&(d=[i(a.encoder)]),{sql:h(k.value++,b),params:[b],typings:d}}return(0,c.is)(a,$)?{sql:h(k.value++,a),params:[a],typings:["none"]}:(0,c.is)(a,R.Aliased)&&void 0!==a.fieldAlias?{sql:g(a.fieldAlias),params:[]}:(0,c.is)(a,z)?a._.isWith?{sql:g(a._.alias),params:[]}:this.buildQueryFromSourceParams([new Q("("),a._.sql,new Q(") "),new S(a._.alias)],e):v(a)?a.schema?{sql:g(a.schema)+"."+g(a.enumName),params:[]}:{sql:g(a.enumName),params:[]}:P(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],e):this.buildQueryFromSourceParams([new Q("("),a.getSQL(),new Q(")")],e):j?{sql:this.mapInlineParam(a,e),params:[]}:{sql:h(k.value++,a),params:[a],typings:["none"]}});let m={sql:"",params:[]};for(let a of l)m.sql+=a.sql,m.params.push(...a.params),a.typings?.length&&(m.typings||(m.typings=[]),m.typings.push(...a.typings));return m}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new R.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class S{constructor(a){this.value=a}static [c.entityKind]="Name";brand;getSQL(){return new R([this])}}function T(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let U={mapFromDriverValue:a=>a},V={mapToDriverValue:a=>a};({...U,...V});class W{constructor(a,b=V){this.value=a,this.encoder=b}static [c.entityKind]="Param";brand;getSQL(){return new R([this])}}function X(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new Q(a[0])),b.entries()))c.push(e,new Q(a[d+1]));return new R(c)}(b=X||(X={})).empty=function(){return new R([])},b.fromList=function(a){return new R(a)},b.raw=function(a){return new R([new Q(a)])},b.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new R(c)},b.identifier=function(a){return new S(a)},b.placeholder=function(a){return new $(a)},b.param=function(a,b){return new W(a,b)};var Y=R||(R={});class Z{constructor(a,b){this.sql=a,this.fieldAlias=b}static [c.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new Z(this.sql,this.fieldAlias)}}Y.Aliased=Z;class ${constructor(a){this.name=a}static [c.entityKind]="Placeholder";getSQL(){return new R([this])}}function _(a,b){return a.map(a=>{if((0,c.is)(a,$)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if((0,c.is)(a,W)&&(0,c.is)(a.value,$)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let aa=Symbol.for("drizzle:IsDrizzleView");class ab{static [c.entityKind]="View";[C];[aa]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[C]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new R([this])}}d.prototype.getSQL=function(){return new R([this])},L.prototype.getSQL=function(){return new R([this])},z.prototype.getSQL=function(){return new R([this])},a.s(["Param",()=>W,"Placeholder",()=>$,"SQL",()=>R,"StringChunk",()=>Q,"View",()=>ab,"fillPlaceholders",()=>_,"isDriverValueEncoder",()=>T,"isSQLWrapper",()=>P,"sql",()=>X],51674)},30928,a=>{"use strict";var b=a.i(77001),c=a.i(94415),d=a.i(63227),e=a.i(51674),f=a.i(4501),g=a.i(55280);class h{static [d.entityKind]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,i){if("_"===i)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(i===g.ViewBaseConfig)return{...a[g.ViewBaseConfig],selectedFields:new Proxy(a[g.ViewBaseConfig].selectedFields,this)};if("symbol"==typeof i)return a[i];let j=((0,d.is)(a,f.Subquery)?a._.selectedFields:(0,d.is)(a,e.View)?a[g.ViewBaseConfig].selectedFields:a)[i];if((0,d.is)(j,e.SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!j.isSelectionField)return j.sql;let a=j.clone();return a.isSelectionField=!0,a}if((0,d.is)(j,e.SQL)){if("sql"===this.config.sqlBehavior)return j;throw Error(`You tried to reference "${i}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,d.is)(j,c.Column)?this.config.alias?new Proxy(j,new b.ColumnAliasProxyHandler(new Proxy(j.table,new b.TableAliasProxyHandler(this.config.alias,this.config.replaceOriginalName??!1)))):j:"object"!=typeof j||null===j?j:new Proxy(j,new h(this.config))}}a.s(["SelectionProxyHandler",()=>h])},44551,a=>{"use strict";var b=a.i(94415),c=a.i(63227),d=a.i(51674),e=a.i(4501),f=a.i(20713),g=a.i(55280);function h(a,e,g){let h={},i=a.reduce((a,{path:i,field:j},k)=>{let l;l=(0,c.is)(j,b.Column)?j:(0,c.is)(j,d.SQL)?j.decoder:j.sql.decoder;let m=a;for(let[a,d]of i.entries())if(a<i.length-1)d in m||(m[d]={}),m=m[d];else{let a=e[k],n=m[d]=null===a?null:l.mapFromDriverValue(a);if(g&&(0,c.is)(j,b.Column)&&2===i.length){let a=i[0];a in h?"string"==typeof h[a]&&h[a]!==(0,f.getTableName)(j.table)&&(h[a]=!1):h[a]=null===n&&(0,f.getTableName)(j.table)}}return a},{});if(g&&Object.keys(h).length>0)for(let[a,b]of Object.entries(h))"string"!=typeof b||g[b]||(i[a]=null);return i}function i(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function j(a,e){let g=Object.entries(e).filter(([,a])=>void 0!==a).map(([e,g])=>(0,c.is)(g,d.SQL)||(0,c.is)(g,b.Column)?[e,g]:[e,new d.Param(g,a[f.Table.Symbol.Columns][e])]);if(0===g.length)throw Error("No values to set");return Object.fromEntries(g)}function k(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function l(a){return a[f.Table.Symbol.Columns]}function m(a){return(0,c.is)(a,e.Subquery)?a._.alias:(0,c.is)(a,d.View)?a[g.ViewBaseConfig].name:(0,c.is)(a,d.SQL)?void 0:a[f.Table.Symbol.IsAlias]?a[f.Table.Symbol.Name]:a[f.Table.Symbol.BaseName]}function n(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}function o(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.logger;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.logger;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}a.s(["applyMixins",()=>k,"getColumnNameAndConfig",()=>n,"getTableColumns",()=>l,"getTableLikeName",()=>m,"haveSameKeys",()=>i,"isConfig",()=>o,"mapResultRow",()=>h,"mapUpdateSet",()=>j,"orderSelectedFields",()=>function a(e,g){return Object.entries(e).reduce((e,[h,i])=>{if("string"!=typeof h)return e;let j=g?[...g,h]:[h];return(0,c.is)(i,b.Column)||(0,c.is)(i,d.SQL)||(0,c.is)(i,d.SQL.Aliased)?e.push({path:j,field:i}):(0,c.is)(i,f.Table)?e.push(...a(i[f.Table.Symbol.Columns],j)):e.push(...a(i,j)),e},[])}])},35506,a=>{"use strict";var b=a.i(63227),c=a.i(7484),d=a.i(30928),e=a.i(20713),f=a.i(84113),g=a.i(44551);class h extends c.QueryPromise{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [b.entityKind]="PgDelete";config;where(a){return this.config.where=a,this}returning(a=this.config.table[e.Table.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=(0,g.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return f.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>f.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new d.SelectionProxyHandler({alias:(0,e.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}a.s(["PgDeleteBase",()=>h])},97122,71360,a=>{"use strict";var b=a.i(63227),c=a.i(44551),d=a.i(5302),e=a.i(51674),f=d;class g extends f.PgColumnBuilder{static [b.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(e.sql`now()`)}}a.s(["PgDateColumnBaseBuilder",()=>g],71360);class h extends g{static [b.entityKind]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new i(a,this.config)}}class i extends d.PgColumn{static [b.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}mapToDriverValue(a){return a.toISOString()}}class j extends g{static [b.entityKind]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new k(a,this.config)}}class k extends d.PgColumn{static [b.entityKind]="PgDateString";getSQLType(){return"date"}}function l(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode==="date"?new h(d):new j(d)}a.s(["PgDate",()=>i,"PgDateString",()=>k,"date",()=>l],97122)},56564,83217,a=>{"use strict";var b=a.i(63227),c=a.i(5302);class d extends c.PgColumnBuilder{static [b.entityKind]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new e(a,this.config)}}class e extends c.PgColumn{static [b.entityKind]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function f(a){return new d(a??"")}a.s(["PgJson",()=>e,"json",()=>f],56564);var g=c;class h extends g.PgColumnBuilder{static [b.entityKind]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new i(a,this.config)}}class i extends g.PgColumn{static [b.entityKind]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function j(a){return new h(a??"")}a.s(["PgJsonb",()=>i,"jsonb",()=>j],83217)},90714,a=>{"use strict";var b=a.i(63227),c=a.i(44551),d=a.i(5302);class e extends d.PgColumnBuilder{static [b.entityKind]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new f(a,this.config)}}class f extends d.PgColumn{static [b.entityKind]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function g(a,b){let{name:d,config:f}=(0,c.getColumnNameAndConfig)(a,b);return new e(d,f?.precision,f?.scale)}a.s(["PgNumeric",()=>f,"numeric",()=>g])},952,99450,31793,a=>{"use strict";var b=a.i(63227),c=a.i(44551),d=a.i(5302),e=a.i(71360);class f extends e.PgDateColumnBaseBuilder{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [b.entityKind]="PgTimeBuilder";build(a){return new g(a,this.config)}}class g extends d.PgColumn{static [b.entityKind]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function h(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new f(d,e.withTimezone??!1,e.precision)}a.s(["PgTime",()=>g,"time",()=>h],952);var i=d,j=e;class k extends j.PgDateColumnBaseBuilder{static [b.entityKind]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new l(a,this.config)}}class l extends i.PgColumn{static [b.entityKind]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a=>new Date(this.withTimezone?a:a+"+0000");mapToDriverValue=a=>a.toISOString()}class m extends j.PgDateColumnBaseBuilder{static [b.entityKind]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new n(a,this.config)}}class n extends i.PgColumn{static [b.entityKind]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}}function o(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode==="string"?new m(d,e.withTimezone??!1,e.precision):new k(d,e?.withTimezone??!1,e?.precision)}a.s(["PgTimestamp",()=>l,"PgTimestampString",()=>n,"timestamp",()=>o],99450);var p=a.i(51674),q=d;class r extends q.PgColumnBuilder{static [b.entityKind]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default(p.sql`gen_random_uuid()`)}build(a){return new s(a,this.config)}}class s extends q.PgColumn{static [b.entityKind]="PgUUID";getSQLType(){return"uuid"}}function t(a){return new r(a??"")}a.s(["PgUUID",()=>s,"uuid",()=>t],31793)},94476,72694,37353,13552,21528,83632,10951,a=>{"use strict";var b=a.i(63227),c=a.i(44551),d=a.i(5302),e=d;class f extends e.PgColumnBuilder{static [b.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}a.s(["PgIntColumnBaseBuilder",()=>f],72694);class g extends f{static [b.entityKind]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new h(a,this.config)}}class h extends d.PgColumn{static [b.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class i extends f{static [b.entityKind]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new j(a,this.config)}}class j extends d.PgColumn{static [b.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function k(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return"number"===e.mode?new g(d):new i(d)}a.s(["bigint",()=>k],94476);var l=d;class m extends l.PgColumnBuilder{static [b.entityKind]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new n(a,this.config)}}class n extends l.PgColumn{static [b.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class o extends l.PgColumnBuilder{static [b.entityKind]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new p(a,this.config)}}class p extends l.PgColumn{static [b.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function q(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return"number"===e.mode?new m(d):new o(d)}a.s(["bigserial",()=>q],37353);var r=d;class s extends r.PgColumnBuilder{static [b.entityKind]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new t(a,this.config)}}class t extends r.PgColumn{static [b.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function u(a){return new s(a??"")}a.s(["boolean",()=>u],13552);var v=d;class w extends v.PgColumnBuilder{static [b.entityKind]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new x(a,this.config)}}class x extends v.PgColumn{static [b.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function y(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new w(d,e)}a.s(["char",()=>y],21528);var z=d;class A extends z.PgColumnBuilder{static [b.entityKind]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new B(a,this.config)}}class B extends z.PgColumn{static [b.entityKind]="PgCidr";getSQLType(){return"cidr"}}function C(a){return new A(a??"")}a.s(["cidr",()=>C],83632);var D=d;class E extends D.PgColumnBuilder{static [b.entityKind]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new F(a,this.config)}}class F extends D.PgColumn{static [b.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function G(a){return(b,d)=>{let{name:e,config:f}=(0,c.getColumnNameAndConfig)(b,d);return new E(e,f,a)}}a.s(["customType",()=>G],10951)},34139,12070,86096,75865,a=>{"use strict";var b=a.i(63227),c=a.i(5302);class d extends c.PgColumnBuilder{static [b.entityKind]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new e(a,this.config)}}class e extends c.PgColumn{static [b.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function f(a){return new d(a??"")}a.s(["doublePrecision",()=>f],34139);var g=c;class h extends g.PgColumnBuilder{static [b.entityKind]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new i(a,this.config)}}class i extends g.PgColumn{static [b.entityKind]="PgInet";getSQLType(){return"inet"}}function j(a){return new h(a??"")}a.s(["inet",()=>j],12070);var k=c,l=a.i(72694);class m extends l.PgIntColumnBaseBuilder{static [b.entityKind]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new n(a,this.config)}}class n extends k.PgColumn{static [b.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function o(a){return new m(a??"")}a.s(["integer",()=>o],86096);var p=a.i(44551),q=c;class r extends q.PgColumnBuilder{static [b.entityKind]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new s(a,this.config)}}class s extends q.PgColumn{static [b.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function t(a,b={}){let{name:c,config:d}=(0,p.getColumnNameAndConfig)(a,b);return new r(c,d)}a.s(["interval",()=>t],75865)},45541,18838,15911,a=>{"use strict";var b=a.i(63227),c=a.i(44551),d=a.i(5302);class e extends d.PgColumnBuilder{static [b.entityKind]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new f(a,this.config)}}class f extends d.PgColumn{static [b.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class g extends d.PgColumnBuilder{static [b.entityKind]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new h(a,this.config)}}class h extends d.PgColumn{static [b.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function i(a,b){let{name:d,config:f}=(0,c.getColumnNameAndConfig)(a,b);return f?.mode&&"tuple"!==f.mode?new g(d):new e(d)}a.s(["line",()=>i],45541);var j=d;class k extends j.PgColumnBuilder{static [b.entityKind]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new l(a,this.config)}}class l extends j.PgColumn{static [b.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function m(a){return new k(a??"")}a.s(["macaddr",()=>m],18838);var n=d;class o extends n.PgColumnBuilder{static [b.entityKind]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new p(a,this.config)}}class p extends n.PgColumn{static [b.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function q(a){return new o(a??"")}a.s(["macaddr8",()=>q],15911)},85285,80038,54801,602,43820,97881,65105,a=>{"use strict";var b=a.i(63227),c=a.i(44551),d=a.i(5302);class e extends d.PgColumnBuilder{static [b.entityKind]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new f(a,this.config)}}class f extends d.PgColumn{static [b.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class g extends d.PgColumnBuilder{static [b.entityKind]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new h(a,this.config)}}class h extends d.PgColumn{static [b.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function i(a,b){let{name:d,config:f}=(0,c.getColumnNameAndConfig)(a,b);return f?.mode&&"tuple"!==f.mode?new g(d):new e(d)}a.s(["point",()=>i],85285);var j=d;function k(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function l(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=k(b,c),d=k(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class m extends j.PgColumnBuilder{static [b.entityKind]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new n(a,this.config)}}class n extends j.PgColumn{static [b.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return l(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class o extends j.PgColumnBuilder{static [b.entityKind]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new p(a,this.config)}}class p extends j.PgColumn{static [b.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=l(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function q(a,b){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return e?.mode&&"tuple"!==e.mode?new o(d):new m(d)}a.s(["geometry",()=>q],80038);var r=d;class s extends r.PgColumnBuilder{static [b.entityKind]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new t(a,this.config)}}class t extends r.PgColumn{static [b.entityKind]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function u(a){return new s(a??"")}a.s(["real",()=>u],54801);var v=d;class w extends v.PgColumnBuilder{static [b.entityKind]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new x(a,this.config)}}class x extends v.PgColumn{static [b.entityKind]="PgSerial";getSQLType(){return"serial"}}function y(a){return new w(a??"")}a.s(["serial",()=>y],602);var z=d,A=a.i(72694);class B extends A.PgIntColumnBaseBuilder{static [b.entityKind]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new C(a,this.config)}}class C extends z.PgColumn{static [b.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function D(a){return new B(a??"")}a.s(["smallint",()=>D],43820);var E=d;class F extends E.PgColumnBuilder{static [b.entityKind]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new G(a,this.config)}}class G extends E.PgColumn{static [b.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function H(a){return new F(a??"")}a.s(["smallserial",()=>H],97881);var I=d;class J extends I.PgColumnBuilder{static [b.entityKind]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new K(a,this.config)}}class K extends I.PgColumn{static [b.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function L(a,b={}){let{name:d,config:e}=(0,c.getColumnNameAndConfig)(a,b);return new J(d,e)}a.s(["text",()=>L],65105)},93321,a=>{"use strict";var b=a.i(94415),c=a.i(63227),d=a.i(20713),e=a.i(51674);function f(a,f){return!(0,e.isDriverValueEncoder)(f)||(0,e.isSQLWrapper)(a)||(0,c.is)(a,e.Param)||(0,c.is)(a,e.Placeholder)||(0,c.is)(a,b.Column)||(0,c.is)(a,d.Table)||(0,c.is)(a,e.View)?a:new e.Param(a,f)}let g=(a,b)=>e.sql`${a} = ${f(b,a)}`,h=(a,b)=>e.sql`${a} <> ${f(b,a)}`;function i(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" and ")),new e.StringChunk(")")])}function j(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" or ")),new e.StringChunk(")")])}function k(a){return e.sql`not ${a}`}let l=(a,b)=>e.sql`${a} > ${f(b,a)}`,m=(a,b)=>e.sql`${a} >= ${f(b,a)}`,n=(a,b)=>e.sql`${a} < ${f(b,a)}`,o=(a,b)=>e.sql`${a} <= ${f(b,a)}`;function p(a,b){return Array.isArray(b)?0===b.length?e.sql`false`:e.sql`${a} in ${b.map(b=>f(b,a))}`:e.sql`${a} in ${f(b,a)}`}function q(a,b){return Array.isArray(b)?0===b.length?e.sql`true`:e.sql`${a} not in ${b.map(b=>f(b,a))}`:e.sql`${a} not in ${f(b,a)}`}function r(a){return e.sql`${a} is null`}function s(a){return e.sql`${a} is not null`}function t(a){return e.sql`exists ${a}`}function u(a){return e.sql`not exists ${a}`}function v(a,b,c){return e.sql`${a} between ${f(b,a)} and ${f(c,a)}`}function w(a,b,c){return e.sql`${a} not between ${f(b,a)} and ${f(c,a)}`}function x(a,b){return e.sql`${a} like ${b}`}function y(a,b){return e.sql`${a} not like ${b}`}function z(a,b){return e.sql`${a} ilike ${b}`}function A(a,b){return e.sql`${a} not ilike ${b}`}a.s(["and",()=>i,"between",()=>v,"eq",()=>g,"exists",()=>t,"gt",()=>l,"gte",()=>m,"ilike",()=>z,"inArray",()=>p,"isNotNull",()=>s,"isNull",()=>r,"like",()=>x,"lt",()=>n,"lte",()=>o,"ne",()=>h,"not",()=>k,"notBetween",()=>w,"notExists",()=>u,"notIlike",()=>A,"notInArray",()=>q,"notLike",()=>y,"or",()=>j])},30385,a=>{"use strict";var b=a.i(51674);function c(a){return b.sql`${a} asc`}function d(a){return b.sql`${a} desc`}a.s(["asc",()=>c,"desc",()=>d])},68540,18830,57833,74619,a=>{"use strict";var b=a.i(20713),c=a.i(94415),d=a.i(63227),e=b,f=a.i(94476),g=a.i(37353),h=a.i(13552),i=a.i(21528),j=a.i(83632),k=a.i(10951),l=a.i(97122),m=a.i(34139),n=a.i(12070),o=a.i(86096),p=a.i(75865),q=a.i(56564),r=a.i(83217),s=a.i(45541),t=a.i(18838),u=a.i(15911),v=a.i(90714),w=a.i(85285),x=a.i(80038),y=a.i(54801),z=a.i(602),A=a.i(43820),B=a.i(97881),C=a.i(65105),D=a.i(952),E=a.i(99450),F=a.i(31793),G=a.i(44551),H=a.i(5302);class I extends H.PgColumnBuilder{static [d.entityKind]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new J(a,this.config)}}class J extends H.PgColumn{static [d.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function K(a,b={}){let{name:c,config:d}=(0,G.getColumnNameAndConfig)(a,b);return new I(c,d)}a.s(["varchar",()=>K],18830);var L=H;class M extends L.PgColumnBuilder{static [d.entityKind]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new N(a,this.config)}}class N extends L.PgColumn{static [d.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function O(a,b){let{name:c,config:d}=(0,G.getColumnNameAndConfig)(a,b);return new M(c,d)}var P=H;class Q extends P.PgColumnBuilder{static [d.entityKind]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new R(a,this.config)}}class R extends P.PgColumn{static [d.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function S(a,b){let{name:c,config:d}=(0,G.getColumnNameAndConfig)(a,b);return new Q(c,d)}var T=H;class U extends T.PgColumnBuilder{static [d.entityKind]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new V(a,this.config)}}class V extends T.PgColumn{static [d.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function W(a,b){let{name:c,config:d}=(0,G.getColumnNameAndConfig)(a,b);return new U(c,d)}var X=H;class Y extends X.PgColumnBuilder{static [d.entityKind]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new Z(a,this.config)}}class Z extends X.PgColumn{static [d.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function $(a,b){let{name:c,config:d}=(0,G.getColumnNameAndConfig)(a,b);return new Y(c,d)}let _=Symbol.for("drizzle:PgInlineForeignKeys"),aa=Symbol.for("drizzle:EnableRLS");class ab extends e.Table{static [d.entityKind]="PgTable";static Symbol=Object.assign({},e.Table.Symbol,{InlineForeignKeys:_,EnableRLS:aa});[_]=[];[aa]=!1;[e.Table.Symbol.ExtraConfigBuilder]=void 0}let ac=(a,b,c)=>(function(a,b,c,d,G=a){let H=new ab(a,d,G),I="function"==typeof b?b({bigint:f.bigint,bigserial:g.bigserial,boolean:h.boolean,char:i.char,cidr:j.cidr,customType:k.customType,date:l.date,doublePrecision:m.doublePrecision,inet:n.inet,integer:o.integer,interval:p.interval,json:q.json,jsonb:r.jsonb,line:s.line,macaddr:t.macaddr,macaddr8:u.macaddr8,numeric:v.numeric,point:w.point,geometry:x.geometry,real:y.real,serial:z.serial,smallint:A.smallint,smallserial:B.smallserial,text:C.text,time:D.time,timestamp:E.timestamp,uuid:F.uuid,varchar:K,bit:O,halfvec:S,sparsevec:W,vector:$}):b,J=Object.fromEntries(Object.entries(I).map(([a,b])=>{b.setName(a);let c=b.build(H);return H[_].push(...b.buildForeignKeys(c,H)),[a,c]})),L=Object.fromEntries(Object.entries(I).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(H)]))),M=Object.assign(H,J);return M[e.Table.Symbol.Columns]=J,M[e.Table.Symbol.ExtraConfigColumns]=L,c&&(M[ab.Symbol.ExtraConfigBuilder]=c),Object.assign(M,{enableRLS:()=>(M[ab.Symbol.EnableRLS]=!0,M)})})(a,b,c,void 0);function ad(...a){return a[0].columns?new ae(a[0].columns,a[0].name):new ae(a)}a.s(["PgTable",()=>ab,"pgTable",()=>ac],57833);class ae{static [d.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new af(a,this.columns,this.name)}}class af{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [d.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[ab.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}a.s(["PrimaryKeyBuilder",()=>ae,"primaryKey",()=>ad],74619);var ag=a.i(93321),ah=a.i(30385),ai=a.i(51674);class aj{constructor(a,c,d){this.sourceTable=a,this.referencedTable=c,this.relationName=d,this.referencedTableName=c[b.Table.Symbol.Name]}static [d.entityKind]="Relation";referencedTableName;fieldName}class ak{constructor(a,b){this.table=a,this.config=b}static [d.entityKind]="Relations"}class al extends aj{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [d.entityKind]="One";withFieldName(a){let b=new al(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class am extends aj{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [d.entityKind]="Many";withFieldName(a){let b=new am(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function an(){return{and:ag.and,between:ag.between,eq:ag.eq,exists:ag.exists,gt:ag.gt,gte:ag.gte,ilike:ag.ilike,inArray:ag.inArray,isNull:ag.isNull,isNotNull:ag.isNotNull,like:ag.like,lt:ag.lt,lte:ag.lte,ne:ag.ne,not:ag.not,notBetween:ag.notBetween,notExists:ag.notExists,notLike:ag.notLike,notIlike:ag.notIlike,notInArray:ag.notInArray,or:ag.or,sql:ai.sql}}function ao(){return{sql:ai.sql,asc:ah.asc,desc:ah.desc}}function ap(a,c){1===Object.keys(a).length&&"default"in a&&!(0,d.is)(a.default,b.Table)&&(a=a.default);let e={},f={},g={};for(let[h,i]of Object.entries(a))if((0,d.is)(i,b.Table)){let a=(0,b.getTableUniqueName)(i),c=f[a];for(let d of(e[a]=h,g[h]={tsName:h,dbName:i[b.Table.Symbol.Name],schema:i[b.Table.Symbol.Schema],columns:i[b.Table.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]},Object.values(i[b.Table.Symbol.Columns])))d.primary&&g[h].primaryKey.push(d);let j=i[b.Table.Symbol.ExtraConfigBuilder]?.(i[b.Table.Symbol.ExtraConfigColumns]);if(j)for(let a of Object.values(j))(0,d.is)(a,ae)&&g[h].primaryKey.push(...a.columns)}else if((0,d.is)(i,ak)){let a,d=(0,b.getTableUniqueName)(i.table),h=e[d];for(let[b,e]of Object.entries(i.config(c(i.table))))if(h){let c=g[h];c.relations[b]=e,a&&c.primaryKey.push(...a)}else d in f||(f[d]={relations:{},primaryKey:a}),f[d].relations[b]=e}return{tables:g,tableNamesMap:e}}function aq(a,b){return new ak(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function ar(a,c,e){if((0,d.is)(e,al)&&e.config)return{fields:e.config.fields,references:e.config.references};let f=c[(0,b.getTableUniqueName)(e.referencedTable)];if(!f)throw Error(`Table "${e.referencedTable[b.Table.Symbol.Name]}" not found in schema`);let g=a[f];if(!g)throw Error(`Table "${f}" not found in schema`);let h=e.sourceTable,i=c[(0,b.getTableUniqueName)(h)];if(!i)throw Error(`Table "${h[b.Table.Symbol.Name]}" not found in schema`);let j=[];for(let a of Object.values(g.relations))(e.relationName&&e!==a&&a.relationName===e.relationName||!e.relationName&&a.referencedTable===e.sourceTable)&&j.push(a);if(j.length>1)throw e.relationName?Error(`There are multiple relations with name "${e.relationName}" in table "${f}"`):Error(`There are multiple relations between "${f}" and "${e.sourceTable[b.Table.Symbol.Name]}". Please specify relation name`);if(j[0]&&(0,d.is)(j[0],al)&&j[0].config)return{fields:j[0].config.references,references:j[0].config.fields};throw Error(`There is not enough information to infer relation "${i}.${e.fieldName}"`)}function as(a){return{one:function(b,c){return new al(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new am(a,b,c)}}}a.s(["Many",()=>am,"One",()=>al,"createTableRelationsHelpers",()=>as,"extractTablesRelationalConfig",()=>ap,"getOperators",()=>an,"getOrderByOperators",()=>ao,"mapRelationalRow",()=>function a(b,e,f,g,h=a=>a){let i={};for(let[j,k]of g.entries())if(k.isJson){let c=e.relations[k.tsKey],g=f[j],l="string"==typeof g?JSON.parse(g):g;i[k.tsKey]=(0,d.is)(c,al)?l&&a(b,b[k.relationTableTsKey],l,k.selection,h):l.map(c=>a(b,b[k.relationTableTsKey],c,k.selection,h))}else{let a,b=h(f[j]),e=k.field;a=(0,d.is)(e,c.Column)?e:(0,d.is)(e,ai.SQL)?e.decoder:e.sql.decoder,i[k.tsKey]=null===b?null:a.mapFromDriverValue(b)}return i},"normalizeRelation",()=>ar,"relations",()=>aq],68540)},77001,41657,11832,55339,81562,a=>{"use strict";var b=a.i(94415),c=a.i(63227),d=a.i(51674),e=a.i(20713),f=a.i(55280);class g{constructor(a){this.table=a}static [c.entityKind]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class h{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [c.entityKind]="TableAliasProxyHandler";get(a,d){if(d===e.Table.Symbol.IsAlias)return!0;if(d===e.Table.Symbol.Name||this.replaceOriginalName&&d===e.Table.Symbol.OriginalName)return this.alias;if(d===f.ViewBaseConfig)return{...a[f.ViewBaseConfig],name:this.alias,isAlias:!0};if(d===e.Table.Symbol.Columns){let b=a[e.Table.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new g(new Proxy(a,this)))}),c}let h=a[d];return(0,c.is)(h,b.Column)?new Proxy(h,new g(new Proxy(a,this))):h}}class i{constructor(a){this.alias=a}static [c.entityKind]="RelationTableAliasProxyHandler";get(a,b){return"sourceTable"===b?j(a.sourceTable,this.alias):a[b]}}function j(a,b){return new Proxy(a,new h(b,!1))}function k(a,b){return new Proxy(a,new g(new Proxy(a.table,new h(b,!1))))}function l(a,b){return new d.SQL.Aliased(m(a.sql,b),a.fieldAlias)}function m(a,e){return d.sql.join(a.queryChunks.map(a=>(0,c.is)(a,b.Column)?k(a,e):(0,c.is)(a,d.SQL)?m(a,e):(0,c.is)(a,d.SQL.Aliased)?l(a,e):a))}function n(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function o(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function p(a){return a}a.s(["ColumnAliasProxyHandler",()=>g,"TableAliasProxyHandler",()=>h,"aliasedTable",()=>j,"aliasedTableColumn",()=>k,"mapColumnsInAliasedSQLToAlias",()=>l,"mapColumnsInSQLToAlias",()=>m],77001);class q{static [c.entityKind]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?n:"camelCase"===a?o:p}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[e.Table.Symbol.Schema]??"public",c=a.table[e.Table.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[e.Table.Symbol.Schema]??"public",c=a[e.Table.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[e.Table.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}a.s(["CasingCache",()=>q],41657);class r extends Error{static [c.entityKind]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class s extends r{static [c.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}a.s(["DrizzleError",()=>r,"TransactionRollbackError",()=>s],11832);var t=a.i(5302),u=a.i(97122),v=a.i(56564),w=a.i(83217),x=a.i(90714),y=a.i(952),z=a.i(99450),A=a.i(31793),B=a.i(57833),C=a.i(68540),D=a.i(93321),E=a.i(4501),F=a.i(44551),G=d;class H extends G.View{static [c.entityKind]="PgViewBase"}a.s(["PgViewBase",()=>H],55339);class I{static [c.entityKind]="PgDialect";casing;constructor(a){this.casing=new q(a?.casing)}async migrate(a,b,c){let e="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",f="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",g=d.sql`
			CREATE TABLE IF NOT EXISTS ${d.sql.identifier(f)}.${d.sql.identifier(e)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute(d.sql`CREATE SCHEMA IF NOT EXISTS ${d.sql.identifier(f)}`),await b.execute(g);let h=(await b.all(d.sql`select id, hash, created_at from ${d.sql.identifier(f)}.${d.sql.identifier(e)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!h||Number(h.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(d.sql.raw(a));await b.execute(d.sql`insert into ${d.sql.identifier(f)}.${d.sql.identifier(e)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[d.sql`with `];for(let[c,e]of a.entries())b.push(d.sql`${d.sql.identifier(e._.alias)} as (${e._.sql})`),c<a.length-1&&b.push(d.sql`, `);return b.push(d.sql` `),d.sql.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:e}){let f=this.buildWithCTE(e),g=c?d.sql` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,h=b?d.sql` where ${b}`:void 0;return d.sql`${f}delete from ${a}${h}${g}`}buildUpdateSet(a,b){let c=a[e.Table.Symbol.Columns],f=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),g=f.length;return d.sql.join(f.flatMap((a,e)=>{let f=c[a],h=b[a]??d.sql.param(f.onUpdateFn(),f),i=d.sql`${d.sql.identifier(this.casing.getColumnCasing(f))} = ${h}`;return e<g-1?[i,d.sql.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:e,withList:f,from:g,joins:h}){let i=this.buildWithCTE(f),j=a[B.PgTable.Symbol.Name],k=a[B.PgTable.Symbol.Schema],l=a[B.PgTable.Symbol.OriginalName],m=j===l?void 0:j,n=d.sql`${k?d.sql`${d.sql.identifier(k)}.`:void 0}${d.sql.identifier(l)}${m&&d.sql` ${d.sql.identifier(m)}`}`,o=this.buildUpdateSet(a,b),p=g&&d.sql.join([d.sql.raw(" from "),this.buildFromTable(g)]),q=this.buildJoins(h),r=e?d.sql` returning ${this.buildSelection(e,{isSingleTable:!g})}`:void 0,s=c?d.sql` where ${c}`:void 0;return d.sql`${i}update ${n} set ${o}${p}${q}${s}${r}`}buildSelection(a,{isSingleTable:e=!1}={}){let f=a.length,g=a.flatMap(({field:a},g)=>{let h=[];if((0,c.is)(a,d.SQL.Aliased)&&a.isSelectionField)h.push(d.sql.identifier(a.fieldAlias));else if((0,c.is)(a,d.SQL.Aliased)||(0,c.is)(a,d.SQL)){let b=(0,c.is)(a,d.SQL.Aliased)?a.sql:a;e?h.push(new d.SQL(b.queryChunks.map(a=>(0,c.is)(a,t.PgColumn)?d.sql.identifier(this.casing.getColumnCasing(a)):a))):h.push(b),(0,c.is)(a,d.SQL.Aliased)&&h.push(d.sql` as ${d.sql.identifier(a.fieldAlias)}`)}else(0,c.is)(a,b.Column)&&(e?h.push(d.sql.identifier(this.casing.getColumnCasing(a))):h.push(a));return g<f-1&&h.push(d.sql`, `),h});return d.sql.join(g)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[e,g]of a.entries()){0===e&&b.push(d.sql` `);let h=g.table,i=g.lateral?d.sql` lateral`:void 0;if((0,c.is)(h,B.PgTable)){let a=h[B.PgTable.Symbol.Name],c=h[B.PgTable.Symbol.Schema],e=h[B.PgTable.Symbol.OriginalName],f=a===e?void 0:g.alias;b.push(d.sql`${d.sql.raw(g.joinType)} join${i} ${c?d.sql`${d.sql.identifier(c)}.`:void 0}${d.sql.identifier(e)}${f&&d.sql` ${d.sql.identifier(f)}`} on ${g.on}`)}else if((0,c.is)(h,d.View)){let a=h[f.ViewBaseConfig].name,c=h[f.ViewBaseConfig].schema,e=h[f.ViewBaseConfig].originalName,j=a===e?void 0:g.alias;b.push(d.sql`${d.sql.raw(g.joinType)} join${i} ${c?d.sql`${d.sql.identifier(c)}.`:void 0}${d.sql.identifier(e)}${j&&d.sql` ${d.sql.identifier(j)}`} on ${g.on}`)}else b.push(d.sql`${d.sql.raw(g.joinType)} join${i} ${h} on ${g.on}`);e<a.length-1&&b.push(d.sql` `)}return d.sql.join(b)}buildFromTable(a){if((0,c.is)(a,e.Table)&&a[e.Table.Symbol.OriginalName]!==a[e.Table.Symbol.Name]){let b=d.sql`${d.sql.identifier(a[e.Table.Symbol.OriginalName])}`;return a[e.Table.Symbol.Schema]&&(b=d.sql`${d.sql.identifier(a[e.Table.Symbol.Schema])}.${b}`),d.sql`${b} ${d.sql.identifier(a[e.Table.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:g,fieldsFlat:h,where:i,having:j,table:k,joins:l,orderBy:m,groupBy:n,limit:o,offset:p,lockingClause:q,distinct:r,setOperators:s}){let t,u,v,w=h??(0,F.orderSelectedFields)(g);for(let a of w){let g;if((0,c.is)(a.field,b.Column)&&(0,e.getTableName)(a.field.table)!==((0,c.is)(k,E.Subquery)?k._.alias:(0,c.is)(k,H)?k[f.ViewBaseConfig].name:(0,c.is)(k,d.SQL)?void 0:(0,e.getTableName)(k))&&(g=a.field.table,!l?.some(({alias:a})=>a===(g[e.Table.Symbol.IsAlias]?(0,e.getTableName)(g):g[e.Table.Symbol.BaseName])))){let b=(0,e.getTableName)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let x=!l||0===l.length,y=this.buildWithCTE(a);r&&(t=!0===r?d.sql` distinct`:d.sql` distinct on (${d.sql.join(r.on,d.sql`, `)})`);let z=this.buildSelection(w,{isSingleTable:x}),A=this.buildFromTable(k),B=this.buildJoins(l),C=i?d.sql` where ${i}`:void 0,D=j?d.sql` having ${j}`:void 0;m&&m.length>0&&(u=d.sql` order by ${d.sql.join(m,d.sql`, `)}`),n&&n.length>0&&(v=d.sql` group by ${d.sql.join(n,d.sql`, `)}`);let G="object"==typeof o||"number"==typeof o&&o>=0?d.sql` limit ${o}`:void 0,I=p?d.sql` offset ${p}`:void 0,J=d.sql.empty();if(q){let a=d.sql` for ${d.sql.raw(q.strength)}`;q.config.of&&a.append(d.sql` of ${d.sql.join(Array.isArray(q.config.of)?q.config.of:[q.config.of],d.sql`, `)}`),q.config.noWait?a.append(d.sql` no wait`):q.config.skipLocked&&a.append(d.sql` skip locked`),J.append(a)}let K=d.sql`${y}select${t} ${z} from ${A}${B}${C}${v}${D}${u}${G}${I}${J}`;return s.length>0?this.buildSetOperations(K,s):K}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:e,rightSelect:f,limit:g,orderBy:h,offset:i}}){let j,k=d.sql`(${a.getSQL()}) `,l=d.sql`(${f.getSQL()})`;if(h&&h.length>0){let a=[];for(let b of h)if((0,c.is)(b,t.PgColumn))a.push(d.sql.identifier(b.name));else if((0,c.is)(b,d.SQL)){for(let a=0;a<b.queryChunks.length;a++){let e=b.queryChunks[a];(0,c.is)(e,t.PgColumn)&&(b.queryChunks[a]=d.sql.identifier(e.name))}a.push(d.sql`${b}`)}else a.push(d.sql`${b}`);j=d.sql` order by ${d.sql.join(a,d.sql`, `)} `}let m="object"==typeof g||"number"==typeof g&&g>=0?d.sql` limit ${g}`:void 0,n=d.sql.raw(`${b} ${e?"all ":""}`),o=i?d.sql` offset ${i}`:void 0;return d.sql`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:b,onConflict:f,returning:g,withList:h,select:i,overridingSystemValue_:j}){let k=[],l=Object.entries(a[e.Table.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),m=l.map(([,a])=>d.sql.identifier(this.casing.getColumnCasing(a)));if(i)(0,c.is)(b,d.SQL)?k.push(b):k.push(b.getSQL());else for(let[a,e]of(k.push(d.sql.raw("values ")),b.entries())){let f=[];for(let[a,b]of l){let g=e[a];if(void 0===g||(0,c.is)(g,d.Param)&&void 0===g.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),e=(0,c.is)(a,d.SQL)?a:d.sql.param(a,b);f.push(e)}else if(b.default||void 0===b.onUpdateFn)f.push(d.sql`default`);else{let a=b.onUpdateFn(),e=(0,c.is)(a,d.SQL)?a:d.sql.param(a,b);f.push(e)}else f.push(g)}k.push(f),a<b.length-1&&k.push(d.sql`, `)}let n=this.buildWithCTE(h),o=d.sql.join(k),p=g?d.sql` returning ${this.buildSelection(g,{isSingleTable:!0})}`:void 0,q=f?d.sql` on conflict ${f}`:void 0,r=!0===j?d.sql`overriding system value `:void 0;return d.sql`${n}insert into ${a} ${m} ${r}${o}${q}${p}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let e=b?d.sql` concurrently`:void 0,f=c?d.sql` with no data`:void 0;return d.sql`refresh materialized view${e} ${a}${f}`}prepareTyping(a){if((0,c.is)(a,w.PgJsonb)||(0,c.is)(a,v.PgJson))return"json";if((0,c.is)(a,x.PgNumeric))return"decimal";if((0,c.is)(a,y.PgTime))return"time";if((0,c.is)(a,z.PgTimestamp)||(0,c.is)(a,z.PgTimestampString))return"timestamp";if((0,c.is)(a,u.PgDate)||(0,c.is)(a,u.PgDateString))return"date";else if((0,c.is)(a,A.PgUUID))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:f,tableNamesMap:g,table:h,tableConfig:i,queryConfig:n,tableAlias:o,nestedQueryRelation:p,joinOn:q}){let s,t=[],u,v,w=[],x,y=[];if(!0===n)t=Object.entries(i.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:k(b,o),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let h=Object.fromEntries(Object.entries(i.columns).map(([a,b])=>[a,k(b,o)]));if(n.where){let a="function"==typeof n.where?n.where(h,(0,C.getOperators)()):n.where;x=a&&m(a,o)}let j=[],p=[];if(n.columns){let a=!1;for(let[b,c]of Object.entries(n.columns))void 0!==c&&b in i.columns&&(a||!0!==c||(a=!0),p.push(b));p.length>0&&(p=a?p.filter(a=>n.columns?.[a]===!0):Object.keys(i.columns).filter(a=>!p.includes(a)))}else p=Object.keys(i.columns);for(let a of p){let b=i.columns[a];j.push({tsKey:a,value:b})}let q=[];if(n.with&&(q=Object.entries(n.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:i.relations[a]}))),n.extras)for(let[a,b]of Object.entries("function"==typeof n.extras?n.extras(h,{sql:d.sql}):n.extras))j.push({tsKey:a,value:l(b,o)});for(let{tsKey:a,value:e}of j)t.push({dbKey:(0,c.is)(e,d.SQL.Aliased)?e.fieldAlias:i.columns[a].name,tsKey:a,field:(0,c.is)(e,b.Column)?k(e,o):e,relationTableTsKey:void 0,isJson:!1,selection:[]});let r="function"==typeof n.orderBy?n.orderBy(h,(0,C.getOrderByOperators)()):n.orderBy??[];for(let{tsKey:h,queryConfig:i,relation:j}of(Array.isArray(r)||(r=[r]),w=r.map(a=>(0,c.is)(a,b.Column)?k(a,o):m(a,o)),u=n.limit,v=n.offset,q)){let b=(0,C.normalizeRelation)(f,g,j),l=g[(0,e.getTableUniqueName)(j.referencedTable)],m=`${o}_${h}`,n=(0,D.and)(...b.fields.map((a,c)=>(0,D.eq)(k(b.references[c],m),k(a,o)))),p=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:f,tableNamesMap:g,table:a[l],tableConfig:f[l],queryConfig:(0,c.is)(j,C.One)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:m,joinOn:n,nestedQueryRelation:j}),q=d.sql`${d.sql.identifier(m)}.${d.sql.identifier("data")}`.as(h);y.push({on:d.sql`true`,table:new E.Subquery(p.sql,{},m),alias:m,joinType:"left",lateral:!0}),t.push({dbKey:h,tsKey:h,field:q,relationTableTsKey:l,isJson:!0,selection:p.selection})}}if(0===t.length)throw new r({message:`No fields selected for table "${i.tsName}" ("${o}")`});if(x=(0,D.and)(q,x),p){let a=d.sql`json_build_array(${d.sql.join(t.map(({field:a,tsKey:b,isJson:e})=>e?d.sql`${d.sql.identifier(`${o}_${b}`)}.${d.sql.identifier("data")}`:(0,c.is)(a,d.SQL.Aliased)?a.sql:a),d.sql`, `)})`;(0,c.is)(p,C.Many)&&(a=d.sql`coalesce(json_agg(${a}${w.length>0?d.sql` order by ${d.sql.join(w,d.sql`, `)}`:void 0}), '[]'::json)`);let e=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:t}];void 0!==u||void 0!==v||w.length>0?(s=this.buildSelectQuery({table:j(h,o),fields:{},fieldsFlat:[{path:[],field:d.sql.raw("*")}],where:x,limit:u,offset:v,orderBy:w,setOperators:[]}),x=void 0,u=void 0,v=void 0,w=[]):s=j(h,o),s=this.buildSelectQuery({table:(0,c.is)(s,B.PgTable)?s:new E.Subquery(s,{},o),fields:{},fieldsFlat:e.map(({field:a})=>({path:[],field:(0,c.is)(a,b.Column)?k(a,o):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]})}else s=this.buildSelectQuery({table:j(h,o),fields:{},fieldsFlat:t.map(({field:a})=>({path:[],field:(0,c.is)(a,b.Column)?k(a,o):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]});return{tableTsKey:i.tsName,sql:s,selection:t}}}a.s(["PgDialect",()=>I],81562)},82534,a=>{"use strict";var b=a.i(63227);class c{static [b.entityKind]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}a.s(["TypedQueryBuilder",()=>c])},63343,a=>{"use strict";var b=a.i(63227),c=a.i(35506),d=a.i(7484),e=a.i(30928),f=a.i(51674),g=a.i(20713),h=a.i(84113),i=a.i(44551),j=a.i(81562),k=a.i(4501),l=a.i(55339),m=a.i(82534),n=a.i(55280);class o{static [b.entityKind]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let c,d=!!this.fields;return c=this.fields?this.fields:(0,b.is)(a,k.Subquery)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,b.is)(a,l.PgViewBase)?a[n.ViewBaseConfig].selectedFields:(0,b.is)(a,f.SQL)?{}:(0,i.getTableColumns)(a),new q({table:a,fields:c,isPartialSelect:d,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class p extends m.TypedQueryBuilder{static [b.entityKind]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,i.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(c,d)=>{let h=this.tableName,j=(0,i.getTableLikeName)(c);if("string"==typeof j&&this.config.joins?.some(a=>a.alias===j))throw Error(`Alias "${j}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof h&&(this.config.fields={[h]:this.config.fields}),"string"==typeof j&&!(0,b.is)(c,f.SQL))){let a=(0,b.is)(c,k.Subquery)?c._.selectedFields:(0,b.is)(c,f.View)?c[n.ViewBaseConfig].selectedFields:c[g.Table.Symbol.Columns];this.config.fields[j]=a}if("function"==typeof d&&(d=d(new Proxy(this.config.fields,new e.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:d,table:c,joinType:a,alias:j}),"string"==typeof j)switch(a){case"left":this.joinsNotNullableMap[j]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[j]=!0;break;case"inner":this.joinsNotNullableMap[j]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[j]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(s()):c;if(!(0,i.haveSameKeys)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new e.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new e.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new e.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new e.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new k.Subquery(this.getSQL(),this.config.fields,a),new e.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new e.SelectionProxyHandler({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class q extends p{static [b.entityKind]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:e,authToken:f}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return h.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let g=(0,i.orderSelectedFields)(c.fields),h=b.prepareQuery(d.sqlToQuery(this.getSQL()),g,a,!0);return h.joinsNotNullableMap=e,h.setToken(f)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>h.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}function r(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,i.haveSameKeys)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,i.applyMixins)(q,[d.QueryPromise]);let s=()=>({union:t,unionAll:u,intersect:v,intersectAll:w,except:x,exceptAll:y}),t=r("union",!1),u=r("union",!0),v=r("intersect",!1),w=r("intersect",!0),x=r("except",!1),y=r("except",!0);class z{static [b.entityKind]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,b.is)(a,j.PgDialect)?a:void 0,this.dialectConfig=(0,b.is)(a,j.PgDialect)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new k.WithSubquery(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new e.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new o({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new o({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new o({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new o({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new o({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new o({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new j.PgDialect(this.dialectConfig)),this.dialect}}class A{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [b.entityKind]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let c=a.map(a=>{let c={},d=this.table[g.Table.Symbol.Columns];for(let e of Object.keys(a)){let g=a[e];c[e]=(0,b.is)(g,f.SQL)?g:new f.Param(g,d[e])}return c});return new B(this.table,c,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let c="function"==typeof a?a(new z):a;if(!(0,b.is)(c,f.SQL)&&!(0,i.haveSameKeys)(this.table[g.Columns],c._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new B(this.table,c,this.session,this.dialect,this.withList,!0)}}class B extends d.QueryPromise{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [b.entityKind]="PgInsert";config;returning(a=this.config.table[g.Table.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=(0,i.orderSelectedFields)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=f.sql`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?f.sql` where ${a.where}`:void 0;this.config.onConflict=f.sql`(${f.sql.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?f.sql` where ${a.where}`:void 0,c=a.targetWhere?f.sql` where ${a.targetWhere}`:void 0,d=a.setWhere?f.sql` where ${a.setWhere}`:void 0,e=this.dialect.buildUpdateSet(this.config.table,(0,i.mapUpdateSet)(this.config.table,a.set)),g="";return g=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=f.sql`(${f.sql.raw(g)})${c} do update set ${e}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return h.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>h.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new e.SelectionProxyHandler({alias:(0,g.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}var C=a.i(57833),D=d;class E{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [b.entityKind]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return new F(this.table,(0,i.mapUpdateSet)(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class F extends D.QueryPromise{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=(0,i.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [b.entityKind]="PgUpdate";config;tableName;joinsNotNullableMap;from(a){let b=(0,i.getTableLikeName)(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return(0,b.is)(a,C.PgTable)?a[g.Table.Symbol.Columns]:(0,b.is)(a,k.Subquery)?a._.selectedFields:a[n.ViewBaseConfig].selectedFields}createJoin(a){return(c,d)=>{let h=(0,i.getTableLikeName)(c);if("string"==typeof h&&this.config.joins.some(a=>a.alias===h))throw Error(`Alias "${h}" is already used in this query`);if("function"==typeof d){let a=this.config.from&&!(0,b.is)(this.config.from,f.SQL)?this.getTableLikeFields(this.config.from):void 0;d=d(new Proxy(this.config.table[g.Table.Symbol.Columns],new e.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new e.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:d,table:c,joinType:a,alias:h}),"string"==typeof h)switch(a){case"left":this.joinsNotNullableMap[h]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[h]=!0;break;case"inner":this.joinsNotNullableMap[h]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[h]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[g.Table.Symbol.Columns]),this.config.from)){let c=(0,i.getTableLikeName)(this.config.from);if("string"==typeof c&&this.config.from&&!(0,b.is)(this.config.from,f.SQL)){let b=this.getTableLikeFields(this.config.from);a[c]=b}for(let c of this.config.joins){let d=(0,i.getTableLikeName)(c.table);if("string"==typeof d&&!(0,b.is)(c.table,f.SQL)){let b=this.getTableLikeFields(c.table);a[d]=b}}}return this.config.returningFields=a,this.config.returning=(0,i.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new e.SelectionProxyHandler({alias:(0,g.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}var G=f;class H extends G.SQL{constructor(a){super(H.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=H.buildCount(a.source,a.filters)}sql;token;static [b.entityKind]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return G.sql`(select count(*) from ${a}${G.sql.raw(" where ").if(b)}${b})`}static buildCount(a,b){return G.sql`select count(*) as count from ${a}${G.sql.raw(" where ").if(b)}${b};`}setToken(a){return this.token=a,this}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}var I=d,J=a.i(68540);class K{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [b.entityKind]="PgRelationalQueryBuilder";findMany(a){return new L(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new L(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class L extends I.QueryPromise{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [b.entityKind]="PgRelationalQuery";_prepare(a){return h.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let d=a.map(a=>(0,J.mapRelationalRow)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return h.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}var M=d;class N extends M.QueryPromise{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [b.entityKind]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}var O=d;class P extends O.QueryPromise{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [b.entityKind]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return h.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>h.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class Q{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(const[d,e]of Object.entries(this._.schema))this.query[d]=new K(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b)}static [b.entityKind]="PgDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new z(c.dialect))),new Proxy(new k.WithSubquery(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new e.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new H({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new o({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new o({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new o({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new E(c,b.session,b.dialect,a)},insert:function(c){return new A(c,b.session,b.dialect,a)},delete:function(d){return new c.PgDeleteBase(d,b.session,b.dialect,a)}}}select(a){return new o({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new o({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new o({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new E(a,this.session,this.dialect)}insert(a){return new A(a,this.session,this.dialect)}delete(a){return new c.PgDeleteBase(a,this.session,this.dialect)}refreshMaterializedView(a){return new P(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?f.sql.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),d=this.session.prepareQuery(c,void 0,void 0,!1);return new N(()=>d.execute(void 0,this.authToken),b,c,a=>d.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}a.s(["PgDatabase",()=>Q],63343)},19169,a=>{"use strict";var b=a.i(63227),c=a.i(11832),d=a.i(51674),e=a.i(84113),f=a.i(63343);class g{constructor(a){this.query=a}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [b.entityKind]="PgPreparedQuery";joinsNotNullableMap}class h{constructor(a){this.dialect=a}static [b.entityKind]="PgSession";execute(a,b){return e.tracer.startActiveSpan("drizzle.operation",()=>e.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class i extends f.PgDatabase{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [b.entityKind]="PgTransaction";rollback(){throw new c.TransactionRollbackError}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),d.sql.raw(b.join(" "))}setTransaction(a){return this.session.execute(d.sql`set transaction ${this.getTransactionConfigSQL(a)}`)}}a.s(["PgPreparedQuery",()=>g,"PgSession",()=>h,"PgTransaction",()=>i])},27401,a=>a.a(async(b,c)=>{try{var d=a.i(23862),e=a.i(63227),f=a.i(17981),g=a.i(19169),h=a.i(51674),i=a.i(84113),j=a.i(44551),k=b([d]);[d]=k.then?(await k)():k;let{Pool:l,types:m}=d.default;class n extends g.PgPreparedQuery{constructor(a,b,c,d,e,f,g,h){super({sql:b,params:c}),this.client=a,this.params=c,this.logger=d,this.fields=e,this._isResponseInArrayMode=g,this.customResultMapper=h,this.rawQueryConfig={name:f,text:b,types:{getTypeParser:(a,b)=>a===m.builtins.TIMESTAMPTZ||a===m.builtins.TIMESTAMP||a===m.builtins.DATE||a===m.builtins.INTERVAL?a=>a:m.getTypeParser(a,b)}},this.queryConfig={name:f,text:b,rowMode:"array",types:{getTypeParser:(a,b)=>a===m.builtins.TIMESTAMPTZ||a===m.builtins.TIMESTAMP||a===m.builtins.DATE||a===m.builtins.INTERVAL?a=>a:m.getTypeParser(a,b)}}}static [e.entityKind]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute(a={}){return i.tracer.startActiveSpan("drizzle.execute",async()=>{let b=(0,h.fillPlaceholders)(this.params,a);this.logger.logQuery(this.rawQueryConfig.text,b);let{fields:c,rawQueryConfig:d,client:e,queryConfig:f,joinsNotNullableMap:g,customResultMapper:k}=this;if(!c&&!k)return i.tracer.startActiveSpan("drizzle.driver.execute",async a=>(a?.setAttributes({"drizzle.query.name":d.name,"drizzle.query.text":d.text,"drizzle.query.params":JSON.stringify(b)}),e.query(d,b)));let l=await i.tracer.startActiveSpan("drizzle.driver.execute",a=>(a?.setAttributes({"drizzle.query.name":f.name,"drizzle.query.text":f.text,"drizzle.query.params":JSON.stringify(b)}),e.query(f,b)));return i.tracer.startActiveSpan("drizzle.mapResponse",()=>k?k(l.rows):l.rows.map(a=>(0,j.mapResultRow)(c,a,g)))})}all(a={}){return i.tracer.startActiveSpan("drizzle.execute",()=>{let b=(0,h.fillPlaceholders)(this.params,a);return this.logger.logQuery(this.rawQueryConfig.text,b),i.tracer.startActiveSpan("drizzle.driver.execute",a=>(a?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(b)}),this.client.query(this.rawQueryConfig,b).then(a=>a.rows)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class o extends g.PgSession{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.logger=d.logger??new f.NoopLogger}static [e.entityKind]="NodePgSession";logger;prepareQuery(a,b,c,d,e){return new n(this.client,a.sql,a.params,this.logger,b,c,d,e)}async transaction(a,b){let c=this.client instanceof l?new o(await this.client.connect(),this.dialect,this.schema,this.options):this,d=new p(this.dialect,c,this.schema);await d.execute(h.sql`begin${b?h.sql` ${d.getTransactionConfigSQL(b)}`:void 0}`);try{let b=await a(d);return await d.execute(h.sql`commit`),b}catch(a){throw await d.execute(h.sql`rollback`),a}finally{this.client instanceof l&&c.client.release()}}async count(a){let b=await this.execute(a);return Number(b.rows[0].count)}}class p extends g.PgTransaction{static [e.entityKind]="NodePgTransaction";async transaction(a){let b=`sp${this.nestedIndex+1}`,c=new p(this.dialect,this.session,this.schema,this.nestedIndex+1);await c.execute(h.sql.raw(`savepoint ${b}`));try{let d=await a(c);return await c.execute(h.sql.raw(`release savepoint ${b}`)),d}catch(a){throw await c.execute(h.sql.raw(`rollback to savepoint ${b}`)),a}}}a.s(["NodePgSession",()=>o]),c()}catch(a){c(a)}},!1),67189,a=>a.a(async(b,c)=>{try{var d=a.i(23862),e=a.i(63227),f=a.i(17981),g=a.i(63343),h=a.i(81562),i=a.i(68540),j=a.i(44551),k=a.i(27401),l=b([d,k]);[d,k]=l.then?(await l)():l;class o{constructor(a,b,c={}){this.client=a,this.dialect=b,this.options=c}static [e.entityKind]="NodePgDriver";createSession(a){return new k.NodePgSession(this.client,this.dialect,a,{logger:this.options.logger})}}class p extends g.PgDatabase{static [e.entityKind]="NodePgDatabase"}function m(a,b={}){let c,d,e=new h.PgDialect({casing:b.casing});if(!0===b.logger?c=new f.DefaultLogger:!1!==b.logger&&(c=b.logger),b.schema){let a=(0,i.extractTablesRelationalConfig)(b.schema,i.createTableRelationsHelpers);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let g=new o(a,e,{logger:c}).createSession(d),j=new p(e,g,d);return j.$client=a,j}function n(...a){if("string"==typeof a[0]){let b=new d.default.Pool({connectionString:a[0]});return m(b,a[1])}if((0,j.isConfig)(a[0])){let{connection:b,client:c,...e}=a[0];if(c)return m(c,e);let f=new d.default.Pool("string"==typeof b?{connectionString:b}:b);return m(f,e)}return m(a[0],a[1])}(n||(n={})).mock=function(a){return m({},a)},a.s(["drizzle",()=>n]),c()}catch(a){c(a)}},!1),13148,a=>{"use strict";var b=a.i(51674),c=a.i(68540),d=a.i(57833),e=a.i(65105),f=a.i(18830),g=a.i(86096),h=a.i(13552),i=a.i(54801),j=a.i(99450),k=a.i(96178),l=a.i(97122),m=a.i(83217),n=a.i(63227),o=a.i(5302);class p{constructor(a,b){this.unique=a,this.name=b}static [n.entityKind]="PgIndexBuilderOn";on(...a){return new q(a.map(a=>{if((0,n.is)(a,b.SQL))return a;let c=new o.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),c}),this.unique,!1,this.name)}onOnly(...a){return new q(a.map(a=>{if((0,n.is)(a,b.SQL))return a;let c=new o.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,c}),this.unique,!0,this.name)}using(a,...c){return new q(c.map(a=>{if((0,n.is)(a,b.SQL))return a;let c=new o.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),c}),this.unique,!0,this.name,a)}}class q{static [n.entityKind]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new r(this.config,a)}}class r{static [n.entityKind]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}function s(a){return new p(!0,a)}let t=(0,k.pgEnum)("transaction_type",["Despesa","Receita"]),u=(0,k.pgEnum)("fix_var",["Fixo","Varivel"]),v=(0,k.pgEnum)("category_1",["Receitas","Moradia","Mercado","Compras Online","Transporte","Sade","Lazer","Viagem","Roupas","Tecnologia","Alimentao","Energia","Internet","Educao","Presentes","Streaming","Academia","Investimentos","Outros","Interno","Assinaturas","Compras","Doaes","Esportes","Finanas","Frias","Mobilidade","Pets","Telefone","Trabalho","Transferncias","Vendas"]),w=(0,k.pgEnum)("upload_status",["processing","ready","duplicate","error"]),x=(0,k.pgEnum)("account_type",["credit_card","debit_card","bank_account","cash"]),y=(0,k.pgEnum)("transaction_source",["Sparkasse","Amex","M&M"]),z=(0,k.pgEnum)("transaction_status",["FINAL","OPEN"]),A=(0,k.pgEnum)("transaction_classified_by",["AUTO_KEYWORDS","MANUAL","AI_SUGGESTION"]),B=(0,k.pgEnum)("ingestion_source_type",["csv","screenshot"]),C=(0,k.pgEnum)("ingestion_batch_status",["processing","preview","committed","rolled_back","error"]),D=(0,d.pgTable)("users",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),username:(0,e.text)("username").notNull().unique(),passwordHash:(0,e.text)("password_hash"),email:(0,e.text)("email").unique(),googleId:(0,e.text)("google_id").unique(),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),E=(0,d.pgTable)("settings",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().unique().references(()=>D.id),autoConfirmHighConfidence:(0,h.boolean)("auto_confirm_high_confidence").notNull().default(!1),confidenceThreshold:(0,g.integer)("confidence_threshold").notNull().default(80),language:(0,e.text)("language").notNull().default("pt-BR"),currency:(0,e.text)("currency").notNull().default("EUR"),fiscalRegion:(0,e.text)("fiscal_region").notNull().default("Portugal/PT"),notifyImportStatus:(0,h.boolean)("notify_import_status").notNull().default(!0),notifyReviewQueue:(0,h.boolean)("notify_review_queue").notNull().default(!0),notifyMonthlyReport:(0,h.boolean)("notify_monthly_report").notNull().default(!0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),F=(0,c.relations)(E,({one:a})=>({user:a(D,{fields:[E.userId],references:[D.id]})})),G=(0,d.pgTable)("accounts",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),name:(0,e.text)("name").notNull(),type:x("type").notNull(),accountNumber:(0,e.text)("account_number"),icon:(0,e.text)("icon").default("credit-card"),color:(0,e.text)("color").default("#6366f1"),isActive:(0,h.boolean)("is_active").notNull().default(!0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),H=(0,c.relations)(G,({one:a})=>({user:a(D,{fields:[G.userId],references:[D.id]})})),I=(0,d.pgTable)("oauth_accounts",{userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),type:(0,e.text)("type").$type().notNull(),provider:(0,e.text)("provider").notNull(),providerAccountId:(0,e.text)("provider_account_id").notNull(),refresh_token:(0,e.text)("refresh_token"),access_token:(0,e.text)("access_token"),expires_at:(0,g.integer)("expires_at"),token_type:(0,e.text)("token_type"),scope:(0,e.text)("scope"),id_token:(0,e.text)("id_token"),session_state:(0,e.text)("session_state")},a=>({compoundKey:s("oauth_accounts_provider_provider_account_id_idx").on(a.provider,a.providerAccountId)})),J=(0,d.pgTable)("sessions",{sessionToken:(0,e.text)("session_token").primaryKey(),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),expires:(0,j.timestamp)("expires",{mode:"date"}).notNull()}),K=(0,d.pgTable)("verification_tokens",{identifier:(0,e.text)("identifier").notNull(),token:(0,e.text)("token").notNull(),expires:(0,j.timestamp)("expires",{mode:"date"}).notNull()},a=>({compositePk:s("verification_tokens_identifier_token_idx").on(a.identifier,a.token)})),L=(0,d.pgTable)("authenticators",{credentialID:(0,e.text)("credential_id").notNull().unique(),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),providerAccountId:(0,e.text)("provider_account_id").notNull(),credentialPublicKey:(0,e.text)("credential_public_key").notNull(),counter:(0,g.integer)("counter").notNull(),credentialDeviceType:(0,e.text)("credential_device_type").notNull(),credentialBackedUp:(0,h.boolean)("credential_backed_up").notNull(),transports:(0,e.text)("transports")},a=>({compositePK:s("authenticators_user_id_credential_id_idx").on(a.userId,a.credentialID)})),M=(0,d.pgTable)("ingestion_batches",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),sourceType:B("source_type").notNull(),status:C("status").notNull().default("processing"),filename:(0,e.text)("filename"),diagnosticsJson:(0,m.jsonb)("diagnostics_json"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),N=(0,c.relations)(M,({one:a,many:b})=>({user:a(D,{fields:[M.userId],references:[D.id]}),items:b(O)})),O=(0,d.pgTable)("ingestion_items",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),batchId:(0,f.varchar)("batch_id").notNull().references(()=>M.id,{onDelete:"cascade"}),rawPayload:(0,m.jsonb)("raw_payload").notNull(),parsedPayload:(0,m.jsonb)("parsed_payload"),itemFingerprint:(0,e.text)("item_fingerprint").notNull(),status:(0,e.text)("status").notNull().default("pending"),source:(0,e.text)("source"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()},a=>({fingerprintIdx:new p(!1,"ingestion_items_fingerprint_idx").on(a.itemFingerprint)})),P=(0,c.relations)(O,({one:a})=>({batch:a(M,{fields:[O.batchId],references:[M.id]})})),Q=(0,d.pgTable)("attachments",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),batchId:(0,f.varchar)("batch_id").references(()=>M.id),storageKey:(0,e.text)("storage_key").notNull(),mimeType:(0,e.text)("mime_type").notNull(),sizeBytes:(0,g.integer)("size_bytes").notNull(),ocrStatus:(0,e.text)("ocr_status").default("pending"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),R=(0,d.pgTable)("ocr_extractions",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),attachmentId:(0,f.varchar)("attachment_id").notNull().references(()=>Q.id,{onDelete:"cascade"}),textRaw:(0,e.text)("text_raw"),blocksJson:(0,m.jsonb)("blocks_json"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),S=(0,d.pgTable)("transaction_evidence_link",{transactionId:(0,f.varchar)("transaction_id").notNull().references(()=>$.id,{onDelete:"cascade"}),ingestionItemId:(0,f.varchar)("ingestion_item_id").notNull().references(()=>O.id,{onDelete:"cascade"}),matchConfidence:(0,g.integer)("match_confidence"),isPrimary:(0,h.boolean)("is_primary").notNull().default(!0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()},a=>({pk:s("transaction_evidence_link_pk").on(a.transactionId,a.ingestionItemId)})),T=(0,d.pgTable)("rules",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").references(()=>D.id),name:(0,e.text)("name"),keywords:(0,e.text)("keywords"),type:t("type"),fixVar:u("fix_var"),category1:v("category_1"),category2:(0,e.text)("category_2"),category3:(0,e.text)("category_3"),priority:(0,g.integer)("priority").notNull().default(500),strict:(0,h.boolean)("strict").notNull().default(!1),isSystem:(0,h.boolean)("is_system").notNull().default(!1),leafId:(0,f.varchar)("leaf_id"),keyWords:(0,e.text)("key_words"),keyWordsNegative:(0,e.text)("key_words_negative"),active:(0,h.boolean)("active").notNull().default(!0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),U=(0,c.relations)(T,({one:a})=>({user:a(D,{fields:[T.userId],references:[D.id]})})),V=(0,d.pgTable)("taxonomy_level_1",{level1Id:(0,f.varchar)("level_1_id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),nivel1Pt:(0,e.text)("nivel_1_pt").notNull(),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),W=(0,d.pgTable)("taxonomy_level_2",{level2Id:(0,f.varchar)("level_2_id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),level1Id:(0,f.varchar)("level_1_id").notNull().references(()=>V.level1Id,{onDelete:"cascade"}),nivel2Pt:(0,e.text)("nivel_2_pt").notNull(),recorrenteDefault:(0,e.text)("recorrente_default"),fixoVariavelDefault:(0,e.text)("fixo_variavel_default"),receitaDespesaDefault:(0,e.text)("receita_despesa_default"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),X=(0,d.pgTable)("taxonomy_leaf",{leafId:(0,f.varchar)("leaf_id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),level2Id:(0,f.varchar)("level_2_id").notNull().references(()=>W.level2Id,{onDelete:"cascade"}),nivel3Pt:(0,e.text)("nivel_3_pt").notNull(),recorrenteDefault:(0,e.text)("recorrente_default"),fixoVariavelDefault:(0,e.text)("fixo_variavel_default"),receitaDespesaDefault:(0,e.text)("receita_despesa_default"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),Y=(0,d.pgTable)("app_category",{appCatId:(0,f.varchar)("app_cat_id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),name:(0,e.text)("name").notNull(),active:(0,h.boolean)("active").notNull().default(!0),versionId:(0,f.varchar)("version_id").notNull().default(b.sql`gen_random_uuid()`),orderIndex:(0,g.integer)("order_index").notNull().default(0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,j.timestamp)("updated_at").notNull().defaultNow()}),Z=(0,d.pgTable)("app_category_leaf",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),appCatId:(0,f.varchar)("app_cat_id").notNull().references(()=>Y.appCatId,{onDelete:"cascade"}),leafId:(0,f.varchar)("leaf_id").notNull().references(()=>X.leafId,{onDelete:"cascade"}),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),$=(0,d.pgTable)("transactions",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),paymentDate:(0,j.timestamp)("payment_date").notNull(),bookingDate:(0,l.date)("booking_date"),importedAt:(0,j.timestamp)("imported_at").notNull().defaultNow(),accountSource:(0,e.text)("account_source").notNull().default("M&M"),accountId:(0,f.varchar)("account_id").references(()=>G.id),descRaw:(0,e.text)("desc_raw").notNull(),descNorm:(0,e.text)("desc_norm").notNull(),rawDescription:(0,e.text)("raw_description"),normalizedDescription:(0,e.text)("normalized_description"),amount:(0,i.real)("amount").notNull(),currency:(0,e.text)("currency").notNull().default("EUR"),foreignAmount:(0,i.real)("foreign_amount"),foreignCurrency:(0,e.text)("foreign_currency"),exchangeRate:(0,i.real)("exchange_rate"),key:(0,e.text)("key").notNull(),source:y("source"),keyDesc:(0,e.text)("key_desc"),simpleDesc:(0,e.text)("simple_desc"),aliasDesc:(0,e.text)("alias_desc"),leafId:(0,f.varchar)("leaf_id"),classifiedBy:A("classified_by"),status:z("status"),recurringFlag:(0,h.boolean)("recurring_flag").notNull().default(!1),recurringGroupId:(0,f.varchar)("recurring_group_id"),recurringConfidence:(0,i.real)("recurring_confidence"),recurringDayOfMonth:(0,g.integer)("recurring_day_of_month"),recurringDayWindow:(0,g.integer)("recurring_day_window"),type:t("type"),fixVar:u("fix_var"),category1:v("category_1"),category2:(0,e.text)("category_2"),category3:(0,e.text)("category_3"),manualOverride:(0,h.boolean)("manual_override").notNull().default(!1),internalTransfer:(0,h.boolean)("internal_transfer").notNull().default(!1),excludeFromBudget:(0,h.boolean)("exclude_from_budget").notNull().default(!1),needsReview:(0,h.boolean)("needs_review").notNull().default(!0),ruleIdApplied:(0,f.varchar)("rule_id_applied").references(()=>T.id),uploadId:(0,f.varchar)("upload_id"),confidence:(0,g.integer)("confidence"),suggestedKeyword:(0,e.text)("suggested_keyword")},a=>({uniqueKeyPerUser:s("transactions_unique_key_per_user").on(a.userId,a.key)})),_=(0,c.relations)($,({one:a,many:b})=>({user:a(D,{fields:[$.userId],references:[D.id]}),rule:a(T,{fields:[$.ruleIdApplied],references:[T.id]}),account:a(G,{fields:[$.accountId],references:[G.id]}),leaf:a(X,{fields:[$.leafId],references:[X.leafId]}),evidenceLinks:b(S)})),aa=(0,d.pgTable)("uploads",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),filename:(0,e.text)("filename").notNull(),status:w("status").notNull().default("processing"),rowsTotal:(0,g.integer)("rows_total").notNull().default(0),rowsImported:(0,g.integer)("rows_imported").notNull().default(0),monthAffected:(0,e.text)("month_affected"),errorMessage:(0,e.text)("error_message"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),ab=(0,c.relations)(S,({one:a})=>({transaction:a($,{fields:[S.transactionId],references:[$.id]}),ingestionItem:a(O,{fields:[S.ingestionItemId],references:[O.id]})})),ac=(0,d.pgTable)("budgets",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),month:(0,e.text)("month").notNull(),category1:v("category_1").notNull(),amount:(0,i.real)("amount").notNull()}),ad=(0,d.pgTable)("calendar_events",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),name:(0,e.text)("name").notNull(),amount:(0,i.real)("amount").notNull(),category1:v("category_1").notNull(),category2:(0,e.text)("category_2"),recurrence:(0,e.text)("recurrence").notNull().default("none"),nextDueDate:(0,j.timestamp)("next_due_date").notNull(),accountId:(0,f.varchar)("account_id").references(()=>G.id),isActive:(0,h.boolean)("is_active").notNull().default(!0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),ae=(0,d.pgTable)("goals",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),month:(0,e.text)("month").notNull(),estimatedIncome:(0,i.real)("estimated_income").notNull().default(0),totalPlanned:(0,i.real)("total_planned").notNull().default(0),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()}),af=(0,d.pgTable)("category_goals",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),goalId:(0,f.varchar)("goal_id").notNull().references(()=>ae.id),category1:v("category_1").notNull(),targetAmount:(0,i.real)("target_amount").notNull()}),ag=(0,d.pgTable)("rituals",{id:(0,f.varchar)("id").primaryKey().default(b.sql`gen_random_uuid()`),userId:(0,f.varchar)("user_id").notNull().references(()=>D.id),type:(0,e.text)("type").notNull(),period:(0,e.text)("period").notNull(),completedAt:(0,j.timestamp)("completed_at"),notes:(0,e.text)("notes"),createdAt:(0,j.timestamp)("created_at").notNull().defaultNow()});a.s(["accountTypeEnum",0,x,"accounts",0,G,"accountsRelations",0,H,"appCategory",0,Y,"appCategoryLeaf",0,Z,"attachments",0,Q,"authenticators",0,L,"budgets",0,ac,"calendarEvents",0,ad,"category1Enum",0,v,"categoryGoals",0,af,"fixVarEnum",0,u,"goals",0,ae,"ingestionBatchStatusEnum",0,C,"ingestionBatches",0,M,"ingestionBatchesRelations",0,N,"ingestionItems",0,O,"ingestionItemsRelations",0,P,"ingestionSourceTypeEnum",0,B,"oauthAccounts",0,I,"ocrExtractions",0,R,"rituals",0,ag,"rules",0,T,"rulesRelations",0,U,"sessions",0,J,"settings",0,E,"settingsRelations",0,F,"taxonomyLeaf",0,X,"taxonomyLevel1",0,V,"taxonomyLevel2",0,W,"transactionClassifiedByEnum",0,A,"transactionEvidenceLink",0,S,"transactionEvidenceLinkRelations",0,ab,"transactionSourceEnum",0,y,"transactionStatusEnum",0,z,"transactionTypeEnum",0,t,"transactions",0,$,"transactionsRelations",0,_,"uploadStatusEnum",0,w,"uploads",0,aa,"users",0,D,"verificationTokens",0,K],13148)},22028,a=>a.a(async(b,c)=>{try{var d=a.i(67189),e=a.i(23862),f=a.i(13148),g=b([d,e]);[d,e]=g.then?(await g)():g;let h=new e.default.Pool({connectionString:process.env.DATABASE_URL}),i=(0,d.drizzle)(h,{schema:f});a.s(["db",0,i]),c()}catch(a){c(a)}},!1),72849,a=>{"use strict";var b=a.i(54799),c=null;function d(a,d){if("number"!=typeof(a=a||p))throw Error("Illegal arguments: "+typeof a+", "+typeof d);a<4?a=4:a>31&&(a=31);var e=[];return e.push("$2b$"),a<10&&e.push("0"),e.push(a.toString()),e.push("$"),e.push(m(function(a){try{return crypto.getRandomValues(new Uint8Array(a))}catch{}try{return b.default.randomBytes(a)}catch{}if(!c)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return c(a)}(o),o)),e.join("")}function e(a,b,c){if("function"==typeof b&&(c=b,b=void 0),"function"==typeof a&&(c=a,a=void 0),void 0===a)a=p;else if("number"!=typeof a)throw Error("illegal arguments: "+typeof a);function e(b){i(function(){try{b(null,d(a))}catch(a){b(a)}})}if(!c)return new Promise(function(a,b){e(function(c,d){c?b(c):a(d)})});if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);e(c)}function f(a,b){if(void 0===b&&(b=p),"number"==typeof b&&(b=d(b)),"string"!=typeof a||"string"!=typeof b)throw Error("Illegal arguments: "+typeof a+", "+typeof b);return x(a,b)}function g(a,b,c,d){function f(c){"string"==typeof a&&"number"==typeof b?e(b,function(b,e){x(a,e,c,d)}):"string"==typeof a&&"string"==typeof b?x(a,b,c,d):i(c.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof b)))}if(!c)return new Promise(function(a,b){f(function(c,d){c?b(c):a(d)})});if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);f(c)}function h(a,b){for(var c=a.length^b.length,d=0;d<a.length;++d)c|=a.charCodeAt(d)^b.charCodeAt(d);return 0===c}var i="function"==typeof setImmediate?setImmediate:"object"==typeof scheduler&&"function"==typeof scheduler.postTask?scheduler.postTask.bind(scheduler):setTimeout;function j(a){for(var b=0,c=0,d=0;d<a.length;++d)(c=a.charCodeAt(d))<128?b+=1:c<2048?b+=2:(64512&c)==55296&&(64512&a.charCodeAt(d+1))==56320?(++d,b+=4):b+=3;return b}var k="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function m(a,b){var c,d,e=0,f=[];if(b<=0||b>a.length)throw Error("Illegal len: "+b);for(;e<b;){if(c=255&a[e++],f.push(k[c>>2&63]),c=(3&c)<<4,e>=b||(c|=(d=255&a[e++])>>4&15,f.push(k[63&c]),c=(15&d)<<2,e>=b)){f.push(k[63&c]);break}c|=(d=255&a[e++])>>6&3,f.push(k[63&c]),f.push(k[63&d])}return f.join("")}function n(a,b){var c,d,e,f,g,h=0,i=a.length,j=0,k=[];if(b<=0)throw Error("Illegal len: "+b);for(;h<i-1&&j<b&&(c=(g=a.charCodeAt(h++))<l.length?l[g]:-1,d=(g=a.charCodeAt(h++))<l.length?l[g]:-1,-1!=c&&-1!=d)&&(f=c<<2>>>0|(48&d)>>4,k.push(String.fromCharCode(f)),!(++j>=b||h>=i||-1==(e=(g=a.charCodeAt(h++))<l.length?l[g]:-1)||(f=(15&d)<<4>>>0|(60&e)>>2,k.push(String.fromCharCode(f)),++j>=b||h>=i)));){;f=(3&e)<<6>>>0|((g=a.charCodeAt(h++))<l.length?l[g]:-1),k.push(String.fromCharCode(f)),++j}var m=[];for(h=0;h<j;h++)m.push(k[h].charCodeAt(0));return m}var o=16,p=10,q=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],r=[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a,0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7,0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0,0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6],s=[0x4f727068,0x65616e42,0x65686f6c,0x64657253,0x63727944,0x6f756274];function t(a,b,c,d){var e=a[b],f=a[b+1];return e^=c[0],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[1],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[2],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[3],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[4],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[5],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[6],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[7],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[8],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[9],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[10],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[11],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[12],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[13],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[14],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[15],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[16],a[b]=f^c[17],a[b+1]=e,a}function u(a,b){for(var c=0,d=0;c<4;++c)d=d<<8|255&a[b],b=(b+1)%a.length;return{key:d,offp:b}}function v(a,b,c){for(var d,e=0,f=[0,0],g=b.length,h=c.length,i=0;i<g;i++)e=(d=u(a,e)).offp,b[i]=b[i]^d.key;for(i=0;i<g;i+=2)f=t(f,0,b,c),b[i]=f[0],b[i+1]=f[1];for(i=0;i<h;i+=2)f=t(f,0,b,c),c[i]=f[0],c[i+1]=f[1]}function w(a,b,c,d,e){var f,g,h=s.slice(),j=h.length;if(c<4||c>31){if(g=Error("Illegal number of rounds (4-31): "+c),d)return void i(d.bind(this,g));throw g}if(b.length!==o){if(g=Error("Illegal salt length: "+b.length+" != "+o),d)return void i(d.bind(this,g));throw g}c=1<<c>>>0;var k,l,m,n=0;function p(){if(e&&e(n/c),n<c)for(var f=Date.now();n<c&&(n+=1,v(a,k,l),v(b,k,l),!(Date.now()-f>100)););else{for(n=0;n<64;n++)for(m=0;m<j>>1;m++)t(h,m<<1,k,l);var g=[];for(n=0;n<j;n++)g.push((h[n]>>24&255)>>>0),g.push((h[n]>>16&255)>>>0),g.push((h[n]>>8&255)>>>0),g.push((255&h[n])>>>0);return d?void d(null,g):g}d&&i(p)}if("function"==typeof Int32Array?(k=new Int32Array(q),l=new Int32Array(r)):(k=q.slice(),l=r.slice()),!function(a,b,c,d){for(var e,f=0,g=[0,0],h=c.length,i=d.length,j=0;j<h;j++)f=(e=u(b,f)).offp,c[j]=c[j]^e.key;for(j=0,f=0;j<h;j+=2)f=(e=u(a,f)).offp,g[0]^=e.key,f=(e=u(a,f)).offp,g[1]^=e.key,g=t(g,0,c,d),c[j]=g[0],c[j+1]=g[1];for(j=0;j<i;j+=2)f=(e=u(a,f)).offp,g[0]^=e.key,f=(e=u(a,f)).offp,g[1]^=e.key,g=t(g,0,c,d),d[j]=g[0],d[j+1]=g[1]}(b,a,k,l),void 0!==d)p();else for(;;)if(void 0!==(f=p()))return f||[]}function x(a,b,c,d){if("string"!=typeof a||"string"!=typeof b){if(e=Error("Invalid string / salt: Not a string"),c)return void i(c.bind(this,e));throw e}if("$"!==b.charAt(0)||"2"!==b.charAt(1)){if(e=Error("Invalid salt version: "+b.substring(0,2)),c)return void i(c.bind(this,e));throw e}if("$"===b.charAt(2))f="\0",g=3;else{if("a"!==(f=b.charAt(2))&&"b"!==f&&"y"!==f||"$"!==b.charAt(3)){if(e=Error("Invalid salt revision: "+b.substring(2,4)),c)return void i(c.bind(this,e));throw e}g=4}if(b.charAt(g+2)>"$"){if(e=Error("Missing salt rounds"),c)return void i(c.bind(this,e));throw e}var e,f,g,h=10*parseInt(b.substring(g,g+1),10)+parseInt(b.substring(g+1,g+2),10),k=b.substring(g+3,g+25),l=function(a){for(var b,c,d=0,e=Array(j(a)),f=0,g=a.length;f<g;++f)(b=a.charCodeAt(f))<128?e[d++]=b:(b<2048?e[d++]=b>>6|192:((64512&b)==55296&&(64512&(c=a.charCodeAt(f+1)))==56320?(b=65536+((1023&b)<<10)+(1023&c),++f,e[d++]=b>>18|240,e[d++]=b>>12&63|128):e[d++]=b>>12|224,e[d++]=b>>6&63|128),e[d++]=63&b|128);return e}(a+=f>="a"?"\0":""),p=n(k,o);function q(a){var b=[];return b.push("$2"),f>="a"&&b.push(f),b.push("$"),h<10&&b.push("0"),b.push(h.toString()),b.push("$"),b.push(m(p,p.length)),b.push(m(a,4*s.length-1)),b.join("")}if(void 0===c)return q(w(l,p,h));w(l,p,h,function(a,b){a?c(a,null):c(null,q(b))},d)}a.s(["default",0,{setRandomFallback:function(a){c=a},genSaltSync:d,genSalt:e,hashSync:f,hash:g,compareSync:function(a,b){if("string"!=typeof a||"string"!=typeof b)throw Error("Illegal arguments: "+typeof a+", "+typeof b);return 60===b.length&&h(f(a,b.substring(0,b.length-31)),b)},compare:function(a,b,c,d){function e(c){"string"!=typeof a||"string"!=typeof b?i(c.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof b))):60!==b.length?i(c.bind(this,null,!1)):g(a,b.substring(0,29),function(a,d){a?c(a):c(null,h(d,b))},d)}if(!c)return new Promise(function(a,b){e(function(c,d){c?b(c):a(d)})});if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);e(c)},getRounds:function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);return parseInt(a.split("$")[2],10)},getSalt:function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);if(60!==a.length)throw Error("Illegal hash length: "+a.length+" != 60");return a.substring(0,29)},truncates:function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);return j(a)>72},encodeBase64:function(a,b){return m(a,b)},decodeBase64:function(a,b){return n(a,b)}}])},83111,a=>{"use strict";let b;a.s([],91791),a.i(91791),(bh=bk||(bk={})).assertEqual=a=>{},bh.assertIs=function(a){},bh.assertNever=function(a){throw Error()},bh.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},bh.getValidEnumValues=a=>{let b=bh.objectKeys(a).filter(b=>"number"!=typeof a[a[b]]),c={};for(let d of b)c[d]=a[d];return bh.objectValues(c)},bh.objectValues=a=>bh.objectKeys(a).map(function(b){return a[b]}),bh.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},bh.find=(a,b)=>{for(let c of a)if(b(c))return c},bh.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,bh.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},bh.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b,(bl||(bl={})).mergeShapes=(a,b)=>({...a,...b});let c=bk.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),d=a=>{switch(typeof a){case"undefined":return c.undefined;case"string":return c.string;case"number":return Number.isNaN(a)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":if(Array.isArray(a))return c.array;if(null===a)return c.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return c.promise;if("undefined"!=typeof Map&&a instanceof Map)return c.map;if("undefined"!=typeof Set&&a instanceof Set)return c.set;if("undefined"!=typeof Date&&a instanceof Date)return c.date;return c.object;default:return c.unknown}};a.s(["ZodParsedType",0,c,"getParsedType",0,d,"objectUtil",()=>bl,"util",()=>bk],80598);let e=bk.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),f=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:");class g extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof g))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,bk.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}g.create=a=>new g(a),a.s(["ZodError",()=>g,"ZodIssueCode",0,e,"quotelessJson",0,f],40366);let h=(a,b)=>{let d;switch(a.code){case e.invalid_type:d=a.received===c.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case e.invalid_literal:d=`Invalid literal value, expected ${JSON.stringify(a.expected,bk.jsonStringifyReplacer)}`;break;case e.unrecognized_keys:d=`Unrecognized key(s) in object: ${bk.joinValues(a.keys,", ")}`;break;case e.invalid_union:d="Invalid input";break;case e.invalid_union_discriminator:d=`Invalid discriminator value. Expected ${bk.joinValues(a.options)}`;break;case e.invalid_enum_value:d=`Invalid enum value. Expected ${bk.joinValues(a.options)}, received '${a.received}'`;break;case e.invalid_arguments:d="Invalid function arguments";break;case e.invalid_return_type:d="Invalid function return type";break;case e.invalid_date:d="Invalid date";break;case e.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(d=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(d=`${d} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?d=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?d=`Invalid input: must end with "${a.validation.endsWith}"`:bk.assertNever(a.validation):d="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case e.too_small:d="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case e.too_big:d="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case e.custom:d="Invalid input";break;case e.invalid_intersection_types:d="Intersection results could not be merged";break;case e.not_multiple_of:d=`Number must be a multiple of ${a.multipleOf}`;break;case e.not_finite:d="Number must be finite";break;default:d=b.defaultError,bk.assertNever(a)}return{message:d}},i=h;function j(a){i=a}function k(){return i}a.s(["getErrorMap",()=>k,"setErrorMap",()=>j],19115),a.i(19115),a.s(["defaultErrorMap",0,h,"getErrorMap",()=>k,"setErrorMap",()=>j],11150),a.i(11150);let l=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}},m=[];function n(a,b){let c=i,d=l({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,c,c===h?void 0:h].filter(a=>!!a)});a.common.issues.push(d)}class o{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return p;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return o.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return p;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let p=Object.freeze({status:"aborted"}),q=a=>({status:"dirty",value:a}),r=a=>({status:"valid",value:a}),s=a=>"aborted"===a.status,t=a=>"dirty"===a.status,u=a=>"valid"===a.status,v=a=>"undefined"!=typeof Promise&&a instanceof Promise;a.s(["DIRTY",0,q,"EMPTY_PATH",0,m,"INVALID",0,p,"OK",0,r,"ParseStatus",()=>o,"addIssueToContext",()=>n,"isAborted",0,s,"isAsync",0,v,"isDirty",0,t,"isValid",0,u,"makeIssue",0,l],14810),a.i(14810),a.s([],97100),a.i(97100),a.i(80598),(bi=bm||(bm={})).errToObj=a=>"string"==typeof a?{message:a}:a||{},bi.toString=a=>"string"==typeof a?a:a?.message;class w{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let x=(a,b)=>{if(u(b))return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new g(a.common.issues);return this._error=b,this._error}}};function y(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class z{get description(){return this._def.description}_getType(a){return d(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:d(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new o,ctx:{common:a.parent.common,data:a.data,parsedType:d(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(v(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:d(a)},e=this._parseSync({data:a,path:c.path,parent:c});return x(c,e)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:d(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return u(c)?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>u(a)?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:d(a)},e=this._parse({data:a,path:c.path,parent:c});return x(c,await (v(e)?e:Promise.resolve(e)))}refine(a,b){return this._refinement((c,d)=>{let f=a(c),g=()=>d.addIssue({code:e.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&f instanceof Promise?f.then(a=>!!a||(g(),!1)):!!f||(g(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new at({schema:this,typeName:bn.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return au.create(this,this._def)}nullable(){return av.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ac.create(this)}promise(){return as.create(this,this._def)}or(a){return ae.create([this,a],this._def)}and(a){return ah.create(this,a,this._def)}transform(a){return new at({...y(this._def),schema:this,typeName:bn.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new aw({...y(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:bn.ZodDefault})}brand(){return new aA({typeName:bn.ZodBranded,type:this,...y(this._def)})}catch(a){return new ax({...y(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:bn.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return aB.create(this,a)}readonly(){return aC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let A=/^c[^\s-]{8,}$/i,B=/^[0-9a-z]+$/,C=/^[0-9A-HJKMNP-TV-Z]{26}$/i,D=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,E=/^[a-z0-9_-]{21}$/i,F=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,G=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,H=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,J=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,L=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,N=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,O="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",P=RegExp(`^${O}$`);function Q(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}function R(a){let b=`${O}T${Q(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)}class S extends z{_parse(a){var d,f,g,h;let i;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==c.string){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.string,received:b.parsedType}),p}let j=new o;for(let c of this._def.checks)if("min"===c.kind)a.data.length<c.value&&(n(i=this._getOrReturnCtx(a,i),{code:e.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),j.dirty());else if("max"===c.kind)a.data.length>c.value&&(n(i=this._getOrReturnCtx(a,i),{code:e.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),j.dirty());else if("length"===c.kind){let b=a.data.length>c.value,d=a.data.length<c.value;(b||d)&&(i=this._getOrReturnCtx(a,i),b?n(i,{code:e.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):d&&n(i,{code:e.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),j.dirty())}else if("email"===c.kind)H.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"email",code:e.invalid_string,message:c.message}),j.dirty());else if("emoji"===c.kind)b||(b=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"emoji",code:e.invalid_string,message:c.message}),j.dirty());else if("uuid"===c.kind)D.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"uuid",code:e.invalid_string,message:c.message}),j.dirty());else if("nanoid"===c.kind)E.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"nanoid",code:e.invalid_string,message:c.message}),j.dirty());else if("cuid"===c.kind)A.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"cuid",code:e.invalid_string,message:c.message}),j.dirty());else if("cuid2"===c.kind)B.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"cuid2",code:e.invalid_string,message:c.message}),j.dirty());else if("ulid"===c.kind)C.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"ulid",code:e.invalid_string,message:c.message}),j.dirty());else if("url"===c.kind)try{new URL(a.data)}catch{n(i=this._getOrReturnCtx(a,i),{validation:"url",code:e.invalid_string,message:c.message}),j.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"regex",code:e.invalid_string,message:c.message}),j.dirty())):"trim"===c.kind?a.data=a.data.trim():"includes"===c.kind?a.data.includes(c.value,c.position)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),j.dirty()):"toLowerCase"===c.kind?a.data=a.data.toLowerCase():"toUpperCase"===c.kind?a.data=a.data.toUpperCase():"startsWith"===c.kind?a.data.startsWith(c.value)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:{startsWith:c.value},message:c.message}),j.dirty()):"endsWith"===c.kind?a.data.endsWith(c.value)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:{endsWith:c.value},message:c.message}),j.dirty()):"datetime"===c.kind?R(c).test(a.data)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:"datetime",message:c.message}),j.dirty()):"date"===c.kind?P.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:"date",message:c.message}),j.dirty()):"time"===c.kind?RegExp(`^${Q(c)}$`).test(a.data)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:"time",message:c.message}),j.dirty()):"duration"===c.kind?G.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"duration",code:e.invalid_string,message:c.message}),j.dirty()):"ip"===c.kind?(d=a.data,!(("v4"===(f=c.version)||!f)&&I.test(d)||("v6"===f||!f)&&K.test(d))&&1&&(n(i=this._getOrReturnCtx(a,i),{validation:"ip",code:e.invalid_string,message:c.message}),j.dirty())):"jwt"===c.kind?!function(a,b){if(!F.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,c.alg)&&(n(i=this._getOrReturnCtx(a,i),{validation:"jwt",code:e.invalid_string,message:c.message}),j.dirty()):"cidr"===c.kind?(g=a.data,!(("v4"===(h=c.version)||!h)&&J.test(g)||("v6"===h||!h)&&L.test(g))&&1&&(n(i=this._getOrReturnCtx(a,i),{validation:"cidr",code:e.invalid_string,message:c.message}),j.dirty())):"base64"===c.kind?M.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"base64",code:e.invalid_string,message:c.message}),j.dirty()):"base64url"===c.kind?N.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"base64url",code:e.invalid_string,message:c.message}),j.dirty()):bk.assertNever(c);return{status:j.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:e.invalid_string,...bm.errToObj(c)})}_addCheck(a){return new S({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...bm.errToObj(a)})}url(a){return this._addCheck({kind:"url",...bm.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...bm.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...bm.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...bm.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...bm.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...bm.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...bm.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...bm.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...bm.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...bm.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...bm.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...bm.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...bm.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...bm.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...bm.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...bm.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...bm.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...bm.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...bm.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...bm.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...bm.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...bm.errToObj(b)})}nonempty(a){return this.min(1,bm.errToObj(a))}trim(){return new S({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new S({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new S({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}S.create=a=>new S({checks:[],typeName:bn.ZodString,coerce:a?.coerce??!1,...y(a)});class T extends z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==c.number){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.number,received:b.parsedType}),p}let d=new o;for(let c of this._def.checks)"int"===c.kind?bk.isInteger(a.data)||(n(b=this._getOrReturnCtx(a,b),{code:e.invalid_type,expected:"integer",received:"float",message:c.message}),d.dirty()):"min"===c.kind?(c.inclusive?a.data<c.value:a.data<=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),d.dirty()):"max"===c.kind?(c.inclusive?a.data>c.value:a.data>=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),d.dirty()):"multipleOf"===c.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.not_multiple_of,multipleOf:c.value,message:c.message}),d.dirty()):"finite"===c.kind?Number.isFinite(a.data)||(n(b=this._getOrReturnCtx(a,b),{code:e.not_finite,message:c.message}),d.dirty()):bk.assertNever(c);return{status:d.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,bm.toString(b))}gt(a,b){return this.setLimit("min",a,!1,bm.toString(b))}lte(a,b){return this.setLimit("max",a,!0,bm.toString(b))}lt(a,b){return this.setLimit("max",a,!1,bm.toString(b))}setLimit(a,b,c,d){return new T({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:bm.toString(d)}]})}_addCheck(a){return new T({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:bm.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:bm.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:bm.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:bm.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:bm.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:bm.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:bm.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:bm.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:bm.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&bk.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}T.create=a=>new T({checks:[],typeName:bn.ZodNumber,coerce:a?.coerce||!1,...y(a)});class U extends z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==c.bigint)return this._getInvalidInput(a);let d=new o;for(let c of this._def.checks)"min"===c.kind?(c.inclusive?a.data<c.value:a.data<=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),d.dirty()):"max"===c.kind?(c.inclusive?a.data>c.value:a.data>=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),d.dirty()):"multipleOf"===c.kind?a.data%c.value!==BigInt(0)&&(n(b=this._getOrReturnCtx(a,b),{code:e.not_multiple_of,multipleOf:c.value,message:c.message}),d.dirty()):bk.assertNever(c);return{status:d.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.bigint,received:b.parsedType}),p}gte(a,b){return this.setLimit("min",a,!0,bm.toString(b))}gt(a,b){return this.setLimit("min",a,!1,bm.toString(b))}lte(a,b){return this.setLimit("max",a,!0,bm.toString(b))}lt(a,b){return this.setLimit("max",a,!1,bm.toString(b))}setLimit(a,b,c,d){return new U({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:bm.toString(d)}]})}_addCheck(a){return new U({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:bm.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:bm.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:bm.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:bm.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:bm.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}U.create=a=>new U({checks:[],typeName:bn.ZodBigInt,coerce:a?.coerce??!1,...y(a)});class V extends z{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==c.boolean){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.boolean,received:b.parsedType}),p}return r(a.data)}}V.create=a=>new V({typeName:bn.ZodBoolean,coerce:a?.coerce||!1,...y(a)});class W extends z{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==c.date){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.date,received:b.parsedType}),p}if(Number.isNaN(a.data.getTime()))return n(this._getOrReturnCtx(a),{code:e.invalid_date}),p;let d=new o;for(let c of this._def.checks)"min"===c.kind?a.data.getTime()<c.value&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),d.dirty()):"max"===c.kind?a.data.getTime()>c.value&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),d.dirty()):bk.assertNever(c);return{status:d.value,value:new Date(a.data.getTime())}}_addCheck(a){return new W({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:bm.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:bm.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}W.create=a=>new W({checks:[],coerce:a?.coerce||!1,typeName:bn.ZodDate,...y(a)});class X extends z{_parse(a){if(this._getType(a)!==c.symbol){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.symbol,received:b.parsedType}),p}return r(a.data)}}X.create=a=>new X({typeName:bn.ZodSymbol,...y(a)});class Y extends z{_parse(a){if(this._getType(a)!==c.undefined){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.undefined,received:b.parsedType}),p}return r(a.data)}}Y.create=a=>new Y({typeName:bn.ZodUndefined,...y(a)});class Z extends z{_parse(a){if(this._getType(a)!==c.null){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.null,received:b.parsedType}),p}return r(a.data)}}Z.create=a=>new Z({typeName:bn.ZodNull,...y(a)});class $ extends z{constructor(){super(...arguments),this._any=!0}_parse(a){return r(a.data)}}$.create=a=>new $({typeName:bn.ZodAny,...y(a)});class _ extends z{constructor(){super(...arguments),this._unknown=!0}_parse(a){return r(a.data)}}_.create=a=>new _({typeName:bn.ZodUnknown,...y(a)});class aa extends z{_parse(a){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.never,received:b.parsedType}),p}}aa.create=a=>new aa({typeName:bn.ZodNever,...y(a)});class ab extends z{_parse(a){if(this._getType(a)!==c.undefined){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.void,received:b.parsedType}),p}return r(a.data)}}ab.create=a=>new ab({typeName:bn.ZodVoid,...y(a)});class ac extends z{_parse(a){let{ctx:b,status:d}=this._processInputParams(a),f=this._def;if(b.parsedType!==c.array)return n(b,{code:e.invalid_type,expected:c.array,received:b.parsedType}),p;if(null!==f.exactLength){let a=b.data.length>f.exactLength.value,c=b.data.length<f.exactLength.value;(a||c)&&(n(b,{code:a?e.too_big:e.too_small,minimum:c?f.exactLength.value:void 0,maximum:a?f.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:f.exactLength.message}),d.dirty())}if(null!==f.minLength&&b.data.length<f.minLength.value&&(n(b,{code:e.too_small,minimum:f.minLength.value,type:"array",inclusive:!0,exact:!1,message:f.minLength.message}),d.dirty()),null!==f.maxLength&&b.data.length>f.maxLength.value&&(n(b,{code:e.too_big,maximum:f.maxLength.value,type:"array",inclusive:!0,exact:!1,message:f.maxLength.message}),d.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>f.type._parseAsync(new w(b,a,b.path,c)))).then(a=>o.mergeArray(d,a));let g=[...b.data].map((a,c)=>f.type._parseSync(new w(b,a,b.path,c)));return o.mergeArray(d,g)}get element(){return this._def.type}min(a,b){return new ac({...this._def,minLength:{value:a,message:bm.toString(b)}})}max(a,b){return new ac({...this._def,maxLength:{value:a,message:bm.toString(b)}})}length(a,b){return new ac({...this._def,exactLength:{value:a,message:bm.toString(b)}})}nonempty(a){return this.min(1,a)}}ac.create=(a,b)=>new ac({type:a,minLength:null,maxLength:null,exactLength:null,typeName:bn.ZodArray,...y(b)});class ad extends z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=bk.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==c.object){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.object,received:b.parsedType}),p}let{status:b,ctx:d}=this._processInputParams(a),{shape:f,keys:g}=this._getCached(),h=[];if(!(this._def.catchall instanceof aa&&"strip"===this._def.unknownKeys))for(let a in d.data)g.includes(a)||h.push(a);let i=[];for(let a of g){let b=f[a],c=d.data[a];i.push({key:{status:"valid",value:a},value:b._parse(new w(d,c,d.path,a)),alwaysSet:a in d.data})}if(this._def.catchall instanceof aa){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of h)i.push({key:{status:"valid",value:a},value:{status:"valid",value:d.data[a]}});else if("strict"===a)h.length>0&&(n(d,{code:e.unrecognized_keys,keys:h}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of h){let c=d.data[b];i.push({key:{status:"valid",value:b},value:a._parse(new w(d,c,d.path,b)),alwaysSet:b in d.data})}}return d.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of i){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>o.mergeObjectSync(b,a)):o.mergeObjectSync(b,i)}get shape(){return this._def.shape()}strict(a){return bm.errToObj,new ad({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:bm.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new ad({...this._def,unknownKeys:"strip"})}passthrough(){return new ad({...this._def,unknownKeys:"passthrough"})}extend(a){return new ad({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new ad({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:bn.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new ad({...this._def,catchall:a})}pick(a){let b={};for(let c of bk.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new ad({...this._def,shape:()=>b})}omit(a){let b={};for(let c of bk.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new ad({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof ad){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=au.create(a(e))}return new ad({...b._def,shape:()=>c})}if(b instanceof ac)return new ac({...b._def,type:a(b.element)});if(b instanceof au)return au.create(a(b.unwrap()));if(b instanceof av)return av.create(a(b.unwrap()));if(b instanceof ai)return ai.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of bk.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new ad({...this._def,shape:()=>b})}required(a){let b={};for(let c of bk.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof au;)a=a._def.innerType;b[c]=a}return new ad({...this._def,shape:()=>b})}keyof(){return ap(bk.objectKeys(this.shape))}}ad.create=(a,b)=>new ad({shape:()=>a,unknownKeys:"strip",catchall:aa.create(),typeName:bn.ZodObject,...y(b)}),ad.strictCreate=(a,b)=>new ad({shape:()=>a,unknownKeys:"strict",catchall:aa.create(),typeName:bn.ZodObject,...y(b)}),ad.lazycreate=(a,b)=>new ad({shape:a,unknownKeys:"strip",catchall:aa.create(),typeName:bn.ZodObject,...y(b)});class ae extends z{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new g(a.ctx.common.issues));return n(b,{code:e.invalid_union,unionErrors:c}),p});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let f=d.map(a=>new g(a));return n(b,{code:e.invalid_union,unionErrors:f}),p}}get options(){return this._def.options}}ae.create=(a,b)=>new ae({options:a,typeName:bn.ZodUnion,...y(b)});let af=a=>{if(a instanceof an)return af(a.schema);if(a instanceof at)return af(a.innerType());if(a instanceof ao)return[a.value];if(a instanceof aq)return a.options;if(a instanceof ar)return bk.objectValues(a.enum);else if(a instanceof aw)return af(a._def.innerType);else if(a instanceof Y)return[void 0];else if(a instanceof Z)return[null];else if(a instanceof au)return[void 0,...af(a.unwrap())];else if(a instanceof av)return[null,...af(a.unwrap())];else if(a instanceof aA)return af(a.unwrap());else if(a instanceof aC)return af(a.unwrap());else if(a instanceof ax)return af(a._def.innerType);else return[]};class ag extends z{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==c.object)return n(b,{code:e.invalid_type,expected:c.object,received:b.parsedType}),p;let d=this.discriminator,f=b.data[d],g=this.optionsMap.get(f);return g?b.common.async?g._parseAsync({data:b.data,path:b.path,parent:b}):g._parseSync({data:b.data,path:b.path,parent:b}):(n(b,{code:e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[d]}),p)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=af(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new ag({typeName:bn.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...y(c)})}}class ah extends z{_parse(a){let{status:b,ctx:f}=this._processInputParams(a),g=(a,g)=>{if(s(a)||s(g))return p;let h=function a(b,e){let f=d(b),g=d(e);if(b===e)return{valid:!0,data:b};if(f===c.object&&g===c.object){let c=bk.objectKeys(e),d=bk.objectKeys(b).filter(a=>-1!==c.indexOf(a)),f={...b,...e};for(let c of d){let d=a(b[c],e[c]);if(!d.valid)return{valid:!1};f[c]=d.data}return{valid:!0,data:f}}if(f===c.array&&g===c.array){if(b.length!==e.length)return{valid:!1};let c=[];for(let d=0;d<b.length;d++){let f=a(b[d],e[d]);if(!f.valid)return{valid:!1};c.push(f.data)}return{valid:!0,data:c}}if(f===c.date&&g===c.date&&+b==+e)return{valid:!0,data:b};return{valid:!1}}(a.value,g.value);return h.valid?((t(a)||t(g))&&b.dirty(),{status:b.value,value:h.data}):(n(f,{code:e.invalid_intersection_types}),p)};return f.common.async?Promise.all([this._def.left._parseAsync({data:f.data,path:f.path,parent:f}),this._def.right._parseAsync({data:f.data,path:f.path,parent:f})]).then(([a,b])=>g(a,b)):g(this._def.left._parseSync({data:f.data,path:f.path,parent:f}),this._def.right._parseSync({data:f.data,path:f.path,parent:f}))}}ah.create=(a,b,c)=>new ah({left:a,right:b,typeName:bn.ZodIntersection,...y(c)});class ai extends z{_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.array)return n(d,{code:e.invalid_type,expected:c.array,received:d.parsedType}),p;if(d.data.length<this._def.items.length)return n(d,{code:e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),p;!this._def.rest&&d.data.length>this._def.items.length&&(n(d,{code:e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let f=[...d.data].map((a,b)=>{let c=this._def.items[b]||this._def.rest;return c?c._parse(new w(d,a,d.path,b)):null}).filter(a=>!!a);return d.common.async?Promise.all(f).then(a=>o.mergeArray(b,a)):o.mergeArray(b,f)}get items(){return this._def.items}rest(a){return new ai({...this._def,rest:a})}}ai.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ai({items:a,typeName:bn.ZodTuple,rest:null,...y(b)})};class aj extends z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.object)return n(d,{code:e.invalid_type,expected:c.object,received:d.parsedType}),p;let f=[],g=this._def.keyType,h=this._def.valueType;for(let a in d.data)f.push({key:g._parse(new w(d,a,d.path,a)),value:h._parse(new w(d,d.data[a],d.path,a)),alwaysSet:a in d.data});return d.common.async?o.mergeObjectAsync(b,f):o.mergeObjectSync(b,f)}get element(){return this._def.valueType}static create(a,b,c){return new aj(b instanceof z?{keyType:a,valueType:b,typeName:bn.ZodRecord,...y(c)}:{keyType:S.create(),valueType:a,typeName:bn.ZodRecord,...y(b)})}}class ak extends z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.map)return n(d,{code:e.invalid_type,expected:c.map,received:d.parsedType}),p;let f=this._def.keyType,g=this._def.valueType,h=[...d.data.entries()].map(([a,b],c)=>({key:f._parse(new w(d,a,d.path,[c,"key"])),value:g._parse(new w(d,b,d.path,[c,"value"]))}));if(d.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of h){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return p;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of h){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return p;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}ak.create=(a,b,c)=>new ak({valueType:b,keyType:a,typeName:bn.ZodMap,...y(c)});class al extends z{_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.set)return n(d,{code:e.invalid_type,expected:c.set,received:d.parsedType}),p;let f=this._def;null!==f.minSize&&d.data.size<f.minSize.value&&(n(d,{code:e.too_small,minimum:f.minSize.value,type:"set",inclusive:!0,exact:!1,message:f.minSize.message}),b.dirty()),null!==f.maxSize&&d.data.size>f.maxSize.value&&(n(d,{code:e.too_big,maximum:f.maxSize.value,type:"set",inclusive:!0,exact:!1,message:f.maxSize.message}),b.dirty());let g=this._def.valueType;function h(a){let c=new Set;for(let d of a){if("aborted"===d.status)return p;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let i=[...d.data.values()].map((a,b)=>g._parse(new w(d,a,d.path,b)));return d.common.async?Promise.all(i).then(a=>h(a)):h(i)}min(a,b){return new al({...this._def,minSize:{value:a,message:bm.toString(b)}})}max(a,b){return new al({...this._def,maxSize:{value:a,message:bm.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}al.create=(a,b)=>new al({valueType:a,minSize:null,maxSize:null,typeName:bn.ZodSet,...y(b)});class am extends z{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==c.function)return n(b,{code:e.invalid_type,expected:c.function,received:b.parsedType}),p;function d(a,c){return l({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,i,h].filter(a=>!!a),issueData:{code:e.invalid_arguments,argumentsError:c}})}function f(a,c){return l({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,i,h].filter(a=>!!a),issueData:{code:e.invalid_return_type,returnTypeError:c}})}let j={errorMap:b.common.contextualErrorMap},k=b.data;if(this._def.returns instanceof as){let a=this;return r(async function(...b){let c=new g([]),e=await a._def.args.parseAsync(b,j).catch(a=>{throw c.addIssue(d(b,a)),c}),h=await Reflect.apply(k,this,e);return await a._def.returns._def.type.parseAsync(h,j).catch(a=>{throw c.addIssue(f(h,a)),c})})}{let a=this;return r(function(...b){let c=a._def.args.safeParse(b,j);if(!c.success)throw new g([d(b,c.error)]);let e=Reflect.apply(k,this,c.data),h=a._def.returns.safeParse(e,j);if(!h.success)throw new g([f(e,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new am({...this._def,args:ai.create(a).rest(_.create())})}returns(a){return new am({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new am({args:a||ai.create([]).rest(_.create()),returns:b||_.create(),typeName:bn.ZodFunction,...y(c)})}}class an extends z{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}an.create=(a,b)=>new an({getter:a,typeName:bn.ZodLazy,...y(b)});class ao extends z{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return n(b,{received:b.data,code:e.invalid_literal,expected:this._def.value}),p}return{status:"valid",value:a.data}}get value(){return this._def.value}}function ap(a,b){return new aq({values:a,typeName:bn.ZodEnum,...y(b)})}ao.create=(a,b)=>new ao({value:a,typeName:bn.ZodLiteral,...y(b)});class aq extends z{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return n(b,{expected:bk.joinValues(c),received:b.parsedType,code:e.invalid_type}),p}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return n(b,{received:b.data,code:e.invalid_enum_value,options:c}),p}return r(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return aq.create(a,{...this._def,...b})}exclude(a,b=this._def){return aq.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}aq.create=ap;class ar extends z{_parse(a){let b=bk.getValidEnumValues(this._def.values),d=this._getOrReturnCtx(a);if(d.parsedType!==c.string&&d.parsedType!==c.number){let a=bk.objectValues(b);return n(d,{expected:bk.joinValues(a),received:d.parsedType,code:e.invalid_type}),p}if(this._cache||(this._cache=new Set(bk.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=bk.objectValues(b);return n(d,{received:d.data,code:e.invalid_enum_value,options:a}),p}return r(a.data)}get enum(){return this._def.values}}ar.create=(a,b)=>new ar({values:a,typeName:bn.ZodNativeEnum,...y(b)});class as extends z{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==c.promise&&!1===b.common.async?(n(b,{code:e.invalid_type,expected:c.promise,received:b.parsedType}),p):r((b.parsedType===c.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}as.create=(a,b)=>new as({type:a,typeName:bn.ZodPromise,...y(b)});class at extends z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{n(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return p;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?p:"dirty"===d.status||"dirty"===b.value?q(d.value):d});{if("aborted"===b.value)return p;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?p:"dirty"===d.status||"dirty"===b.value?q(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?p:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?p:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>u(a)?Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})):p);else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if(!u(a))return p;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}bk.assertNever(d)}}at.create=(a,b,c)=>new at({schema:a,typeName:bn.ZodEffects,effect:b,...y(c)}),at.createWithPreprocess=(a,b,c)=>new at({schema:b,effect:{type:"preprocess",transform:a},typeName:bn.ZodEffects,...y(c)});class au extends z{_parse(a){return this._getType(a)===c.undefined?r(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}au.create=(a,b)=>new au({innerType:a,typeName:bn.ZodOptional,...y(b)});class av extends z{_parse(a){return this._getType(a)===c.null?r(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}av.create=(a,b)=>new av({innerType:a,typeName:bn.ZodNullable,...y(b)});class aw extends z{_parse(a){let{ctx:b}=this._processInputParams(a),d=b.data;return b.parsedType===c.undefined&&(d=this._def.defaultValue()),this._def.innerType._parse({data:d,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}aw.create=(a,b)=>new aw({innerType:a,typeName:bn.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...y(b)});class ax extends z{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return v(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new g(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new g(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}ax.create=(a,b)=>new ax({innerType:a,typeName:bn.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...y(b)});class ay extends z{_parse(a){if(this._getType(a)!==c.nan){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.nan,received:b.parsedType}),p}return{status:"valid",value:a.data}}}ay.create=a=>new ay({typeName:bn.ZodNaN,...y(a)});let az=Symbol("zod_brand");class aA extends z{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class aB extends z{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?p:"dirty"===a.status?(b.dirty(),q(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?p:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new aB({in:a,out:b,typeName:bn.ZodPipeline})}}class aC extends z{_parse(a){let b=this._def.innerType._parse(a),c=a=>(u(a)&&(a.value=Object.freeze(a.value)),a);return v(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}function aD(a,b){let c="function"==typeof a?a(b):"string"==typeof a?{message:a}:a;return"string"==typeof c?{message:c}:c}function aE(a,b={},c){return a?$.create().superRefine((d,e)=>{let f=a(d);if(f instanceof Promise)return f.then(a=>{if(!a){let a=aD(b,d),f=a.fatal??c??!0;e.addIssue({code:"custom",...a,fatal:f})}});if(!f){let a=aD(b,d),f=a.fatal??c??!0;e.addIssue({code:"custom",...a,fatal:f})}}):$.create()}aC.create=(a,b)=>new aC({innerType:a,typeName:bn.ZodReadonly,...y(b)});let aF={object:ad.lazycreate};(bj=bn||(bn={})).ZodString="ZodString",bj.ZodNumber="ZodNumber",bj.ZodNaN="ZodNaN",bj.ZodBigInt="ZodBigInt",bj.ZodBoolean="ZodBoolean",bj.ZodDate="ZodDate",bj.ZodSymbol="ZodSymbol",bj.ZodUndefined="ZodUndefined",bj.ZodNull="ZodNull",bj.ZodAny="ZodAny",bj.ZodUnknown="ZodUnknown",bj.ZodNever="ZodNever",bj.ZodVoid="ZodVoid",bj.ZodArray="ZodArray",bj.ZodObject="ZodObject",bj.ZodUnion="ZodUnion",bj.ZodDiscriminatedUnion="ZodDiscriminatedUnion",bj.ZodIntersection="ZodIntersection",bj.ZodTuple="ZodTuple",bj.ZodRecord="ZodRecord",bj.ZodMap="ZodMap",bj.ZodSet="ZodSet",bj.ZodFunction="ZodFunction",bj.ZodLazy="ZodLazy",bj.ZodLiteral="ZodLiteral",bj.ZodEnum="ZodEnum",bj.ZodEffects="ZodEffects",bj.ZodNativeEnum="ZodNativeEnum",bj.ZodOptional="ZodOptional",bj.ZodNullable="ZodNullable",bj.ZodDefault="ZodDefault",bj.ZodCatch="ZodCatch",bj.ZodPromise="ZodPromise",bj.ZodBranded="ZodBranded",bj.ZodPipeline="ZodPipeline",bj.ZodReadonly="ZodReadonly";let aG=(a,b={message:`Input not instance of ${a.name}`})=>aE(b=>b instanceof a,b),aH=S.create,aI=T.create,aJ=ay.create,aK=U.create,aL=V.create,aM=W.create,aN=X.create,aO=Y.create,aP=Z.create,aQ=$.create,aR=_.create,aS=aa.create,aT=ab.create,aU=ac.create,aV=ad.create,aW=ad.strictCreate,aX=ae.create,aY=ag.create,aZ=ah.create,a$=ai.create,a_=aj.create,a0=ak.create,a1=al.create,a2=am.create,a3=an.create,a4=ao.create,a5=aq.create,a6=ar.create,a7=as.create,a8=at.create,a9=au.create,ba=av.create,bb=at.createWithPreprocess,bc=aB.create,bd=()=>aH().optional(),be=()=>aI().optional(),bf=()=>aL().optional(),bg={string:a=>S.create({...a,coerce:!0}),number:a=>T.create({...a,coerce:!0}),boolean:a=>V.create({...a,coerce:!0}),bigint:a=>U.create({...a,coerce:!0}),date:a=>W.create({...a,coerce:!0})};a.s(["BRAND",0,az,"NEVER",0,p,"Schema",()=>z,"ZodAny",()=>$,"ZodArray",()=>ac,"ZodBigInt",()=>U,"ZodBoolean",()=>V,"ZodBranded",()=>aA,"ZodCatch",()=>ax,"ZodDate",()=>W,"ZodDefault",()=>aw,"ZodDiscriminatedUnion",()=>ag,"ZodEffects",()=>at,"ZodEnum",()=>aq,"ZodFirstPartyTypeKind",()=>bn,"ZodFunction",()=>am,"ZodIntersection",()=>ah,"ZodLazy",()=>an,"ZodLiteral",()=>ao,"ZodMap",()=>ak,"ZodNaN",()=>ay,"ZodNativeEnum",()=>ar,"ZodNever",()=>aa,"ZodNull",()=>Z,"ZodNullable",()=>av,"ZodNumber",()=>T,"ZodObject",()=>ad,"ZodOptional",()=>au,"ZodPipeline",()=>aB,"ZodPromise",()=>as,"ZodReadonly",()=>aC,"ZodRecord",()=>aj,"ZodSchema",()=>z,"ZodSet",()=>al,"ZodString",()=>S,"ZodSymbol",()=>X,"ZodTransformer",()=>at,"ZodTuple",()=>ai,"ZodType",()=>z,"ZodUndefined",()=>Y,"ZodUnion",()=>ae,"ZodUnknown",()=>_,"ZodVoid",()=>ab,"any",()=>aQ,"array",()=>aU,"bigint",()=>aK,"boolean",()=>aL,"coerce",0,bg,"custom",()=>aE,"date",()=>aM,"datetimeRegex",()=>R,"discriminatedUnion",()=>aY,"effect",()=>a8,"enum",()=>a5,"function",()=>a2,"instanceof",()=>aG,"intersection",()=>aZ,"late",0,aF,"lazy",()=>a3,"literal",()=>a4,"map",()=>a0,"nan",()=>aJ,"nativeEnum",()=>a6,"never",()=>aS,"null",()=>aP,"nullable",()=>ba,"number",()=>aI,"object",()=>aV,"oboolean",()=>bf,"onumber",()=>be,"optional",()=>a9,"ostring",()=>bd,"pipeline",()=>bc,"preprocess",()=>bb,"promise",()=>a7,"record",()=>a_,"set",()=>a1,"strictObject",()=>aW,"string",()=>aH,"symbol",()=>aN,"transformer",()=>a8,"tuple",()=>a$,"undefined",()=>aO,"union",()=>aX,"unknown",()=>aR,"void",()=>aT],90455),a.i(90455),a.i(40366),a.s(["BRAND",0,az,"DIRTY",0,q,"EMPTY_PATH",0,m,"INVALID",0,p,"NEVER",0,p,"OK",0,r,"ParseStatus",()=>o,"Schema",()=>z,"ZodAny",()=>$,"ZodArray",()=>ac,"ZodBigInt",()=>U,"ZodBoolean",()=>V,"ZodBranded",()=>aA,"ZodCatch",()=>ax,"ZodDate",()=>W,"ZodDefault",()=>aw,"ZodDiscriminatedUnion",()=>ag,"ZodEffects",()=>at,"ZodEnum",()=>aq,"ZodError",()=>g,"ZodFirstPartyTypeKind",()=>bn,"ZodFunction",()=>am,"ZodIntersection",()=>ah,"ZodIssueCode",0,e,"ZodLazy",()=>an,"ZodLiteral",()=>ao,"ZodMap",()=>ak,"ZodNaN",()=>ay,"ZodNativeEnum",()=>ar,"ZodNever",()=>aa,"ZodNull",()=>Z,"ZodNullable",()=>av,"ZodNumber",()=>T,"ZodObject",()=>ad,"ZodOptional",()=>au,"ZodParsedType",0,c,"ZodPipeline",()=>aB,"ZodPromise",()=>as,"ZodReadonly",()=>aC,"ZodRecord",()=>aj,"ZodSchema",()=>z,"ZodSet",()=>al,"ZodString",()=>S,"ZodSymbol",()=>X,"ZodTransformer",()=>at,"ZodTuple",()=>ai,"ZodType",()=>z,"ZodUndefined",()=>Y,"ZodUnion",()=>ae,"ZodUnknown",()=>_,"ZodVoid",()=>ab,"addIssueToContext",()=>n,"any",()=>aQ,"array",()=>aU,"bigint",()=>aK,"boolean",()=>aL,"coerce",0,bg,"custom",()=>aE,"date",()=>aM,"datetimeRegex",()=>R,"defaultErrorMap",0,h,"discriminatedUnion",()=>aY,"effect",()=>a8,"enum",()=>a5,"function",()=>a2,"getErrorMap",()=>k,"getParsedType",0,d,"instanceof",()=>aG,"intersection",()=>aZ,"isAborted",0,s,"isAsync",0,v,"isDirty",0,t,"isValid",0,u,"late",0,aF,"lazy",()=>a3,"literal",()=>a4,"makeIssue",0,l,"map",()=>a0,"nan",()=>aJ,"nativeEnum",()=>a6,"never",()=>aS,"null",()=>aP,"nullable",()=>ba,"number",()=>aI,"object",()=>aV,"objectUtil",()=>bl,"oboolean",()=>bf,"onumber",()=>be,"optional",()=>a9,"ostring",()=>bd,"pipeline",()=>bc,"preprocess",()=>bb,"promise",()=>a7,"quotelessJson",0,f,"record",()=>a_,"set",()=>a1,"setErrorMap",()=>j,"strictObject",()=>aW,"string",()=>aH,"symbol",()=>aN,"transformer",()=>a8,"tuple",()=>a$,"undefined",()=>aO,"union",()=>aX,"unknown",()=>aR,"util",()=>bk,"void",()=>aT],37411);var bh,bi,bj,bk,bl,bm,bn,bo=a.i(37411);a.s(["z",0,bo],83111)},77419,a=>{"use strict";class b extends Error{constructor(a,b){a instanceof Error?super(void 0,{cause:{err:a,...a.cause,...b}}):"string"==typeof a?(b instanceof Error&&(b={err:b,...b.cause}),super(a,b)):super(void 0,a),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const c=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${c}`}}class c extends b{}c.kind="signIn";class d extends b{}d.type="AdapterError";class e extends b{}e.type="AccessDenied";class f extends b{}f.type="CallbackRouteError";class g extends b{}g.type="ErrorPageLoop";class h extends b{}h.type="EventError";class i extends b{}i.type="InvalidCallbackUrl";class j extends c{constructor(){super(...arguments),this.code="credentials"}}j.type="CredentialsSignin";class k extends b{}k.type="InvalidEndpoints";class l extends b{}l.type="InvalidCheck";class m extends b{}m.type="JWTSessionError";class n extends b{}n.type="MissingAdapter";class o extends b{}o.type="MissingAdapterMethods";class p extends b{}p.type="MissingAuthorize";class q extends b{}q.type="MissingSecret";class r extends c{}r.type="OAuthAccountNotLinked";class s extends c{}s.type="OAuthCallbackError";class t extends b{}t.type="OAuthProfileParseError";class u extends b{}u.type="SessionTokenError";class v extends b{}v.type="SignOutError";class w extends b{}w.type="UnknownAction";class x extends b{}x.type="UnsupportedStrategy";class y extends b{}y.type="InvalidProvider";class z extends b{}z.type="UntrustedHost";class A extends b{}A.type="Verification";class B extends c{}B.type="MissingCSRF";let C=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);function D(a){return a instanceof b&&C.has(a.type)}class E extends b{}E.type="DuplicateConditionalUI";class F extends b{}F.type="MissingWebAuthnAutocomplete";class G extends b{}G.type="WebAuthnVerificationError";class H extends c{}H.type="AccountNotLinked";class I extends b{}I.type="ExperimentalFeatureNotEnabled",a.s(["AccessDenied",()=>e,"AccountNotLinked",()=>H,"AdapterError",()=>d,"AuthError",()=>b,"CallbackRouteError",()=>f,"CredentialsSignin",()=>j,"DuplicateConditionalUI",()=>E,"ErrorPageLoop",()=>g,"EventError",()=>h,"ExperimentalFeatureNotEnabled",()=>I,"InvalidCallbackUrl",()=>i,"InvalidCheck",()=>l,"InvalidEndpoints",()=>k,"InvalidProvider",()=>y,"JWTSessionError",()=>m,"MissingAdapter",()=>n,"MissingAdapterMethods",()=>o,"MissingAuthorize",()=>p,"MissingCSRF",()=>B,"MissingSecret",()=>q,"MissingWebAuthnAutocomplete",()=>F,"OAuthAccountNotLinked",()=>r,"OAuthCallbackError",()=>s,"OAuthProfileParseError",()=>t,"SessionTokenError",()=>u,"SignOutError",()=>v,"UnknownAction",()=>w,"UnsupportedStrategy",()=>x,"UntrustedHost",()=>z,"Verification",()=>A,"WebAuthnVerificationError",()=>G,"isClientError",()=>D])},92603,(a,b,c)=>{"use strict";function d(a,b,c){if(a){for(let d of(c&&(c=c.toLowerCase()),a))if(b===d.domain?.split(":",1)[0].toLowerCase()||c===d.defaultLocale.toLowerCase()||d.locales?.some(a=>a.toLowerCase()===c))return d}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"detectDomainLocale",{enumerable:!0,get:function(){return d}})},74993,(a,b,c)=>{"use strict";function d(a){return a.replace(/\/$/,"")||"/"}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"removeTrailingSlash",{enumerable:!0,get:function(){return d}})},71442,(a,b,c)=>{"use strict";function d(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"parsePath",{enumerable:!0,get:function(){return d}})},91150,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${b}${c}${e}${f}`}},47074,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathSuffix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${c}${b}${e}${f}`}},39481,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"pathHasPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if("string"!=typeof a)return!1;let{pathname:c}=(0,d.parsePath)(a);return c===b||c.startsWith(b+"/")}},7700,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addLocale",{enumerable:!0,get:function(){return f}});let d=a.r(91150),e=a.r(39481);function f(a,b,c,f){if(!b||b===c)return a;let g=a.toLowerCase();return!f&&((0,e.pathHasPrefix)(g,"/api")||(0,e.pathHasPrefix)(g,`/${b.toLowerCase()}`))?a:(0,d.addPathPrefix)(a,`/${b}`)}},97642,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"formatNextPathnameInfo",{enumerable:!0,get:function(){return h}});let d=a.r(74993),e=a.r(91150),f=a.r(47074),g=a.r(7700);function h(a){let b=(0,g.addLocale)(a.pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix);return(a.buildId||!a.trailingSlash)&&(b=(0,d.removeTrailingSlash)(b)),a.buildId&&(b=(0,f.addPathSuffix)((0,e.addPathPrefix)(b,`/_next/data/${a.buildId}`),"/"===a.pathname?"index.json":".json")),b=(0,e.addPathPrefix)(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:(0,f.addPathSuffix)(b,"/"):(0,d.removeTrailingSlash)(b)}},64239,(a,b,c)=>{"use strict";function d(a,b){let c;if(b?.host&&!Array.isArray(b.host))c=b.host.toString().split(":",1)[0];else{if(!a.hostname)return;c=a.hostname}return c.toLowerCase()}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getHostname",{enumerable:!0,get:function(){return d}})},3885,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"normalizeLocalePath",{enumerable:!0,get:function(){return e}});let d=new WeakMap;function e(a,b){let c;if(!b)return{pathname:a};let e=d.get(b);e||(e=b.map(a=>a.toLowerCase()),d.set(b,e));let f=a.split("/",2);if(!f[1])return{pathname:a};let g=f[1].toLowerCase(),h=e.indexOf(g);return h<0?{pathname:a}:(c=b[h],{pathname:a=a.slice(c.length+1)||"/",detectedLocale:c})}},61601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"removePathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(39481);function e(a,b){if(!(0,d.pathHasPrefix)(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:`/${c}`}},94971,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getNextPathnameInfo",{enumerable:!0,get:function(){return g}});let d=a.r(3885),e=a.r(61601),f=a.r(39481);function g(a,b){let{basePath:c,i18n:g,trailingSlash:h}=b.nextConfig??{},i={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):h};c&&(0,f.pathHasPrefix)(i.pathname,c)&&(i.pathname=(0,e.removePathPrefix)(i.pathname,c),i.basePath=c);let j=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){let a=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");i.buildId=a[0],j="index"!==a[1]?`/${a.slice(1).join("/")}`:"/",!0===b.parseData&&(i.pathname=j)}if(g){let a=b.i18nProvider?b.i18nProvider.analyze(i.pathname):(0,d.normalizeLocalePath)(i.pathname,g.locales);i.locale=a.detectedLocale,i.pathname=a.pathname??i.pathname,!a.detectedLocale&&i.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(j):(0,d.normalizeLocalePath)(j,g.locales)).detectedLocale&&(i.locale=a.detectedLocale)}return i}},22670,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextURL",{enumerable:!0,get:function(){return k}});let d=a.r(92603),e=a.r(97642),f=a.r(64239),g=a.r(94971),h=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function i(a,b){return new URL(String(a).replace(h,"localhost"),b&&String(b).replace(h,"localhost"))}let j=Symbol("NextURLInternal");class k{constructor(a,b,c){let d,e;"object"==typeof b&&"pathname"in b||"string"==typeof b?(d=b,e=c||{}):e=c||b||{},this[j]={url:i(a,d??e.base),options:e,basePath:""},this.analyze()}analyze(){var a,b,c,e,h;let i=(0,g.getNextPathnameInfo)(this[j].url.pathname,{nextConfig:this[j].options.nextConfig,parseData:!0,i18nProvider:this[j].options.i18nProvider}),k=(0,f.getHostname)(this[j].url,this[j].options.headers);this[j].domainLocale=this[j].options.i18nProvider?this[j].options.i18nProvider.detectDomainLocale(k):(0,d.detectDomainLocale)(null==(b=this[j].options.nextConfig)||null==(a=b.i18n)?void 0:a.domains,k);let l=(null==(c=this[j].domainLocale)?void 0:c.defaultLocale)||(null==(h=this[j].options.nextConfig)||null==(e=h.i18n)?void 0:e.defaultLocale);this[j].url.pathname=i.pathname,this[j].defaultLocale=l,this[j].basePath=i.basePath??"",this[j].buildId=i.buildId,this[j].locale=i.locale??l,this[j].trailingSlash=i.trailingSlash}formatPathname(){return(0,e.formatNextPathnameInfo)({basePath:this[j].basePath,buildId:this[j].buildId,defaultLocale:this[j].options.forceLocale?void 0:this[j].defaultLocale,locale:this[j].locale,pathname:this[j].url.pathname,trailingSlash:this[j].trailingSlash})}formatSearch(){return this[j].url.search}get buildId(){return this[j].buildId}set buildId(a){this[j].buildId=a}get locale(){return this[j].locale??""}set locale(a){var b,c;if(!this[j].locale||!(null==(c=this[j].options.nextConfig)||null==(b=c.i18n)?void 0:b.locales.includes(a)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${a}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[j].locale=a}get defaultLocale(){return this[j].defaultLocale}get domainLocale(){return this[j].domainLocale}get searchParams(){return this[j].url.searchParams}get host(){return this[j].url.host}set host(a){this[j].url.host=a}get hostname(){return this[j].url.hostname}set hostname(a){this[j].url.hostname=a}get port(){return this[j].url.port}set port(a){this[j].url.port=a}get protocol(){return this[j].url.protocol}set protocol(a){this[j].url.protocol=a}get href(){let a=this.formatPathname(),b=this.formatSearch();return`${this.protocol}//${this.host}${a}${b}${this.hash}`}set href(a){this[j].url=i(a),this.analyze()}get origin(){return this[j].url.origin}get pathname(){return this[j].url.pathname}set pathname(a){this[j].url.pathname=a}get hash(){return this[j].url.hash}set hash(a){this[j].url.hash=a}get search(){return this[j].url.search}set search(a){this[j].url.search=a}get password(){return this[j].url.password}set password(a){this[j].url.password=a}get username(){return this[j].url.username}set username(a){this[j].url.username=a}get basePath(){return this[j].basePath}set basePath(a){this[j].basePath=a.startsWith("/")?a:`/${a}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new k(String(this),this[j].options)}}},99870,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ACTION_SUFFIX:function(){return q},APP_DIR_ALIAS:function(){return M},CACHE_ONE_YEAR:function(){return C},DOT_NEXT_ALIAS:function(){return K},ESLINT_DEFAULT_DIRS:function(){return ae},GSP_NO_RETURNED_VALUE:function(){return $},GSSP_COMPONENT_MEMBER_ERROR:function(){return ab},GSSP_NO_RETURNED_VALUE:function(){return _},HTML_CONTENT_TYPE_HEADER:function(){return g},INFINITE_CACHE:function(){return D},INSTRUMENTATION_HOOK_FILENAME:function(){return I},JSON_CONTENT_TYPE_HEADER:function(){return h},MATCHED_PATH_HEADER:function(){return k},MIDDLEWARE_FILENAME:function(){return E},MIDDLEWARE_LOCATION_REGEXP:function(){return F},NEXT_BODY_SUFFIX:function(){return t},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return B},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return v},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return w},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return A},NEXT_CACHE_TAGS_HEADER:function(){return u},NEXT_CACHE_TAG_MAX_ITEMS:function(){return y},NEXT_CACHE_TAG_MAX_LENGTH:function(){return z},NEXT_DATA_SUFFIX:function(){return r},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return j},NEXT_META_SUFFIX:function(){return s},NEXT_QUERY_PARAM_PREFIX:function(){return i},NEXT_RESUME_HEADER:function(){return x},NON_STANDARD_NODE_ENV:function(){return ac},PAGES_DIR_ALIAS:function(){return J},PRERENDER_REVALIDATE_HEADER:function(){return l},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return m},PROXY_FILENAME:function(){return G},PROXY_LOCATION_REGEXP:function(){return H},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return U},ROOT_DIR_ALIAS:function(){return L},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return T},RSC_ACTION_ENCRYPTION_ALIAS:function(){return S},RSC_ACTION_PROXY_ALIAS:function(){return P},RSC_ACTION_VALIDATE_ALIAS:function(){return O},RSC_CACHE_WRAPPER_ALIAS:function(){return Q},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return R},RSC_MOD_REF_PROXY_ALIAS:function(){return N},RSC_SEGMENTS_DIR_SUFFIX:function(){return n},RSC_SEGMENT_SUFFIX:function(){return o},RSC_SUFFIX:function(){return p},SERVER_PROPS_EXPORT_ERROR:function(){return Z},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return W},SERVER_PROPS_SSG_CONFLICT:function(){return X},SERVER_RUNTIME:function(){return af},SSG_FALLBACK_EXPORT_ERROR:function(){return ad},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return V},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return Y},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return f},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return aa},WEBPACK_LAYERS:function(){return ai},WEBPACK_RESOURCE_QUERIES:function(){return aj},WEB_SOCKET_MAX_RECONNECTIONS:function(){return ag}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="text/plain",g="text/html; charset=utf-8",h="application/json; charset=utf-8",i="nxtP",j="nxtI",k="x-matched-path",l="x-prerender-revalidate",m="x-prerender-revalidate-if-generated",n=".segments",o=".segment.rsc",p=".rsc",q=".action",r=".json",s=".meta",t=".body",u="x-next-cache-tags",v="x-next-revalidated-tags",w="x-next-revalidate-tag-token",x="next-resume",y=128,z=256,A=1024,B="_N_T_",C=31536e3,D=0xfffffffe,E="middleware",F=`(?:src/)?${E}`,G="proxy",H=`(?:src/)?${G}`,I="instrumentation",J="private-next-pages",K="private-dot-next",L="private-next-root-dir",M="private-next-app-dir",N="private-next-rsc-mod-ref-proxy",O="private-next-rsc-action-validate",P="private-next-rsc-server-reference",Q="private-next-rsc-cache-wrapper",R="private-next-rsc-track-dynamic-import",S="private-next-rsc-action-encryption",T="private-next-rsc-action-client-wrapper",U="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",V="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",W="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",X="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",Y="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",Z="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",$="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",_="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",aa="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",ab="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",ac='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',ad="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",ae=["app","pages","components","lib","src"],af={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ag=12,ah={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},ai={...ah,GROUP:{builtinReact:[ah.reactServerComponents,ah.actionBrowser],serverOnly:[ah.reactServerComponents,ah.actionBrowser,ah.instrument,ah.middleware],neutralTarget:[ah.apiNode,ah.apiEdge],clientOnly:[ah.serverSideRendering,ah.appPagesBrowser],bundled:[ah.reactServerComponents,ah.actionBrowser,ah.serverSideRendering,ah.appPagesBrowser,ah.shared,ah.instrument,ah.middleware],appPages:[ah.reactServerComponents,ah.serverSideRendering,ah.appPagesBrowser,ah.actionBrowser]}},aj={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},92273,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={fromNodeOutgoingHttpHeaders:function(){return g},normalizeNextQueryParam:function(){return k},splitCookiesString:function(){return h},toNodeOutgoingHttpHeaders:function(){return i},validateURL:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(99870);function g(a){let b=new Headers;for(let[c,d]of Object.entries(a))for(let a of Array.isArray(d)?d:[d])void 0!==a&&("number"==typeof a&&(a=a.toString()),b.append(c,a));return b}function h(a){var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}function i(a){let b={},c=[];if(a)for(let[d,e]of a.entries())"set-cookie"===d.toLowerCase()?(c.push(...h(e)),b[d]=1===c.length?c[0]:c):b[d]=e;return b}function j(a){try{return String(new URL(String(a)))}catch(b){throw Object.defineProperty(Error(`URL is malformed "${String(a)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:b}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function k(a){for(let b of[f.NEXT_QUERY_PARAM_PREFIX,f.NEXT_INTERCEPTION_MARKER_PREFIX])if(a!==b&&a.startsWith(b))return a.substring(b.length);return null}},89753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={PageSignatureError:function(){return f},RemovedPageError:function(){return g},RemovedUAError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor({page:a}){super(`The middleware "${a}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class g extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class h extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},63681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36226)},88491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={INTERNALS:function(){return j},NextRequest:function(){return k}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(22670),g=a.r(92273),h=a.r(89753),i=a.r(63681),j=Symbol("internal request");class k extends Request{constructor(a,b={}){const c="string"!=typeof a&&"url"in a?a.url:String(a);(0,g.validateURL)(c),b.body&&"half"!==b.duplex&&(b.duplex="half"),a instanceof Request?super(a,b):super(c,b);const d=new f.NextURL(c,{headers:(0,g.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:b.nextConfig});this[j]={cookies:new i.RequestCookies(this.headers),nextUrl:d,url:d.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[j].cookies}get nextUrl(){return this[j].nextUrl}get page(){throw new h.RemovedPageError}get ua(){throw new h.RemovedUAError}get url(){return this[j].url}}},51409,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReflectAdapter",{enumerable:!0,get:function(){return d}});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},51978,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextResponse",{enumerable:!0,get:function(){return l}});let d=a.r(63681),e=a.r(22670),f=a.r(92273),g=a.r(51409),h=a.r(63681),i=Symbol("internal response"),j=new Set([301,302,303,307,308]);function k(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class l extends Response{constructor(a,b={}){super(a,b);const c=this.headers,j=new Proxy(new h.ResponseCookies(c),{get(a,e,f){switch(e){case"delete":case"set":return(...f)=>{let g=Reflect.apply(a[e],a,f),i=new Headers(c);return g instanceof h.ResponseCookies&&c.set("x-middleware-set-cookie",g.getAll().map(a=>(0,d.stringifyCookie)(a)).join(",")),k(b,i),g};default:return g.ReflectAdapter.get(a,e,f)}}});this[i]={cookies:j,url:b.url?new e.NextURL(b.url,{headers:(0,f.toNodeOutgoingHttpHeaders)(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[i].cookies}static json(a,b){let c=Response.json(a,b);return new l(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!j.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",(0,f.validateURL)(a)),new l(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",(0,f.validateURL)(a)),k(b,c),new l(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),k(a,b),new l(null,{...a,headers:b})}}},58176,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ImageResponse",{enumerable:!0,get:function(){return d}})},6431,(a,b,c)=>{var d={226:function(b,c){!function(d,e){"use strict";var f="function",g="undefined",h="object",i="string",j="major",k="model",l="name",m="type",n="vendor",o="version",p="architecture",q="console",r="mobile",s="tablet",t="smarttv",u="wearable",v="embedded",w="Amazon",x="Apple",y="ASUS",z="BlackBerry",A="Browser",B="Chrome",C="Firefox",D="Google",E="Huawei",F="Microsoft",G="Motorola",H="Opera",I="Samsung",J="Sharp",K="Sony",L="Xiaomi",M="Zebra",N="Facebook",O="Chromium OS",P="Mac OS",Q=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},R=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},S=function(a,b){return typeof a===i&&-1!==T(b).indexOf(T(a))},T=function(a){return a.toLowerCase()},U=function(a,b){if(typeof a===i)return a=a.replace(/^\s\s*/,""),typeof b===g?a:a.substring(0,350)},V=function(a,b){for(var c,d,e,g,i,j,k=0;k<b.length&&!i;){var l=b[k],m=b[k+1];for(c=d=0;c<l.length&&!i&&l[c];)if(i=l[c++].exec(a))for(e=0;e<m.length;e++)j=i[++d],typeof(g=m[e])===h&&g.length>0?2===g.length?typeof g[1]==f?this[g[0]]=g[1].call(this,j):this[g[0]]=g[1]:3===g.length?typeof g[1]!==f||g[1].exec&&g[1].test?this[g[0]]=j?j.replace(g[1],g[2]):void 0:this[g[0]]=j?g[1].call(this,j,g[2]):void 0:4===g.length&&(this[g[0]]=j?g[3].call(this,j.replace(g[1],g[2])):void 0):this[g]=j||void 0;k+=2}},W=function(a,b){for(var c in b)if(typeof b[c]===h&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(S(b[c][d],a))return"?"===c?void 0:c}else if(S(b[c],a))return"?"===c?void 0:c;return a},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[o,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[o,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,o],[/opios[\/ ]+([\w\.]+)/i],[o,[l,H+" Mini"]],[/\bopr\/([\w\.]+)/i],[o,[l,H]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,o],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[o,[l,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[o,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[o,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[o,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[o,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[o,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+A],o],[/\bfocus\/([\w\.]+)/i],[o,[l,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[o,[l,H+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[o,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[o,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[o,[l,H+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[o,[l,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[o,[l,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+A],o],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],o],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,o],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,N],o],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,o],[/\bgsa\/([\w\.]+) .*safari\//i],[o,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[o,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[o,[l,B+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,B+" WebView"],o],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[o,[l,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,o],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[o,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[o,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[o,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,o],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],o],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[o,[l,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,o],[/(cobalt)\/([\w\.]+)/i],[l,[o,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,T]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",T]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,T]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[k,[n,I],[m,s]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[k,[n,I],[m,r]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[k,[n,x],[m,r]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[k,[n,x],[m,s]],[/(macintosh);/i],[k,[n,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[k,[n,J],[m,r]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[k,[n,E],[m,s]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[k,[n,E],[m,r]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[k,/_/g," "],[n,L],[m,r]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[k,/_/g," "],[n,L],[m,s]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[k,[n,"OPPO"],[m,r]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[k,[n,"Vivo"],[m,r]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[k,[n,"Realme"],[m,r]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[k,[n,G],[m,r]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[k,[n,G],[m,s]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[k,[n,"LG"],[m,s]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[k,[n,"LG"],[m,r]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[k,[n,"Lenovo"],[m,s]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[k,/_/g," "],[n,"Nokia"],[m,r]],[/(pixel c)\b/i],[k,[n,D],[m,s]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[k,[n,D],[m,r]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[k,[n,K],[m,r]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[k,"Xperia Tablet"],[n,K],[m,s]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[k,[n,"OnePlus"],[m,r]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[k,[n,w],[m,s]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[k,/(.+)/g,"Fire Phone $1"],[n,w],[m,r]],[/(playbook);[-\w\),; ]+(rim)/i],[k,n,[m,s]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[k,[n,z],[m,r]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[k,[n,y],[m,s]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[k,[n,y],[m,r]],[/(nexus 9)/i],[k,[n,"HTC"],[m,s]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[n,[k,/_/g," "],[m,r]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[k,[n,"Acer"],[m,s]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[k,[n,"Meizu"],[m,r]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[n,k,[m,r]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[n,k,[m,s]],[/(surface duo)/i],[k,[n,F],[m,s]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[k,[n,"Fairphone"],[m,r]],[/(u304aa)/i],[k,[n,"AT&T"],[m,r]],[/\bsie-(\w*)/i],[k,[n,"Siemens"],[m,r]],[/\b(rct\w+) b/i],[k,[n,"RCA"],[m,s]],[/\b(venue[\d ]{2,7}) b/i],[k,[n,"Dell"],[m,s]],[/\b(q(?:mv|ta)\w+) b/i],[k,[n,"Verizon"],[m,s]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[k,[n,"Barnes & Noble"],[m,s]],[/\b(tm\d{3}\w+) b/i],[k,[n,"NuVision"],[m,s]],[/\b(k88) b/i],[k,[n,"ZTE"],[m,s]],[/\b(nx\d{3}j) b/i],[k,[n,"ZTE"],[m,r]],[/\b(gen\d{3}) b.+49h/i],[k,[n,"Swiss"],[m,r]],[/\b(zur\d{3}) b/i],[k,[n,"Swiss"],[m,s]],[/\b((zeki)?tb.*\b) b/i],[k,[n,"Zeki"],[m,s]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[n,"Dragon Touch"],k,[m,s]],[/\b(ns-?\w{0,9}) b/i],[k,[n,"Insignia"],[m,s]],[/\b((nxa|next)-?\w{0,9}) b/i],[k,[n,"NextBook"],[m,s]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[n,"Voice"],k,[m,r]],[/\b(lvtel\-)?(v1[12]) b/i],[[n,"LvTel"],k,[m,r]],[/\b(ph-1) /i],[k,[n,"Essential"],[m,r]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[k,[n,"Envizen"],[m,s]],[/\b(trio[-\w\. ]+) b/i],[k,[n,"MachSpeed"],[m,s]],[/\btu_(1491) b/i],[k,[n,"Rotor"],[m,s]],[/(shield[\w ]+) b/i],[k,[n,"Nvidia"],[m,s]],[/(sprint) (\w+)/i],[n,k,[m,r]],[/(kin\.[onetw]{3})/i],[[k,/\./g," "],[n,F],[m,r]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[k,[n,M],[m,s]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[k,[n,M],[m,r]],[/smart-tv.+(samsung)/i],[n,[m,t]],[/hbbtv.+maple;(\d+)/i],[[k,/^/,"SmartTV"],[n,I],[m,t]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[n,"LG"],[m,t]],[/(apple) ?tv/i],[n,[k,x+" TV"],[m,t]],[/crkey/i],[[k,B+"cast"],[n,D],[m,t]],[/droid.+aft(\w)( bui|\))/i],[k,[n,w],[m,t]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[k,[n,J],[m,t]],[/(bravia[\w ]+)( bui|\))/i],[k,[n,K],[m,t]],[/(mitv-\w{5}) bui/i],[k,[n,L],[m,t]],[/Hbbtv.*(technisat) (.*);/i],[n,k,[m,t]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[n,U],[k,U],[m,t]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,t]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[n,k,[m,q]],[/droid.+; (shield) bui/i],[k,[n,"Nvidia"],[m,q]],[/(playstation [345portablevi]+)/i],[k,[n,K],[m,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[k,[n,F],[m,q]],[/((pebble))app/i],[n,k,[m,u]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[k,[n,x],[m,u]],[/droid.+; (glass) \d/i],[k,[n,D],[m,u]],[/droid.+; (wt63?0{2,3})\)/i],[k,[n,M],[m,u]],[/(quest( 2| pro)?)/i],[k,[n,N],[m,u]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[n,[m,v]],[/(aeobc)\b/i],[k,[n,w],[m,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[k,[m,r]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[k,[m,s]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,s]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,r]],[/(android[-\w\. ]{0,9});.+buil/i],[k,[n,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[o,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[o,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,o],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[o,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,o],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[o,W,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[o,W,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[o,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,P],[o,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[o,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,o],[/\(bb(10);/i],[o,[l,z]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[o,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[o,[l,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[o,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[o,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[o,[l,B+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,O],o],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,o],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],o],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,o]]},Z=function(a,b){if(typeof a===h&&(b=a,a=void 0),!(this instanceof Z))return new Z(a,b).getResult();var c=typeof d!==g&&d.navigator?d.navigator:void 0,e=a||(c&&c.userAgent?c.userAgent:""),q=c&&c.userAgentData?c.userAgentData:void 0,t=b?Q(Y,b):Y,u=c&&c.userAgent==e;return this.getBrowser=function(){var a,b={};return b[l]=void 0,b[o]=void 0,V.call(b,e,t.browser),b[j]=typeof(a=b[o])===i?a.replace(/[^\d\.]/g,"").split(".")[0]:void 0,u&&c&&c.brave&&typeof c.brave.isBrave==f&&(b[l]="Brave"),b},this.getCPU=function(){var a={};return a[p]=void 0,V.call(a,e,t.cpu),a},this.getDevice=function(){var a={};return a[n]=void 0,a[k]=void 0,a[m]=void 0,V.call(a,e,t.device),u&&!a[m]&&q&&q.mobile&&(a[m]=r),u&&"Macintosh"==a[k]&&c&&typeof c.standalone!==g&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[k]="iPad",a[m]=s),a},this.getEngine=function(){var a={};return a[l]=void 0,a[o]=void 0,V.call(a,e,t.engine),a},this.getOS=function(){var a={};return a[l]=void 0,a[o]=void 0,V.call(a,e,t.os),u&&!a[l]&&q&&"Unknown"!=q.platform&&(a[l]=q.platform.replace(/chrome os/i,O).replace(/macos/i,P)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(a){return e=typeof a===i&&a.length>350?U(a,350):a,this},this.setUA(e),this};if(Z.VERSION="1.0.35",Z.BROWSER=R([l,o,j]),Z.CPU=R([p]),Z.DEVICE=R([k,n,m,q,r,t,s,u,v]),Z.ENGINE=Z.OS=R([l,o]),typeof c!==g)b.exports&&(c=b.exports=Z),c.UAParser=Z;else if(typeof define===f&&define.amd)a.r,void 0!==Z&&a.v(Z);else typeof d!==g&&(d.UAParser=Z);var $=typeof d!==g&&(d.jQuery||d.Zepto);if($&&!$.ua){var _=new Z;$.ua=_.getResult(),$.ua.get=function(){return _.getUA()},$.ua.set=function(a){_.setUA(a);var b=_.getResult();for(var c in b)$.ua[c]=b[c]}}}(this)}},e={};function f(a){var b=e[a];if(void 0!==b)return b.exports;var c=e[a]={exports:{}},g=!0;try{d[a].call(c.exports,c,c.exports,f),g=!1}finally{g&&delete e[a]}return c.exports}f.ab="/ROOT/node_modules/next/dist/compiled/ua-parser-js/",b.exports=f(226)},40881,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={isBot:function(){return h},userAgent:function(){return j},userAgentFromString:function(){return i}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=(d=a.r(6431))&&d.__esModule?d:{default:d};function h(a){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}function i(a){return{...(0,g.default)(a),isBot:void 0!==a&&h(a)}}function j({headers:a}){return i(a.get("user-agent")||void 0)}},50792,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"URLPattern",{enumerable:!0,get:function(){return d}});let d="undefined"==typeof URLPattern?void 0:URLPattern},51455,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"after",{enumerable:!0,get:function(){return e}});let d=a.r(56704);function e(a){let b=d.workAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:c}=b;return c.after(a)}},89969,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),d=a.r(51455),e=c,Object.keys(d).forEach(function(a){"default"===a||Object.prototype.hasOwnProperty.call(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:function(){return d[a]}})})},96556,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60312,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},13091,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},17491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},61933,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},49640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},50640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},60384,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return B},PreludeState:function(){return $},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return z},accessedDynamicData:function(){return J},annotateDynamicAccess:function(){return O},consumeDynamicAccess:function(){return K},createDynamicTrackingState:function(){return s},createDynamicValidationState:function(){return t},createHangingInputAbortSignal:function(){return N},createRenderInBrowserAbortSignal:function(){return M},delayUntilRuntimeStage:function(){return ac},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return u},getStaticShellDisallowedDynamicReasons:function(){return ab},isDynamicPostpone:function(){return E},isPrerenderInterruptedError:function(){return I},logDisallowedDynamicError:function(){return _},markCurrentScopeAsDynamic:function(){return v},postponeWithTracking:function(){return C},throwIfDisallowedDynamic:function(){return aa},throwToInterruptStaticGeneration:function(){return w},trackAllowedDynamicAccess:function(){return W},trackDynamicDataInDynamicRender:function(){return x},trackDynamicHoleInRuntimeShell:function(){return X},trackDynamicHoleInStaticShell:function(){return Y},useDynamicRouteParams:function(){return P},useDynamicSearchParams:function(){return Q}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(717))&&d.__esModule?d:{default:d},i=a.r(96556),j=a.r(60312),k=a.r(32319),l=a.r(56704),m=a.r(13091),n=a.r(17491),o=a.r(61933),p=a.r(49640),q=a.r(50640),r="function"==typeof h.default.unstable_postpone;function s(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function t(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function u(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function v(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return C(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function w(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function x(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function y(a,b,c){let d=H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function z(a,b,c,d){let e=d.dynamicTracking;y(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function A(a,b,c,d){if(!1===d.controller.signal.aborted){y(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function B({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();C(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function C(a,b,c){(function(){if(!r)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(D(a,b))}function D(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function E(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&F(a.message)}function F(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===F(D("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let G="NEXT_PRERENDER_INTERRUPTED";function H(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=G,b}function I(a){return"object"==typeof a&&null!==a&&a.digest===G&&"name"in a&&"message"in a&&a instanceof Error}function J(a){return a.length>0}function K(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function L(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function M(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function N(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function O(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function P(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return C(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function Q(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let R=/\n\s+at Suspense \(<anonymous>\)/,S=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),T=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),U=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function W(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.hasDynamicMetadata=!0;return}if(U.test(b)){c.hasDynamicViewport=!0;return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function X(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Y(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Z(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}var $=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function _(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function aa(a,b,c,d){if(d.syncDynamicErrorWithStack)throw _(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)_(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function ab(a,b,c){if(c.hasSuspenseAboveBody)return[];if(0!==b){let d=c.dynamicErrors;if(d.length>0)return d;if(1===b)return[Object.defineProperty(new q.InvariantError(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===c.hasAllowedDynamic&&0===c.dynamicErrors.length&&c.dynamicMetadata)return[c.dynamicMetadata];return[]}function ac(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},86309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isRequestAPICallableInsideAfter:function(){return j},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(60312),g=a.r(24725);function h(a,b){throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function j(){let a=g.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},28340,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},31382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(50640),h=a.r(28340);var i=((d={})[d.Before=1]="Before",d[d.Static=2]="Static",d[d.Runtime=3]="Runtime",d[d.Dynamic=4]="Dynamic",d[d.Abandoned=5]="Abandoned",d);class j{constructor(a=null,b){this.abortSignal=a,this.hasRuntimePrefetch=b,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),this.mayAbandon=!1,a&&(a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0}),this.mayAbandon=!0)}onStage(a,b){if(this.currentStage>=a)b();else if(3===a)this.runtimeStageListeners.push(b);else if(4===a)this.dynamicStageListeners.push(b);else throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let a=this.hasRuntimePrefetch?4:3;return this.currentStage<a}syncInterruptCurrentStageWithReason(a){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=a,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=a,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new g.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:a}=this;switch(a){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(a){if(a<=this.currentStage)return;let b=this.currentStage;if(this.currentStage=a,b<3&&a>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),b<4&&a>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let a=this.runtimeStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let a=this.dynamicStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.dynamicStagePromise.resolve()}getStagePromise(a){switch(a){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},29574,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"connection",{enumerable:!0,get:function(){return j}});let d=a.r(56704),e=a.r(32319),f=a.r(60384),g=a.r(60312),h=a.r(13091),i=a.r(86309);function j(){let a=d.workAsyncStorage.getStore(),b=e.workUnitAsyncStorage.getStore();if(a){if(b&&"after"===b.phase&&!(0,i.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(a.forceStatic)return Promise.resolve(void 0);if(a.dynamicShouldError)throw Object.defineProperty(new g.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(b)switch(b.type){case"cache":{let b=Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"private-cache":{let b=Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,h.makeHangingPromise)(b.renderSignal,a.route,"`connection()`");case"prerender-ppr":return(0,f.postponeWithTracking)(a.route,"connection",b.dynamicTracking);case"prerender-legacy":return(0,f.throwToInterruptStaticGeneration)("connection",a,b);case"request":return(0,f.trackDynamicDataInDynamicRender)(b),Promise.resolve(void 0)}}(0,e.throwForMissingRequestStore)("connection")}a.r(31382)},43405,(a,b,c)=>{let d={NextRequest:a.r(88491).NextRequest,NextResponse:a.r(51978).NextResponse,ImageResponse:a.r(58176).ImageResponse,userAgentFromString:a.r(40881).userAgentFromString,userAgent:a.r(40881).userAgent,URLPattern:a.r(50792).URLPattern,after:a.r(89969).after,connection:a.r(29574).connection};b.exports=d,c.NextRequest=d.NextRequest,c.NextResponse=d.NextResponse,c.ImageResponse=d.ImageResponse,c.userAgentFromString=d.userAgentFromString,c.userAgent=d.userAgent,c.URLPattern=d.URLPattern,c.after=d.after,c.connection=d.connection},4712,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ActionDidNotRevalidate:function(){return f},ActionDidRevalidateDynamicOnly:function(){return h},ActionDidRevalidateStaticAndDynamic:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=1,h=2},14896,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={MutableRequestCookiesAdapter:function(){return o},ReadonlyRequestCookiesError:function(){return j},RequestCookiesAdapter:function(){return k},appendMutableCookies:function(){return n},areCookiesMutableInCurrentPhase:function(){return q},createCookiesWithMutableAccessCheck:function(){return p},getModifiedCookieValues:function(){return m},responseCookiesToRequestCookies:function(){return s}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63681),g=a.r(51409),h=a.r(56704),i=a.r(4712);class j extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new j}}class k{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return j.callable;default:return g.ReflectAdapter.get(a,b,c)}}})}}let l=Symbol.for("next.mutated.cookies");function m(a){let b=a[l];return b&&Array.isArray(b)&&0!==b.length?b:[]}function n(a,b){let c=m(b);if(0===c.length)return!1;let d=new f.ResponseCookies(a),e=d.getAll();for(let a of c)d.set(a);for(let a of e)d.set(a);return!0}class o{static wrap(a,b){let c=new f.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,j=()=>{let a=h.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=i.ActionDidRevalidateStaticAndDynamic),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new f.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case l:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return g.ReflectAdapter.get(a,b,c)}}});return k}}function p(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return r(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return r(a,"cookies().set"),c.set(...d),b};default:return g.ReflectAdapter.get(c,d,e)}}});return b}function q(a){return"action"===a.phase}function r(a,b){if(!q(a))throw new j}function s(a){let b=new f.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},8018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(a.r(717));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},81740,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cookies",{enumerable:!0,get:function(){return n}});let d=a.r(14896),e=a.r(63681),f=a.r(56704),g=a.r(32319),h=a.r(60384),i=a.r(60312),j=a.r(13091),k=a.r(8018),l=a.r(86309),m=a.r(50640);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a Client Component. Next.js should be preventing ${s} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,p(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}a.r(31382);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},29927,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HeadersAdapter:function(){return h},ReadonlyHeadersError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(51409);class g extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new g}}class h extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return f.ReflectAdapter.get(b,c,d);let e=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==g)return f.ReflectAdapter.get(b,g,d)},set(b,c,d,e){if("symbol"==typeof c)return f.ReflectAdapter.set(b,c,d,e);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return f.ReflectAdapter.set(b,h??c,d,e)},has(b,c){if("symbol"==typeof c)return f.ReflectAdapter.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&f.ReflectAdapter.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return f.ReflectAdapter.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||f.ReflectAdapter.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return g.callable;default:return f.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new h(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},35754,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"headers",{enumerable:!0,get:function(){return m}});let d=a.r(29927),e=a.r(56704),f=a.r(32319),g=a.r(60384),h=a.r(60312),i=a.r(13091),j=a.r(8018),k=a.r(86309),l=a.r(50640);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,g.delayUntilRuntimeStage)(c,o(c.headers));case"private-cache":return o(c.headers);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}a.r(31382);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},51125,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"draftMode",{enumerable:!0,get:function(){return k}});let d=a.r(32319),e=a.r(56704),f=a.r(60384),g=a.r(8018),h=a.r(60312),i=a.r(96556),j=a.r(50640);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c=n.get(a??m);return c||Promise.resolve(new o(a))}a.r(51409);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a Client Component. Next.js should be preventing ${d} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},5246,(a,b,c)=>{b.exports.cookies=a.r(81740).cookies,b.exports.headers=a.r(35754).headers,b.exports.draftMode=a.r(51125).draftMode},20916,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},21170,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28859,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(21170),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},44868,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(21170),g=a.r(28859),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},89798,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},16155,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(89798),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},34557,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(89798).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},93845,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(89798).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73808,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},1567,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(89798),e=a.r(28859);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},94783,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(13091),e=a.r(73808),f=a.r(49640),g=a.r(1567),h=a.r(60384),i=a.r(96556);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60968,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(94783).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73727,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20916),g=a.r(44868),h=a.r(28859),i=a.r(16155),j=a.r(34557),k=a.r(93845),l=a.r(60968);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40522,a=>{"use strict";let b,c,d,e,f,g;var h=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},i=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};function j(a){let b=a?"__Secure-":"";return{sessionToken:{name:`${b}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},callbackUrl:{name:`${b}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},csrfToken:{name:`${a?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},pkceCodeVerifier:{name:`${b}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},state:{name:`${b}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},nonce:{name:`${b}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},webauthnChallenge:{name:`${b}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}}}}class k{constructor(a,b,c){if(bO.add(this),bP.set(this,{}),bQ.set(this,void 0),bR.set(this,void 0),h(this,bR,c,"f"),h(this,bQ,a,"f"),!b)return;const{name:d}=a;for(const[a,c]of Object.entries(b))a.startsWith(d)&&c&&(i(this,bP,"f")[a]=c)}get value(){return Object.keys(i(this,bP,"f")).sort((a,b)=>parseInt(a.split(".").pop()||"0")-parseInt(b.split(".").pop()||"0")).map(a=>i(this,bP,"f")[a]).join("")}chunk(a,b){let c=i(this,bO,"m",bT).call(this);for(let d of i(this,bO,"m",bS).call(this,{name:i(this,bQ,"f").name,value:a,options:{...i(this,bQ,"f").options,...b}}))c[d.name]=d;return Object.values(c)}clean(){return Object.values(i(this,bO,"m",bT).call(this))}}bP=new WeakMap,bQ=new WeakMap,bR=new WeakMap,bO=new WeakSet,bS=function(a){let b=Math.ceil(a.value.length/3936);if(1===b)return i(this,bP,"f")[a.name]=a.value,[a];let c=[];for(let d=0;d<b;d++){let b=`${a.name}.${d}`,e=a.value.substr(3936*d,3936);c.push({...a,name:b,value:e}),i(this,bP,"f")[b]=e}return i(this,bR,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:a.value.length,chunks:c.map(a=>a.value.length+160)}),c},bT=function(){let a={};for(let b in i(this,bP,"f"))delete i(this,bP,"f")?.[b],a[b]={name:b,value:"",options:{...i(this,bQ,"f").options,maxAge:0}};return a};var l=a.i(77419);let m=!1;function n(a,b){try{return/^https?:/.test(new URL(a,a.startsWith("/")?b:void 0).protocol)}catch{return!1}}let o=!1,p=!1,q=!1,r=["createVerificationToken","useVerificationToken","getUserByEmail"],s=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],t=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];var u=a.i(54799);"function"!=typeof u.hkdf||process.versions.electron||(b=async(...a)=>new Promise((b,c)=>{u.hkdf(...a,(a,d)=>{a?c(a):b(new Uint8Array(d))})}));let v=async(a,c,d,e,f)=>(b||((a,b,c,d,e)=>{let f=parseInt(a.substr(3),10)>>3||20,g=(0,u.createHmac)(a,c.byteLength?c:new Uint8Array(f)).update(b).digest(),h=Math.ceil(e/f),i=new Uint8Array(f*h+d.byteLength+1),j=0,k=0;for(let b=1;b<=h;b++)i.set(d,k),i[k+d.byteLength]=b,i.set((0,u.createHmac)(a,g).update(i.subarray(j,k+d.byteLength+1)).digest(),k),j=k,k+=f;return i.slice(0,e)}))(a,c,d,e,f);function w(a,b){if("string"==typeof a)return new TextEncoder().encode(a);if(!(a instanceof Uint8Array))throw TypeError(`"${b}"" must be an instance of Uint8Array or a string`);return a}async function x(a,b,c,d,e){return v(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(a),function(a){let b=w(a,"ikm");if(!b.byteLength)throw TypeError('"ikm" must be at least one byte in length');return b}(b),w(c,"salt"),function(a){let b=w(a,"info");if(b.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return b}(d),function(a,b){if("number"!=typeof a||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(b.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(e,a))}let y=new TextEncoder,z=new TextDecoder;function A(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function B(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function C(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return B(c,b,0),B(c,a%0x100000000,4),c}function D(a){let b=new Uint8Array(4);return B(b,a),b}function E(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}function F(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:z.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=z.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function G(a){let b=a;return("string"==typeof b&&(b=y.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a.s(["decode",()=>F,"encode",()=>G],9634);let H=Symbol();class I extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class J extends I{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class K extends I{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class L extends I{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class M extends I{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class N extends I{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(a="decryption operation failed",b){super(a,b)}}class O extends I{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class P extends I{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class Q extends I{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class R extends I{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}function S(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new M(`Unsupported JWE Algorithm: ${a}`)}}function T(a,b){if(b.length<<3!==S(a))throw new O("Invalid Initialization Vector length")}function U(a,b){let c=a.byteLength<<3;if(c!==b)throw new O(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)}let V=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function W(a,b,c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==a.algorithm.name)throw V("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw V(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==a.algorithm.name)throw V("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw V(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":break;default:throw V("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==a.algorithm.name)throw V("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==a.algorithm.name)throw V("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(parseInt(a.algorithm.hash.name.slice(4),10)!==c)throw V(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}if(c&&!a.usages.includes(c))throw TypeError(`CryptoKey does not support this operation, its usages must include ${c}.`)}function X(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let Y=(a,...b)=>X("Key must be ",a,...b),Z=(a,b,...c)=>X(`Key for the ${a} algorithm must be `,b,...c);function $(a){if(!_(a))throw Error("CryptoKey instance expected")}let _=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},aa=a=>a?.[Symbol.toStringTag]==="KeyObject",ab=a=>_(a)||aa(a);async function ac(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError(Y(c,"Uint8Array"));let f=parseInt(a.slice(1,4),10),g=await crypto.subtle.importKey("raw",c.subarray(f>>3),"AES-CBC",!1,["encrypt"]),h=await crypto.subtle.importKey("raw",c.subarray(0,f>>3),{hash:`SHA-${f<<1}`,name:"HMAC"},!1,["sign"]),i=new Uint8Array(await crypto.subtle.encrypt({iv:d,name:"AES-CBC"},g,b)),j=A(e,d,i,C(e.length<<3));return{ciphertext:i,tag:new Uint8Array((await crypto.subtle.sign("HMAC",h,j)).slice(0,f>>3)),iv:d}}async function ad(a,b,c,d,e){let f;c instanceof Uint8Array?f=await crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):(W(c,a,"encrypt"),f=c);let g=new Uint8Array(await crypto.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},f,b)),h=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:h,iv:d}}async function ae(a,b,c,d,e){if(!_(c)&&!(c instanceof Uint8Array))throw TypeError(Y(c,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(d)T(a,d);else d=crypto.getRandomValues(new Uint8Array(S(a)>>3));switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&U(c,parseInt(a.slice(-3),10)),ac(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&U(c,parseInt(a.slice(1,4),10)),ad(a,b,c,d,e);default:throw new M("Unsupported JWE Content Encryption Algorithm")}}function af(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function ag(a,b,c){return a instanceof Uint8Array?crypto.subtle.importKey("raw",a,"AES-KW",!0,[c]):(W(a,b,c),a)}async function ah(a,b,c){let d=await ag(b,a,"wrapKey");af(d,a);let e=await crypto.subtle.importKey("raw",c,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",e,d,"AES-KW"))}async function ai(a,b,c){let d=await ag(b,a,"unwrapKey");af(d,a);let e=await crypto.subtle.unwrapKey("raw",c,d,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}async function aj(a,b){let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(c,b))}function ak(a){return A(D(a.length),a)}async function al(a,b,c){let d=b>>3,e=Math.ceil(d/32),f=new Uint8Array(32*e);for(let b=1;b<=e;b++){let d=new Uint8Array(4+a.length+c.length);d.set(D(b),0),d.set(a,4),d.set(c,4+a.length);let e=await aj("sha256",d);f.set(e,(b-1)*32)}return f.slice(0,d)}async function am(a,b,c,d,e=new Uint8Array,f=new Uint8Array){var g;W(a,"ECDH"),W(b,"ECDH","deriveBits");let h=A(ak(E(c)),ak(e),ak(f),D(d),new Uint8Array);return al(new Uint8Array(await crypto.subtle.deriveBits({name:a.algorithm.name,public:a},b,"X25519"===(g=a).algorithm.name?256:Math.ceil(parseInt(g.algorithm.namedCurve.slice(-3),10)/8)<<3)),d,h)}function an(a){switch(a.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===a.algorithm.name}}async function ao(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new O("PBES2 Salt Input must be 8 or more octets");let e=A(E(b),Uint8Array.of(0),a),f=parseInt(b.slice(13,16),10),g={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},h=await (d instanceof Uint8Array?crypto.subtle.importKey("raw",d,"PBKDF2",!1,["deriveBits"]):(W(d,b,"deriveBits"),d));return new Uint8Array(await crypto.subtle.deriveBits(g,h,f))}async function ap(a,b,c,d=2048,e=crypto.getRandomValues(new Uint8Array(16))){let f=await ao(e,a,d,b);return{encryptedKey:await ah(a.slice(-6),f,c),p2c:d,p2s:G(e)}}async function aq(a,b,c,d,e){let f=await ao(e,a,d,b);return ai(a.slice(-6),f,c)}function ar(a,b){if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}}let as=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new M(`alg ${a} is not supported either by JOSE or your javascript runtime`)}};async function at(a,b,c){return W(b,a,"encrypt"),ar(a,b),new Uint8Array(await crypto.subtle.encrypt(as(a),b,c))}async function au(a,b,c){return W(b,a,"decrypt"),ar(a,b),new Uint8Array(await crypto.subtle.decrypt(as(a),b,c))}function av(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}let aw=a=>av(a)&&"string"==typeof a.kty;async function ax(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new M('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}let ay=async(a,b,d,e=!1)=>{let f=(c||=new WeakMap).get(a);if(f?.[d])return f[d];let g=await ax({...b,alg:d});return e&&Object.freeze(a),f?f[d]=g:c.set(a,{[d]:g}),g};async function az(a,b){if(a instanceof Uint8Array||_(a))return a;if(aa(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let d,e=(c||=new WeakMap).get(a);if(e?.[b])return e[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}d=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");d=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");d=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let c;switch(b){case"RSA-OAEP":c="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":c="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":c="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":c="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:c},g,f?["encrypt"]:["decrypt"]);d=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:c},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let c=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===c&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:c},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===c&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:c},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===c&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:c},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(d=a.toCryptoKey({name:"ECDH",namedCurve:c},g,f?[]:["deriveBits"]))}if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[b]=d:c.set(a,{[b]:d}),d})(a,b)}catch(a){if(a instanceof TypeError)throw a}let d=a.export({format:"jwk"});return ay(a,d,b)}if(aw(a))return a.k?F(a.k):ay(a,a,b,!0);throw Error("unreachable")}function aA(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new M(`Unsupported JWE Algorithm: ${a}`)}}let aB=a=>crypto.getRandomValues(new Uint8Array(aA(a)>>3));async function aC(a){if(aa(a))if("secret"!==a.type)return a.export({format:"jwk"});else a=a.export();if(a instanceof Uint8Array)return{kty:"oct",k:G(a)};if(!_(a))throw TypeError(Y(a,"CryptoKey","KeyObject","Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...f}=await crypto.subtle.exportKey("jwk",a);return"AKP"===f.kty&&(f.alg=d),f}async function aD(a){return aC(a)}async function aE(a,b){if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let c={name:"HMAC",hash:"SHA-256"},d=await crypto.subtle.generateKey(c,!1,["sign"]),e=new Uint8Array(await crypto.subtle.sign(c,d,a)),f=new Uint8Array(await crypto.subtle.sign(c,d,b)),g=0,h=-1;for(;++h<32;)g|=e[h]^f[h];return 0===g}async function aF(a,b,c,d,e,f){let g,h;if(!(b instanceof Uint8Array))throw TypeError(Y(b,"Uint8Array"));let i=parseInt(a.slice(1,4),10),j=await crypto.subtle.importKey("raw",b.subarray(i>>3),"AES-CBC",!1,["decrypt"]),k=await crypto.subtle.importKey("raw",b.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=A(f,d,c,C(f.length<<3)),m=new Uint8Array((await crypto.subtle.sign("HMAC",k,l)).slice(0,i>>3));try{g=await aE(e,m)}catch{}if(!g)throw new N;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:d,name:"AES-CBC"},j,c))}catch{}if(!h)throw new N;return h}async function aG(a,b,c,d,e,f){let g;b instanceof Uint8Array?g=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):(W(b,a,"decrypt"),g=b);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:f,iv:d,name:"AES-GCM",tagLength:128},g,A(c,e)))}catch{throw new N}}async function aH(a,b,c,d,e,f){if(!_(b)&&!(b instanceof Uint8Array))throw TypeError(Y(b,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!d)throw new O("JWE Initialization Vector missing");if(!e)throw new O("JWE Authentication Tag missing");switch(T(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&U(b,parseInt(a.slice(-3),10)),aF(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&U(b,parseInt(a.slice(1,4),10)),aG(a,b,c,d,e,f);default:throw new M("Unsupported JWE Content Encryption Algorithm")}}async function aI(a,b,c,d){let e=a.slice(0,7),f=await ae(e,c,b,d,new Uint8Array);return{encryptedKey:f.ciphertext,iv:G(f.iv),tag:G(f.tag)}}async function aJ(a,b,c,d,e){return aH(a.slice(0,7),b,c,d,e,new Uint8Array)}async function aK(a,b,c,d,e={}){let f,g,h;switch(a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i;if($(c),!an(c))throw new M("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:j,apv:k}=e;i=e.epk?await az(e.epk,a):(await crypto.subtle.generateKey(c.algorithm,!0,["deriveBits"])).privateKey;let{x:l,y:m,crv:n,kty:o}=await aD(i),p=await am(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?aA(b):parseInt(a.slice(-5,-2),10),j,k);if(g={epk:{x:l,crv:n,kty:o}},"EC"===o&&(g.epk.y=m),j&&(g.apu=G(j)),k&&(g.apv=G(k)),"ECDH-ES"===a){h=p;break}h=d||aB(b);let q=a.slice(-6);f=await ah(q,p,h);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||aB(b),$(c),f=await at(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||aB(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await ap(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||aB(b),f=await ah(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||aB(b);let{iv:i}=e;({encryptedKey:f,...g}=await aI(a,c,h,i));break}default:throw new M('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}function aL(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}function aM(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new M(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)}let aN=a=>a?.[Symbol.toStringTag],aO=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0};function aP(a,b,c){switch(a.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(aw(b)){if("oct"===b.kty&&"string"==typeof b.k&&aO(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!ab(b))throw TypeError(Z(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${aN(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c);break;default:((a,b,c)=>{if(aw(b))switch(c){case"decrypt":case"sign":if("oct"!==b.kty&&("AKP"===b.kty&&"string"==typeof b.priv||"string"==typeof b.d)&&aO(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==b.kty&&void 0===b.d&&void 0===b.priv&&aO(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!ab(b))throw TypeError(Z(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${aN(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${aN(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${aN(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${aN(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${aN(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)}}class aQ{#a;#b;#c;#d;#e;#f;#g;#h;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#a=a}setKeyManagementParameters(a){if(this.#h)throw TypeError("setKeyManagementParameters can only be called once");return this.#h=a,this}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setSharedUnprotectedHeader(a){if(this.#c)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#c=a,this}setUnprotectedHeader(a){if(this.#d)throw TypeError("setUnprotectedHeader can only be called once");return this.#d=a,this}setAdditionalAuthenticatedData(a){return this.#e=a,this}setContentEncryptionKey(a){if(this.#f)throw TypeError("setContentEncryptionKey can only be called once");return this.#f=a,this}setInitializationVector(a){if(this.#g)throw TypeError("setInitializationVector can only be called once");return this.#g=a,this}async encrypt(a,b){let c,d,e,f,g,h;if(!this.#b&&!this.#d&&!this.#c)throw new O("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!aL(this.#b,this.#d,this.#c))throw new O("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#b,...this.#d,...this.#c};if(aM(O,new Map,b?.crit,this.#b,i),void 0!==i.zip)throw new M('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:j,enc:k}=i;if("string"!=typeof j||!j)throw new O('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof k||!k)throw new O('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#f&&("dir"===j||"ECDH-ES"===j))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${j}`);aP("dir"===j?k:j,a,"encrypt");{let e,f=await az(a,j);({cek:d,encryptedKey:c,parameters:e}=await aK(j,k,f,this.#f,this.#h)),e&&(b&&H in b?this.#d?this.#d={...this.#d,...e}:this.setUnprotectedHeader(e):this.#b?this.#b={...this.#b,...e}:this.setProtectedHeader(e))}if(this.#b?g=E(f=G(JSON.stringify(this.#b))):(f="",g=new Uint8Array),this.#e){let a=E(h=G(this.#e));e=A(g,E("."),a)}else e=g;let{ciphertext:l,tag:m,iv:n}=await ae(k,this.#a,d,this.#g,e),o={ciphertext:G(l)};return n&&(o.iv=G(n)),m&&(o.tag=G(m)),c&&(o.encrypted_key=G(c)),h&&(o.aad=h),this.#b&&(o.protected=f),this.#c&&(o.unprotected=this.#c),this.#d&&(o.header=this.#d),o}}class aR{#i;constructor(a){this.#i=new aQ(a)}setContentEncryptionKey(a){return this.#i.setContentEncryptionKey(a),this}setInitializationVector(a){return this.#i.setInitializationVector(a),this}setProtectedHeader(a){return this.#i.setProtectedHeader(a),this}setKeyManagementParameters(a){return this.#i.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this.#i.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}let aS=a=>Math.floor(a.getTime()/1e3),aT=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function aU(a){let b,c=aT.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}function aV(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let aW=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;class aX{#j;constructor(a){if(!av(a))throw TypeError("JWT Claims Set MUST be an object");this.#j=structuredClone(a)}data(){return y.encode(JSON.stringify(this.#j))}get iss(){return this.#j.iss}set iss(a){this.#j.iss=a}get sub(){return this.#j.sub}set sub(a){this.#j.sub=a}get aud(){return this.#j.aud}set aud(a){this.#j.aud=a}set jti(a){this.#j.jti=a}set nbf(a){"number"==typeof a?this.#j.nbf=aV("setNotBefore",a):a instanceof Date?this.#j.nbf=aV("setNotBefore",aS(a)):this.#j.nbf=aS(new Date)+aU(a)}set exp(a){"number"==typeof a?this.#j.exp=aV("setExpirationTime",a):a instanceof Date?this.#j.exp=aV("setExpirationTime",aS(a)):this.#j.exp=aS(new Date)+aU(a)}set iat(a){void 0===a?this.#j.iat=aS(new Date):a instanceof Date?this.#j.iat=aV("setIssuedAt",aS(a)):"string"==typeof a?this.#j.iat=aV("setIssuedAt",aS(new Date)+aU(a)):this.#j.iat=aV("setIssuedAt",a)}}class aY{#f;#g;#h;#b;#k;#l;#m;#n;constructor(a={}){this.#n=new aX(a)}setIssuer(a){return this.#n.iss=a,this}setSubject(a){return this.#n.sub=a,this}setAudience(a){return this.#n.aud=a,this}setJti(a){return this.#n.jti=a,this}setNotBefore(a){return this.#n.nbf=a,this}setExpirationTime(a){return this.#n.exp=a,this}setIssuedAt(a){return this.#n.iat=a,this}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setKeyManagementParameters(a){if(this.#h)throw TypeError("setKeyManagementParameters can only be called once");return this.#h=a,this}setContentEncryptionKey(a){if(this.#f)throw TypeError("setContentEncryptionKey can only be called once");return this.#f=a,this}setInitializationVector(a){if(this.#g)throw TypeError("setInitializationVector can only be called once");return this.#g=a,this}replicateIssuerAsHeader(){return this.#k=!0,this}replicateSubjectAsHeader(){return this.#l=!0,this}replicateAudienceAsHeader(){return this.#m=!0,this}async encrypt(a,b){let c=new aR(this.#n.data());return this.#b&&(this.#k||this.#l||this.#m)&&(this.#b={...this.#b,iss:this.#k?this.#n.iss:void 0,sub:this.#l?this.#n.sub:void 0,aud:this.#m?this.#n.aud:void 0}),c.setProtectedHeader(this.#b),this.#g&&c.setInitializationVector(this.#g),this.#f&&c.setContentEncryptionKey(this.#f),this.#h&&c.setKeyManagementParameters(this.#h),c.encrypt(a,b)}}var aZ=a.i(9634),aZ=aZ;let a$=(a,b)=>{if("string"!=typeof a||!a)throw new Q(`${b} missing or invalid`)};async function a_(a,b){let c,d;if(aw(a))c=a;else if(ab(a))c=await aD(a);else throw TypeError(Y(a,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(c.kty){case"AKP":a$(c.alg,'"alg" (Algorithm) Parameter'),a$(c.pub,'"pub" (Public key) Parameter'),d={alg:c.alg,kty:c.kty,pub:c.pub};break;case"EC":a$(c.crv,'"crv" (Curve) Parameter'),a$(c.x,'"x" (X Coordinate) Parameter'),a$(c.y,'"y" (Y Coordinate) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x,y:c.y};break;case"OKP":a$(c.crv,'"crv" (Subtype of Key Pair) Parameter'),a$(c.x,'"x" (Public Key) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x};break;case"RSA":a$(c.e,'"e" (Exponent) Parameter'),a$(c.n,'"n" (Modulus) Parameter'),d={e:c.e,kty:c.kty,n:c.n};break;case"oct":a$(c.k,'"k" (Key Value) Parameter'),d={k:c.k,kty:c.kty};break;default:throw new M('"kty" (Key Type) Parameter missing or unsupported')}let e=E(JSON.stringify(d));return G(await aj(b,e))}async function a0(a,b,c){let d;if(!av(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return F(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new M('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return ax({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return ax({...a,ext:d});case"EC":case"OKP":return ax({...a,alg:b,ext:d});default:throw new M('Unsupported "kty" (Key Type) Parameter value')}}async function a1(a,b,c,d,e){switch(a){case"dir":if(void 0!==c)throw new O("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new O("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!av(d.epk))throw new O('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if($(b),!an(b))throw new M("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await a0(d.epk,a);if($(g),void 0!==d.apu){if("string"!=typeof d.apu)throw new O('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=F(d.apu)}catch{throw new O("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new O('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=F(d.apv)}catch{throw new O("Failed to base64url decode the apv")}}let h=await am(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?aA(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new O("JWE Encrypted Key missing");return ai(a.slice(-6),h,c)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new O("JWE Encrypted Key missing");return $(b),au(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new O("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new O('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=e?.maxPBES2Count||1e4;if(d.p2c>g)throw new O('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new O('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=F(d.p2s)}catch{throw new O("Failed to base64url decode the p2s")}return aq(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new O("JWE Encrypted Key missing");return ai(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new O("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new O('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new O('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=F(d.iv)}catch{throw new O("Failed to base64url decode the iv")}try{f=F(d.tag)}catch{throw new O("Failed to base64url decode the tag")}return aJ(a,b,c,e,f)}default:throw new M('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function a2(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}async function a3(a,b,c){let d,e,f,g,h,i,j;if(!av(a))throw new O("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new O("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new O("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new O("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new O("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new O("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new O("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new O("JWE AAD incorrect type");if(void 0!==a.header&&!av(a.header))throw new O("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!av(a.unprotected))throw new O("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=F(a.protected);d=JSON.parse(z.decode(b))}catch{throw new O("JWE Protected Header is invalid")}if(!aL(d,a.header,a.unprotected))throw new O("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let k={...d,...a.header,...a.unprotected};if(aM(O,new Map,c?.crit,d,k),void 0!==k.zip)throw new M('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:l,enc:m}=k;if("string"!=typeof l||!l)throw new O("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof m||!m)throw new O("missing JWE Encryption Algorithm (enc) in JWE Header");let n=c&&a2("keyManagementAlgorithms",c.keyManagementAlgorithms),o=c&&a2("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(n&&!n.has(l)||!n&&l.startsWith("PBES2"))throw new L('"alg" (Algorithm) Header Parameter value not allowed');if(o&&!o.has(m))throw new L('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{e=F(a.encrypted_key)}catch{throw new O("Failed to base64url decode the encrypted_key")}let p=!1;"function"==typeof b&&(b=await b(d,a),p=!0),aP("dir"===l?m:l,b,"decrypt");let q=await az(b,l);try{f=await a1(l,q,e,k,c)}catch(a){if(a instanceof TypeError||a instanceof O||a instanceof M)throw a;f=aB(m)}if(void 0!==a.iv)try{g=F(a.iv)}catch{throw new O("Failed to base64url decode the iv")}if(void 0!==a.tag)try{h=F(a.tag)}catch{throw new O("Failed to base64url decode the tag")}let r=void 0!==a.protected?E(a.protected):new Uint8Array;i=void 0!==a.aad?A(r,E("."),E(a.aad)):r;try{j=F(a.ciphertext)}catch{throw new O("Failed to base64url decode the ciphertext")}let s={plaintext:await aH(m,f,j,g,h,i)};if(void 0!==a.protected&&(s.protectedHeader=d),void 0!==a.aad)try{s.additionalAuthenticatedData=F(a.aad)}catch{throw new O("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(s.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(s.unprotectedHeader=a.header),p)?{...s,key:q}:s}async function a4(a,b,c){if(a instanceof Uint8Array&&(a=z.decode(a)),"string"!=typeof a)throw new O("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:i}=a.split(".");if(5!==i)throw new O("Invalid Compact JWE");let j=await a3({ciphertext:g,iv:f||void 0,protected:d,tag:h||void 0,encrypted_key:e||void 0},b,c),k={plaintext:j.plaintext,protectedHeader:j.protectedHeader};return"function"==typeof b?{...k,key:j.key}:k}async function a5(a,b,c){let d=await a4(a,b,c),e=function(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(z.decode(b))}catch{}if(!av(f))throw new P("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||aW(a.typ)!==aW(h)))throw new J('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new J(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new J('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new J('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new J('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=aU(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=aS(o||new Date);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new J('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new J('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new J('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new J('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new K('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:aU(m)))throw new K('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new J('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new J('replicated "iss" claim header parameter mismatch',e,"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new J('replicated "sub" claim header parameter mismatch',e,"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new J('replicated "aud" claim header parameter mismatch',e,"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}let a6=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,a7=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,a8=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a9=/^[\u0020-\u003A\u003D-\u007E]*$/,ba=Object.prototype.toString,bb=((g=function(){}).prototype=Object.create(null),g);function bc(a,b){let c=new bb,d=a.length;if(d<2)return c;let e=b?.decode||bg,f=0;do{let b=a.indexOf("=",f);if(-1===b)break;let g=a.indexOf(";",f),h=-1===g?d:g;if(b>h){f=a.lastIndexOf(";",b-1)+1;continue}let i=bd(a,f,b),j=be(a,b,i),k=a.slice(i,j);if(void 0===c[k]){let d=bd(a,b+1,h),f=be(a,h,d),g=e(a.slice(d,f));c[k]=g}f=h+1}while(f<d)return c}function bd(a,b,c){do{let c=a.charCodeAt(b);if(32!==c&&9!==c)return b}while(++b<c)return c}function be(a,b,c){for(;b>c;){let c=a.charCodeAt(--b);if(32!==c&&9!==c)return b+1}return c}function bf(a,b,c){let d=c?.encode||encodeURIComponent;if(!a6.test(a))throw TypeError(`argument name is invalid: ${a}`);let e=d(b);if(!a7.test(e))throw TypeError(`argument val is invalid: ${b}`);let f=a+"="+e;if(!c)return f;if(void 0!==c.maxAge){if(!Number.isInteger(c.maxAge))throw TypeError(`option maxAge is invalid: ${c.maxAge}`);f+="; Max-Age="+c.maxAge}if(c.domain){if(!a8.test(c.domain))throw TypeError(`option domain is invalid: ${c.domain}`);f+="; Domain="+c.domain}if(c.path){if(!a9.test(c.path))throw TypeError(`option path is invalid: ${c.path}`);f+="; Path="+c.path}if(c.expires){var g;if(g=c.expires,"[object Date]"!==ba.call(g)||!Number.isFinite(c.expires.valueOf()))throw TypeError(`option expires is invalid: ${c.expires}`);f+="; Expires="+c.expires.toUTCString()}if(c.httpOnly&&(f+="; HttpOnly"),c.secure&&(f+="; Secure"),c.partitioned&&(f+="; Partitioned"),c.priority)switch("string"==typeof c.priority?c.priority.toLowerCase():void 0){case"low":f+="; Priority=Low";break;case"medium":f+="; Priority=Medium";break;case"high":f+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${c.priority}`)}if(c.sameSite)switch("string"==typeof c.sameSite?c.sameSite.toLowerCase():c.sameSite){case!0:case"strict":f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"none":f+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${c.sameSite}`)}return f}function bg(a){if(-1===a.indexOf("%"))return a;try{return decodeURIComponent(a)}catch(b){return a}}a.s(["parse",()=>bc,"serialize",()=>bf],63805);var bh=a.i(63805);let{parse:bi}=bh,bj="A256CBC-HS512";async function bk(a){let{token:b={},secret:c,maxAge:d=2592e3,salt:e}=a,f=Array.isArray(c)?c:[c],g=await bm(bj,f[0],e),h=await a_({kty:"oct",k:aZ.encode(g)},`sha${g.byteLength<<3}`);return await new aY(b).setProtectedHeader({alg:"dir",enc:bj,kid:h}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti(crypto.randomUUID()).encrypt(g)}async function bl(a){let{token:b,secret:c,salt:d}=a,e=Array.isArray(c)?c:[c];if(!b)return null;let{payload:f}=await a5(b,async({kid:a,enc:b})=>{for(let c of e){let e=await bm(b,c,d);if(void 0===a||a===await a_({kty:"oct",k:aZ.encode(e)},`sha${e.byteLength<<3}`))return e}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[bj,"A256GCM"]});return f}async function bm(a,b,c){let d;switch(a){case"A256CBC-HS512":d=64;break;case"A256GCM":d=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await x("sha256",b,c,`Auth.js Generated Encryption Key (${c})`,d)}async function bn({options:a,paramValue:b,cookieValue:c}){let{url:d,callbacks:e}=a,f=d.origin;return b?f=await e.redirect({url:b,baseUrl:d.origin}):c&&(f=await e.redirect({url:c,baseUrl:d.origin})),{callbackUrl:f,callbackUrlCookie:f!==c?f:void 0}}let bo="\x1b[31m",bp="\x1b[0m",bq={error(a){let b=a instanceof l.AuthError?a.type:a.name;if(console.error(`${bo}[auth][error]${bp} ${b}: ${a.message}`),a.cause&&"object"==typeof a.cause&&"err"in a.cause&&a.cause.err instanceof Error){let{err:b,...c}=a.cause;console.error(`${bo}[auth][cause]${bp}:`,b.stack),c&&console.error(`${bo}[auth][details]${bp}:`,JSON.stringify(c,null,2))}else a.stack&&console.error(a.stack.replace(/.*/,"").substring(1))},warn(a){console.warn(`\x1b[33m[auth][warn][${a}]${bp}`,"Read more: https://warnings.authjs.dev")},debug(a,b){console.log(`\x1b[90m[auth][debug]:${bp} ${a}`,JSON.stringify(b,null,2))}};function br(a){let b={...bq};return a.debug||(b.debug=()=>{}),a.logger?.error&&(b.error=a.logger.error),a.logger?.warn&&(b.warn=a.logger.warn),a.logger?.debug&&(b.debug=a.logger.debug),a.logger??(a.logger=b),b}let bs=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{parse:bt,serialize:bu}=bh;async function bv(a){if(!("body"in a)||!a.body||"POST"!==a.method)return;let b=a.headers.get("content-type");return b?.includes("application/json")?await a.json():b?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await a.text())):void 0}async function bw(a,b){try{if("GET"!==a.method&&"POST"!==a.method)throw new l.UnknownAction("Only GET and POST requests are supported");b.basePath??(b.basePath="/auth");let c=new URL(a.url),{action:d,providerId:e}=function(a,b){let c=a.match(RegExp(`^${b}(.+)`));if(null===c)throw new l.UnknownAction(`Cannot parse action at ${a}`);let d=c.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==d.length&&2!==d.length)throw new l.UnknownAction(`Cannot parse action at ${a}`);let[e,f]=d;if(!bs.includes(e)||f&&!["signin","callback","webauthn-options"].includes(e))throw new l.UnknownAction(`Cannot parse action at ${a}`);return{action:e,providerId:"undefined"==f?void 0:f}}(c.pathname,b.basePath);return{url:c,action:d,providerId:e,method:a.method,headers:Object.fromEntries(a.headers),body:a.body?await bv(a):void 0,cookies:bt(a.headers.get("cookie")??"")??{},error:c.searchParams.get("error")??void 0,query:Object.fromEntries(c.searchParams)}}catch(d){let c=br(b);c.error(d),c.debug("request",a)}}function bx(a){let b=new Headers(a.headers);a.cookies?.forEach(a=>{let{name:c,value:d,options:e}=a,f=bu(c,d,e);b.has("Set-Cookie")?b.append("Set-Cookie",f):b.set("Set-Cookie",f)});let c=a.body;"application/json"===b.get("content-type")?c=JSON.stringify(a.body):"application/x-www-form-urlencoded"===b.get("content-type")&&(c=new URLSearchParams(a.body).toString());let d=new Response(c,{headers:b,status:a.redirect?302:a.status??200});return a.redirect&&d.headers.set("Location",a.redirect),d}async function by(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>a.toString(16).padStart(2,"0")).join("").toString()}function bz(a){return Array.from(crypto.getRandomValues(new Uint8Array(a))).reduce((a,b)=>a+("0"+b.toString(16)).slice(-2),"")}async function bA({options:a,cookieValue:b,isPost:c,bodyValue:d}){if(b){let[e,f]=b.split("|");if(f===await by(`${e}${a.secret}`))return{csrfTokenVerified:c&&e===d,csrfToken:e}}let e=bz(32),f=await by(`${e}${a.secret}`);return{cookie:`${e}|${f}`,csrfToken:e}}function bB(a,b){if(!b)throw new l.MissingCSRF(`CSRF token was missing during an action ${a}`)}function bC(a){return null!==a&&"object"==typeof a}function bD(a,...b){if(!b.length)return a;let c=b.shift();if(bC(a)&&bC(c))for(let b in c)bC(c[b])?(bC(a[b])||(a[b]=Array.isArray(c[b])?[]:{}),bD(a[b],c[b])):void 0!==c[b]&&(a[b]=c[b]);return bD(a,...b)}let bE=Symbol("skip-csrf-check"),bF=Symbol("return-type-raw"),bG=Symbol("custom-fetch"),bH=Symbol("conform-internal"),bI=a=>bK({id:a.sub??a.id??crypto.randomUUID(),name:a.name??a.nickname??a.preferred_username,email:a.email,image:a.picture}),bJ=a=>bK({access_token:a.access_token,id_token:a.id_token,refresh_token:a.refresh_token,expires_at:a.expires_at,scope:a.scope,token_type:a.token_type,session_state:a.session_state});function bK(a){let b={};for(let[c,d]of Object.entries(a))void 0!==d&&(b[c]=d);return b}function bL(a,b){if(!a&&b)return;if("string"==typeof a)return{url:new URL(a)};let c=new URL(a?.url??"https://authjs.dev");if(a?.params!=null)for(let[b,d]of Object.entries(a.params))"claims"===b&&(d=JSON.stringify(d)),c.searchParams.set(b,String(d));return{url:c,request:a?.request,conform:a?.conform,...a?.clientPrivateKey?{clientPrivateKey:a?.clientPrivateKey}:null}}let bM={signIn:()=>!0,redirect:({url:a,baseUrl:b})=>a.startsWith("/")?`${b}${a}`:new URL(a).origin===b?a:b,session:({session:a})=>({user:{name:a.user?.name,email:a.user?.email,image:a.user?.image},expires:a.expires?.toISOString?.()??a.expires}),jwt:({token:a})=>a};async function bN({authOptions:a,providerId:b,action:c,url:d,cookies:e,callbackUrl:f,csrfToken:g,csrfDisabled:h,isPost:i}){var k,m;let n=br(a),{providers:o,provider:p}=function(a){let{providerId:b,config:c}=a,d=new URL(c.basePath??"/auth",a.url.origin),e=c.providers.map(a=>{let b="function"==typeof a?a():a,{options:e,...f}=b,g=e?.id??f.id,h=bD(f,e,{signinUrl:`${d}/signin/${g}`,callbackUrl:`${d}/callback/${g}`});if("oauth"===b.type||"oidc"===b.type){var i;let a,b,d,f;h.redirectProxyUrl??(h.redirectProxyUrl=e?.redirectProxyUrl??c.redirectProxyUrl);let g=((i=h).issuer&&(i.wellKnown??(i.wellKnown=`${i.issuer}/.well-known/openid-configuration`)),(a=bL(i.authorization,i.issuer))&&!a.url?.searchParams.has("scope")&&a.url.searchParams.set("scope","openid profile email"),b=bL(i.token,i.issuer),d=bL(i.userinfo,i.issuer),f=i.checks??["pkce"],i.redirectProxyUrl&&(f.includes("state")||f.push("state"),i.redirectProxyUrl=`${i.redirectProxyUrl}/callback/${i.id}`),{...i,authorization:a,token:b,checks:f,userinfo:d,profile:i.profile??bI,account:i.account??bJ});return g.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete g.redirectProxyUrl,g[bG]??(g[bG]=e?.[bG]),g}return h}),f=e.find(({id:a})=>a===b);if(b&&!f){let a=e.map(a=>a.id).join(", ");throw Error(`Provider with id "${b}" not found. Available providers: [${a}].`)}return{providers:e,provider:f}}({url:d,providerId:b,config:a}),q=!1;if((p?.type==="oauth"||p?.type==="oidc")&&p.redirectProxyUrl)try{q=new URL(p.redirectProxyUrl).origin===d.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${p.redirectProxyUrl}`)}let r={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...a,url:d,action:c,provider:p,cookies:bD(j(a.useSecureCookies??"https:"===d.protocol),a.cookies),providers:o,session:{strategy:a.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...a.session},jwt:{secret:a.secret,maxAge:a.session?.maxAge??2592e3,encode:bk,decode:bl,...a.jwt},events:(k=a.events??{},m=n,Object.keys(k).reduce((a,b)=>(a[b]=async(...a)=>{try{let c=k[b];return await c(...a)}catch(a){m.error(new l.EventError(a))}},a),{})),adapter:function(a,b){if(a)return Object.keys(a).reduce((c,d)=>(c[d]=async(...c)=>{try{b.debug(`adapter_${d}`,{args:c});let e=a[d];return await e(...c)}catch(c){let a=new l.AdapterError(c);throw b.error(a),a}},c),{})}(a.adapter,n),callbacks:{...bM,...a.callbacks},logger:n,callbackUrl:d.origin,isOnRedirectProxy:q,experimental:{...a.experimental}},s=[];if(h)r.csrfTokenVerified=!0;else{let{csrfToken:a,cookie:b,csrfTokenVerified:c}=await bA({options:r,cookieValue:e?.[r.cookies.csrfToken.name],isPost:i,bodyValue:g});r.csrfToken=a,r.csrfTokenVerified=c,b&&s.push({name:r.cookies.csrfToken.name,value:b,options:r.cookies.csrfToken.options})}let{callbackUrl:t,callbackUrlCookie:u}=await bn({options:r,cookieValue:e?.[r.cookies.callbackUrl.name],paramValue:f});return r.callbackUrl=t,u&&s.push({name:r.cookies.callbackUrl.name,value:u,options:r.cookies.callbackUrl.options}),{options:r,cookies:s}}var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b$,b_,b0,b1,b2={},b3=[],b4=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,b5=Array.isArray;function b6(a,b){for(var c in b)a[c]=b[c];return a}function b7(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function b8(a,b,c,d,e){var f={type:a,props:b,key:c,ref:d,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==e?++bW:e,__i:-1,__u:0};return null==e&&null!=bV.vnode&&bV.vnode(f),f}function b9(a){return a.children}function ca(a,b){this.props=a,this.context=b}function cb(a,b){if(null==b)return a.__?cb(a.__,a.__i+1):null;for(var c;b<a.__k.length;b++)if(null!=(c=a.__k[b])&&null!=c.__e)return c.__e;return"function"==typeof a.type?cb(a):null}function cc(a){(!a.__d&&(a.__d=!0)&&bX.push(a)&&!cd.__r++||bY!==bV.debounceRendering)&&((bY=bV.debounceRendering)||bZ)(cd)}function cd(){var a,b,c,d,e,f,g,h;for(bX.sort(b$);a=bX.shift();)a.__d&&(b=bX.length,d=void 0,f=(e=(c=a).__v).__e,g=[],h=[],c.__P&&((d=b6({},e)).__v=e.__v+1,bV.vnode&&bV.vnode(d),ci(c.__P,d,e,c.__n,c.__P.namespaceURI,32&e.__u?[f]:null,g,null==f?cb(e):f,!!(32&e.__u),h),d.__v=e.__v,d.__.__k[d.__i]=d,function(a,b,c){b.__d=void 0;for(var d=0;d<c.length;d++)cj(c[d],c[++d],c[++d]);bV.__c&&bV.__c(b,a),a.some(function(b){try{a=b.__h,b.__h=[],a.some(function(a){a.call(b)})}catch(a){bV.__e(a,b.__v)}})}(g,d,h),d.__e!=f&&function a(b){var c,d;if(null!=(b=b.__)&&null!=b.__c){for(b.__e=b.__c.base=null,c=0;c<b.__k.length;c++)if(null!=(d=b.__k[c])&&null!=d.__e){b.__e=b.__c.base=d.__e;break}return a(b)}}(d)),bX.length>b&&bX.sort(b$));cd.__r=0}function ce(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q=d&&d.__k||b3,r=b.length;for(c.__d=i,function(a,b,c){var d,e,f,g,h,i=b.length,j=c.length,k=j,l=0;for(a.__k=[],d=0;d<i;d++)null!=(e=b[d])&&"boolean"!=typeof e&&"function"!=typeof e?(g=d+l,(e=a.__k[d]="string"==typeof e||"number"==typeof e||"bigint"==typeof e||e.constructor==String?b8(null,e,null,null,null):b5(e)?b8(b9,{children:e},null,null,null):void 0===e.constructor&&e.__b>0?b8(e.type,e.props,e.key,e.ref?e.ref:null,e.__v):e).__=a,e.__b=a.__b+1,f=null,-1!==(h=e.__i=function(a,b,c,d){var e=a.key,f=a.type,g=c-1,h=c+1,i=b[c];if(null===i||i&&e==i.key&&f===i.type&&0==(131072&i.__u))return c;if(d>+(null!=i&&0==(131072&i.__u)))for(;g>=0||h<b.length;){if(g>=0){if((i=b[g])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return g;g--}if(h<b.length){if((i=b[h])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return h;h++}}return -1}(e,c,g,k))&&(k--,(f=c[h])&&(f.__u|=131072)),null==f||null===f.__v?(-1==h&&l--,"function"!=typeof e.type&&(e.__u|=65536)):h!==g&&(h==g-1?l--:h==g+1?l++:(h>g?l--:l++,e.__u|=65536))):e=a.__k[d]=null;if(k)for(d=0;d<j;d++)null!=(f=c[d])&&0==(131072&f.__u)&&(f.__e==a.__d&&(a.__d=cb(f)),function a(b,c,d){var e,f;if(bV.unmount&&bV.unmount(b),(e=b.ref)&&(e.current&&e.current!==b.__e||cj(e,null,c)),null!=(e=b.__c)){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(a){bV.__e(a,c)}e.base=e.__P=null}if(e=b.__k)for(f=0;f<e.length;f++)e[f]&&a(e[f],c,d||"function"!=typeof b.type);d||b7(b.__e),b.__c=b.__=b.__e=b.__d=void 0}(f,f))}(c,b,q),i=c.__d,l=0;l<r;l++)null!=(n=c.__k[l])&&(m=-1===n.__i?b2:q[n.__i]||b2,n.__i=l,ci(a,n,m,e,f,g,h,i,j,k),o=n.__e,n.ref&&m.ref!=n.ref&&(m.ref&&cj(m.ref,null,n),k.push(n.ref,n.__c||o,n)),null==p&&null!=o&&(p=o),65536&n.__u||m.__k===n.__k?i=function a(b,c,d){var e,f;if("function"==typeof b.type){for(e=b.__k,f=0;e&&f<e.length;f++)e[f]&&(e[f].__=b,c=a(e[f],c,d));return c}b.__e!=c&&(c&&b.type&&!d.contains(c)&&(c=cb(b)),d.insertBefore(b.__e,c||null),c=b.__e);do c=c&&c.nextSibling;while(null!=c&&8===c.nodeType)return c}(n,i,a):"function"==typeof n.type&&void 0!==n.__d?i=n.__d:o&&(i=o.nextSibling),n.__d=void 0,n.__u&=-196609);c.__d=i,c.__e=p}function cf(a,b,c){"-"===b[0]?a.setProperty(b,null==c?"":c):a[b]=null==c?"":"number"!=typeof c||b4.test(b)?c:c+"px"}function cg(a,b,c,d,e){var f;a:if("style"===b)if("string"==typeof c)a.style.cssText=c;else{if("string"==typeof d&&(a.style.cssText=d=""),d)for(b in d)c&&b in c||cf(a.style,b,"");if(c)for(b in c)d&&c[b]===d[b]||cf(a.style,b,c[b])}else if("o"===b[0]&&"n"===b[1])f=b!==(b=b.replace(/(PointerCapture)$|Capture$/i,"$1")),b=b.toLowerCase()in a||"onFocusOut"===b||"onFocusIn"===b?b.toLowerCase().slice(2):b.slice(2),a.l||(a.l={}),a.l[b+f]=c,c?d?c.u=d.u:(c.u=b_,a.addEventListener(b,f?b1:b0,f)):a.removeEventListener(b,f?b1:b0,f);else{if("http://www.w3.org/2000/svg"==e)b=b.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=b&&"height"!=b&&"href"!=b&&"list"!=b&&"form"!=b&&"tabIndex"!=b&&"download"!=b&&"rowSpan"!=b&&"colSpan"!=b&&"role"!=b&&"popover"!=b&&b in a)try{a[b]=null==c?"":c;break a}catch(a){}"function"==typeof c||(null==c||!1===c&&"-"!==b[4]?a.removeAttribute(b):a.setAttribute(b,"popover"==b&&1==c?"":c))}}function ch(a){return function(b){if(this.l){var c=this.l[b.type+a];if(null==b.t)b.t=b_++;else if(b.t<c.u)return;return c(bV.event?bV.event(b):b)}}}function ci(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=b.type;if(void 0!==b.constructor)return null;128&c.__u&&(i=!!(32&c.__u),f=[h=b.__e=c.__e]),(k=bV.__b)&&k(b);a:if("function"==typeof A)try{if(r=b.props,s="prototype"in A&&A.prototype.render,t=(k=A.contextType)&&d[k.__c],u=k?t?t.props.value:k.__:d,c.__c?q=(l=b.__c=c.__c).__=l.__E:(s?b.__c=l=new A(r,u):(b.__c=l=new ca(r,u),l.constructor=A,l.render=ck),t&&t.sub(l),l.props=r,l.state||(l.state={}),l.context=u,l.__n=d,m=l.__d=!0,l.__h=[],l._sb=[]),s&&null==l.__s&&(l.__s=l.state),s&&null!=A.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=b6({},l.__s)),b6(l.__s,A.getDerivedStateFromProps(r,l.__s))),n=l.props,o=l.state,l.__v=b,m)s&&null==A.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),s&&null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(s&&null==A.getDerivedStateFromProps&&r!==n&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(r,u),!l.__e&&(null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(r,l.__s,u)||b.__v===c.__v)){for(b.__v!==c.__v&&(l.props=r,l.state=l.__s,l.__d=!1),b.__e=c.__e,b.__k=c.__k,b.__k.some(function(a){a&&(a.__=b)}),v=0;v<l._sb.length;v++)l.__h.push(l._sb[v]);l._sb=[],l.__h.length&&g.push(l);break a}null!=l.componentWillUpdate&&l.componentWillUpdate(r,l.__s,u),s&&null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(n,o,p)})}if(l.context=u,l.props=r,l.__P=a,l.__e=!1,w=bV.__r,x=0,s){for(l.state=l.__s,l.__d=!1,w&&w(b),k=l.render(l.props,l.state,l.context),y=0;y<l._sb.length;y++)l.__h.push(l._sb[y]);l._sb=[]}else do l.__d=!1,w&&w(b),k=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++x<25)l.state=l.__s,null!=l.getChildContext&&(d=b6(b6({},d),l.getChildContext())),s&&!m&&null!=l.getSnapshotBeforeUpdate&&(p=l.getSnapshotBeforeUpdate(n,o)),ce(a,b5(z=null!=k&&k.type===b9&&null==k.key?k.props.children:k)?z:[z],b,c,d,e,f,g,h,i,j),l.base=b.__e,b.__u&=-161,l.__h.length&&g.push(l),q&&(l.__E=l.__=null)}catch(a){if(b.__v=null,i||null!=f){for(b.__u|=i?160:128;h&&8===h.nodeType&&h.nextSibling;)h=h.nextSibling;f[f.indexOf(h)]=null,b.__e=h}else b.__e=c.__e,b.__k=c.__k;bV.__e(a,b,c)}else null==f&&b.__v===c.__v?(b.__k=c.__k,b.__e=c.__e):b.__e=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q=c.props,r=b.props,s=b.type;if("svg"===s?e="http://www.w3.org/2000/svg":"math"===s?e="http://www.w3.org/1998/Math/MathML":e||(e="http://www.w3.org/1999/xhtml"),null!=f){for(j=0;j<f.length;j++)if((n=f[j])&&"setAttribute"in n==!!s&&(s?n.localName===s:3===n.nodeType)){a=n,f[j]=null;break}}if(null==a){if(null===s)return document.createTextNode(r);a=document.createElementNS(e,s,r.is&&r),h&&(bV.__m&&bV.__m(b,f),h=!1),f=null}if(null===s)q===r||h&&a.data===r||(a.data=r);else{if(f=f&&bU.call(a.childNodes),q=c.props||b2,!h&&null!=f)for(q={},j=0;j<a.attributes.length;j++)q[(n=a.attributes[j]).name]=n.value;for(j in q)if(n=q[j],"children"==j);else if("dangerouslySetInnerHTML"==j)l=n;else if(!(j in r)){if("value"==j&&"defaultValue"in r||"checked"==j&&"defaultChecked"in r)continue;cg(a,j,null,n,e)}for(j in r)n=r[j],"children"==j?m=n:"dangerouslySetInnerHTML"==j?k=n:"value"==j?o=n:"checked"==j?p=n:h&&"function"!=typeof n||q[j]===n||cg(a,j,n,q[j],e);if(k)h||l&&(k.__html===l.__html||k.__html===a.innerHTML)||(a.innerHTML=k.__html),b.__k=[];else if(l&&(a.innerHTML=""),ce(a,b5(m)?m:[m],b,c,d,"foreignObject"===s?"http://www.w3.org/1999/xhtml":e,f,g,f?f[0]:c.__k&&cb(c,0),h,i),null!=f)for(j=f.length;j--;)b7(f[j]);h||(j="value","progress"===s&&null==o?a.removeAttribute("value"):void 0===o||o===a[j]&&("progress"!==s||o)&&("option"!==s||o===q[j])||cg(a,j,o,q[j],e),j="checked",void 0!==p&&p!==a[j]&&cg(a,j,p,q[j],e))}return a}(c.__e,b,c,d,e,f,g,i,j);(k=bV.diffed)&&k(b)}function cj(a,b,c){try{if("function"==typeof a){var d="function"==typeof a.__u;d&&a.__u(),d&&null==b||(a.__u=a(b))}else a.current=b}catch(a){bV.__e(a,c)}}function ck(a,b,c){return this.constructor(a,c)}bU=b3.slice,bV={__e:function(a,b,c,d){for(var e,f,g;b=b.__;)if((e=b.__c)&&!e.__)try{if((f=e.constructor)&&null!=f.getDerivedStateFromError&&(e.setState(f.getDerivedStateFromError(a)),g=e.__d),null!=e.componentDidCatch&&(e.componentDidCatch(a,d||{}),g=e.__d),g)return e.__E=e}catch(b){a=b}throw a}},bW=0,ca.prototype.setState=function(a,b){var c;c=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b6({},this.state),"function"==typeof a&&(a=a(b6({},c),this.props)),a&&b6(c,a),null!=a&&this.__v&&(b&&this._sb.push(b),cc(this))},ca.prototype.forceUpdate=function(a){this.__v&&(this.__e=!0,a&&this.__h.push(a),cc(this))},ca.prototype.render=b9,bX=[],bZ="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b$=function(a,b){return a.__v.__b-b.__v.__b},cd.__r=0,b_=0,b0=ch(!1),b1=ch(!0);var cl=/[\s\n\\/='"\0<>]/,cm=/^(xlink|xmlns|xml)([A-Z])/,cn=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,co=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,cp=new Set(["draggable","spellcheck"]),cq=/["&<]/;function cr(a){if(0===a.length||!1===cq.test(a))return a;for(var b=0,c=0,d="",e="";c<a.length;c++){switch(a.charCodeAt(c)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 60:e="&lt;";break;default:continue}c!==b&&(d+=a.slice(b,c)),d+=e,b=c+1}return c!==b&&(d+=a.slice(b,c)),d}var cs={},ct=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),cu=/[A-Z]/g;function cv(){this.__d=!0}function cw(a,b,c){if(!a.s){if(c instanceof cB){if(!c.s)return void(c.o=cw.bind(null,a,b));1&b&&(b=c.s),c=c.v}if(c&&c.then)return void c.then(cw.bind(null,a,b),cw.bind(null,a,2));a.s=b,a.v=c;let d=a.o;d&&d(a)}}var cx,cy,cz,cA,cB=function(){function a(){}return a.prototype.then=function(b,c){var d=new a,e=this.s;if(e){var f=1&e?b:c;if(f){try{cw(d,1,f(this.v))}catch(a){cw(d,2,a)}return d}return this}return this.o=function(a){try{var e=a.v;1&a.s?cw(d,1,b?b(e):e):c?cw(d,1,c(e)):cw(d,2,e)}catch(a){cw(d,2,a)}},d},a}(),cC={},cD=[],cE=Array.isArray,cF=Object.assign;function cG(a,b){var c,d=a.type,e=!0;return a.__c?(e=!1,(c=a.__c).state=c.__s):c=new d(a.props,b),a.__c=c,c.__v=a,c.props=a.props,c.context=b,c.__d=!0,null==c.state&&(c.state=cC),null==c.__s&&(c.__s=c.state),d.getDerivedStateFromProps?c.state=cF({},c.state,d.getDerivedStateFromProps(c.props,c.state)):e&&c.componentWillMount?(c.componentWillMount(),c.state=c.__s!==c.state?c.__s:c.state):!e&&c.componentWillUpdate&&c.componentWillUpdate(),cz&&cz(a),c.render(c.props,c.state,b)}var cH=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),cI=0;function cJ(a,b,c,d,e,f){b||(b={});var g,h,i=b;"ref"in b&&(g=b.ref,delete b.ref);var j={type:a,props:i,key:c,ref:g,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--cI,__i:-1,__u:0,__source:e,__self:f};if("function"==typeof a&&(g=a.defaultProps))for(h in g)void 0===i[h]&&(i[h]=g[h]);return bV.vnode&&bV.vnode(j),j}async function cK(a,b){let c=window.SimpleWebAuthnBrowser;async function d(c){let d=new URL(`${a}/webauthn-options/${b}`);c&&d.searchParams.append("action",c),f().forEach(a=>{d.searchParams.append(a.name,a.value)});let e=await fetch(d);return e.ok?e.json():void console.error("Failed to fetch options",e)}function e(){let a=`#${b}-form`,c=document.querySelector(a);if(!c)throw Error(`Form '${a}' not found`);return c}function f(){return Array.from(e().querySelectorAll("input[data-form-field]"))}async function g(a,b){let c=e();if(a){let b=document.createElement("input");b.type="hidden",b.name="action",b.value=a,c.appendChild(b)}if(b){let a=document.createElement("input");a.type="hidden",a.name="data",a.value=JSON.stringify(b),c.appendChild(a)}return c.submit()}async function h(a,b){let d=await c.startAuthentication(a,b);return await g("authenticate",d)}async function i(a){f().forEach(a=>{if(a.required&&!a.value)throw Error(`Missing required field: ${a.name}`)});let b=await c.startRegistration(a);return await g("register",b)}async function j(){if(!c.browserSupportsWebAuthnAutofill())return;let a=await d("authenticate");if(!a)return void console.error("Failed to fetch option for autofill authentication");try{await h(a.options,!0)}catch(a){console.error(a)}}(async function(){let a=e();if(!c.browserSupportsWebAuthn()){a.style.display="none";return}a&&a.addEventListener("submit",async a=>{a.preventDefault();let b=await d(void 0);if(!b)return void console.error("Failed to fetch options for form submission");if("authenticate"===b.action)try{await h(b.options,!1)}catch(a){console.error(a)}else if("register"===b.action)try{await i(b.options)}catch(a){console.error(a)}})})(),j()}let cL={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},cM=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function cN({html:a,title:b,status:c,cookies:d,theme:e,headTags:f}){return{cookies:d,status:c,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${cM}</style><title>${b}</title>${f??""}</head><body class="__next-auth-theme-${e?.colorScheme??"auto"}"><div class="page">${function(a,b,c){var d=bV.__s;bV.__s=!0,cx=bV.__b,cy=bV.diffed,cz=bV.__r,cA=bV.unmount;var e=function(a,b,c){var d,e,f,g={};for(f in b)"key"==f?d=b[f]:"ref"==f?e=b[f]:g[f]=b[f];if(arguments.length>2&&(g.children=arguments.length>3?bU.call(arguments,2):c),"function"==typeof a&&null!=a.defaultProps)for(f in a.defaultProps)void 0===g[f]&&(g[f]=a.defaultProps[f]);return b8(a,g,d,e,null)}(b9,null);e.__k=[a];try{var f=function a(b,c,d,e,f,g,h){if(null==b||!0===b||!1===b||""===b)return"";var i=typeof b;if("object"!=i)return"function"==i?"":"string"==i?cr(b):b+"";if(cE(b)){var j,k="";f.__k=b;for(var l=0;l<b.length;l++){var m=b[l];if(null!=m&&"boolean"!=typeof m){var n,o=a(m,c,d,e,f,g,h);"string"==typeof o?k+=o:(j||(j=[]),k&&j.push(k),k="",cE(o)?(n=j).push.apply(n,o):j.push(o))}}return j?(k&&j.push(k),j):k}if(void 0!==b.constructor)return"";b.__=f,cx&&cx(b);var p=b.type,q=b.props;if("function"==typeof p){var r,s,t,u=c;if(p===b9){if("tpl"in q){for(var v="",w=0;w<q.tpl.length;w++)if(v+=q.tpl[w],q.exprs&&w<q.exprs.length){var x=q.exprs[w];if(null==x)continue;"object"==typeof x&&(void 0===x.constructor||cE(x))?v+=a(x,c,d,e,b,g,h):v+=x}return v}if("UNSTABLE_comment"in q)return"<!--"+cr(q.UNSTABLE_comment)+"-->";s=q.children}else{if(null!=(r=p.contextType)){var y=c[r.__c];u=y?y.props.value:r.__}var z=p.prototype&&"function"==typeof p.prototype.render;if(z)s=cG(b,u),t=b.__c;else{b.__c=t={__v:b,context:u,props:b.props,setState:cv,forceUpdate:cv,__d:!0,__h:[]};for(var A=0;t.__d&&A++<25;)t.__d=!1,cz&&cz(b),s=p.call(t,q,u);t.__d=!0}if(null!=t.getChildContext&&(c=cF({},c,t.getChildContext())),z&&bV.errorBoundaries&&(p.getDerivedStateFromError||t.componentDidCatch)){s=null!=s&&s.type===b9&&null==s.key&&null==s.props.tpl?s.props.children:s;try{return a(s,c,d,e,b,g,h)}catch(f){return p.getDerivedStateFromError&&(t.__s=p.getDerivedStateFromError(f)),t.componentDidCatch&&t.componentDidCatch(f,cC),t.__d?(s=cG(b,c),null!=(t=b.__c).getChildContext&&(c=cF({},c,t.getChildContext())),a(s=null!=s&&s.type===b9&&null==s.key&&null==s.props.tpl?s.props.children:s,c,d,e,b,g,h)):""}finally{cy&&cy(b),b.__=null,cA&&cA(b)}}}s=null!=s&&s.type===b9&&null==s.key&&null==s.props.tpl?s.props.children:s;try{var B=a(s,c,d,e,b,g,h);return cy&&cy(b),b.__=null,bV.unmount&&bV.unmount(b),B}catch(f){if(!g&&h&&h.onError){var C=h.onError(f,b,function(f){return a(f,c,d,e,b,g,h)});if(void 0!==C)return C;var D=bV.__e;return D&&D(f,b),""}if(!g||!f||"function"!=typeof f.then)throw f;return f.then(function f(){try{return a(s,c,d,e,b,g,h)}catch(i){if(!i||"function"!=typeof i.then)throw i;return i.then(function(){return a(s,c,d,e,b,g,h)},f)}})}}var E,F="<"+p,G="";for(var H in q){var I=q[H];if("function"!=typeof I||"class"===H||"className"===H){switch(H){case"children":E=I;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in q)continue;H="for";break;case"className":if("class"in q)continue;H="class";break;case"defaultChecked":H="checked";break;case"defaultSelected":H="selected";break;case"defaultValue":case"value":switch(H="value",p){case"textarea":E=I;continue;case"select":e=I;continue;case"option":e!=I||"selected"in q||(F+=" selected")}break;case"dangerouslySetInnerHTML":G=I&&I.__html;continue;case"style":"object"==typeof I&&(I=function(a){var b="";for(var c in a){var d=a[c];if(null!=d&&""!==d){var e="-"==c[0]?c:cs[c]||(cs[c]=c.replace(cu,"-$&").toLowerCase()),f=";";"number"!=typeof d||e.startsWith("--")||ct.has(e)||(f="px;"),b=b+e+":"+d+f}}return b||void 0}(I));break;case"acceptCharset":H="accept-charset";break;case"httpEquiv":H="http-equiv";break;default:if(cm.test(H))H=H.replace(cm,"$1:$2").toLowerCase();else{if(cl.test(H))continue;("-"===H[4]||cp.has(H))&&null!=I?I+="":d?co.test(H)&&(H="panose1"===H?"panose-1":H.replace(/([A-Z])/g,"-$1").toLowerCase()):cn.test(H)&&(H=H.toLowerCase())}}null!=I&&!1!==I&&(F=!0===I||""===I?F+" "+H:F+" "+H+'="'+("string"==typeof I?cr(I):I+"")+'"')}}if(cl.test(p))throw Error(p+" is not a valid HTML tag name in "+F+">");if(G||("string"==typeof E?G=cr(E):null!=E&&!1!==E&&!0!==E&&(G=a(E,c,"svg"===p||"foreignObject"!==p&&d,e,b,g,h))),cy&&cy(b),b.__=null,cA&&cA(b),!G&&cH.has(p))return F+"/>";var J="</"+p+">",K=F+">";return cE(G)?[K].concat(G,[J]):"string"!=typeof G?[K,G,J]:K+G+J}(a,cC,!1,void 0,e,!1,void 0);return cE(f)?f.join(""):f}catch(a){if(a.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw a}finally{bV.__c&&bV.__c(a,cD),bV.__s=d,cD.length=0}}(a)}</div></body></html>`}}function cO(a){let{url:b,theme:c,query:d,cookies:e,pages:f,providers:g}=a;return{csrf:(a,b,c)=>a?(b.logger.warn("csrf-disabled"),c.push({name:b.cookies.csrfToken.name,value:"",options:{...b.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:c}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:b.csrfToken},cookies:c},providers:a=>({headers:{"Content-Type":"application/json"},body:a.reduce((a,{id:b,name:c,type:d,signinUrl:e,callbackUrl:f})=>(a[b]={id:b,name:c,type:d,signinUrl:e,callbackUrl:f},a),{})}),signin(b,h){if(b)throw new l.UnknownAction("Unsupported action");if(f?.signIn){let b=`${f.signIn}${f.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:a.callbackUrl??"/"})}`;return h&&(b=`${b}&${new URLSearchParams({error:h})}`),{redirect:b,cookies:e}}let i=g?.find(a=>"webauthn"===a.type&&a.enableConditionalUI&&!!a.simpleWebAuthnBrowserVersion),j="";if(i){let{simpleWebAuthnBrowserVersion:a}=i;j=`<script src="https://unpkg.com/@simplewebauthn/browser@${a}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return cN({cookies:e,theme:c,html:function(a){let{csrfToken:b,providers:c=[],callbackUrl:d,theme:e,email:f,error:g}=a;"undefined"!=typeof document&&e?.brandColor&&document.documentElement.style.setProperty("--brand-color",e.brandColor),"undefined"!=typeof document&&e?.buttonText&&document.documentElement.style.setProperty("--button-text-color",e.buttonText);let h=g&&(cL[g]??cL.default),i=c.find(a=>"webauthn"===a.type&&a.enableConditionalUI)?.id;return cJ("div",{className:"signin",children:[e?.brandColor&&cJ("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${e.brandColor}}`}}),e?.buttonText&&cJ("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${e.buttonText}
        }
      `}}),cJ("div",{className:"card",children:[h&&cJ("div",{className:"error",children:cJ("p",{children:h})}),e?.logo&&cJ("img",{src:e.logo,alt:"Logo",className:"logo"}),c.map((a,e)=>{let g,h,i;("oauth"===a.type||"oidc"===a.type)&&({bg:g="#fff",brandColor:h,logo:i=`https://authjs.dev/img/providers/${a.id}.svg`}=a.style??{});let j=h??g??"#fff";return cJ("div",{className:"provider",children:["oauth"===a.type||"oidc"===a.type?cJ("form",{action:a.signinUrl,method:"POST",children:[cJ("input",{type:"hidden",name:"csrfToken",value:b}),d&&cJ("input",{type:"hidden",name:"callbackUrl",value:d}),cJ("button",{type:"submit",className:"button",style:{"--provider-brand-color":j},tabIndex:0,children:[cJ("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",a.name]}),i&&cJ("img",{loading:"lazy",height:24,src:i})]})]}):null,("email"===a.type||"credentials"===a.type||"webauthn"===a.type)&&e>0&&"email"!==c[e-1].type&&"credentials"!==c[e-1].type&&"webauthn"!==c[e-1].type&&cJ("hr",{}),"email"===a.type&&cJ("form",{action:a.signinUrl,method:"POST",children:[cJ("input",{type:"hidden",name:"csrfToken",value:b}),cJ("label",{className:"section-header",htmlFor:`input-email-for-${a.id}-provider`,children:"Email"}),cJ("input",{id:`input-email-for-${a.id}-provider`,autoFocus:!0,type:"email",name:"email",value:f,placeholder:"email@example.com",required:!0}),cJ("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",a.name]})]}),"credentials"===a.type&&cJ("form",{action:a.callbackUrl,method:"POST",children:[cJ("input",{type:"hidden",name:"csrfToken",value:b}),Object.keys(a.credentials).map(b=>cJ("div",{children:[cJ("label",{className:"section-header",htmlFor:`input-${b}-for-${a.id}-provider`,children:a.credentials[b].label??b}),cJ("input",{name:b,id:`input-${b}-for-${a.id}-provider`,type:a.credentials[b].type??"text",placeholder:a.credentials[b].placeholder??"",...a.credentials[b]})]},`input-group-${a.id}`)),cJ("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",a.name]})]}),"webauthn"===a.type&&cJ("form",{action:a.callbackUrl,method:"POST",id:`${a.id}-form`,children:[cJ("input",{type:"hidden",name:"csrfToken",value:b}),Object.keys(a.formFields).map(b=>cJ("div",{children:[cJ("label",{className:"section-header",htmlFor:`input-${b}-for-${a.id}-provider`,children:a.formFields[b].label??b}),cJ("input",{name:b,"data-form-field":!0,id:`input-${b}-for-${a.id}-provider`,type:a.formFields[b].type??"text",placeholder:a.formFields[b].placeholder??"",...a.formFields[b]})]},`input-group-${a.id}`)),cJ("button",{id:`submitButton-${a.id}`,type:"submit",tabIndex:0,children:["Sign in with ",a.name]})]}),("email"===a.type||"credentials"===a.type||"webauthn"===a.type)&&e+1<c.length&&cJ("hr",{})]},a.id)})]}),i&&cJ(b9,{children:cJ("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${cK})(authURL, "${i}");
`}})})]})}({csrfToken:a.csrfToken,providers:a.providers?.filter(a=>["email","oauth","oidc"].includes(a.type)||"credentials"===a.type&&a.credentials||"webauthn"===a.type&&a.formFields||!1),callbackUrl:a.callbackUrl,theme:a.theme,error:h,...d}),title:"Sign In",headTags:j})},signout:()=>f?.signOut?{redirect:f.signOut,cookies:e}:cN({cookies:e,theme:c,html:function(a){let{url:b,csrfToken:c,theme:d}=a;return cJ("div",{className:"signout",children:[d?.brandColor&&cJ("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${d.brandColor}
        }
      `}}),d?.buttonText&&cJ("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${d.buttonText}
        }
      `}}),cJ("div",{className:"card",children:[d?.logo&&cJ("img",{src:d.logo,alt:"Logo",className:"logo"}),cJ("h1",{children:"Signout"}),cJ("p",{children:"Are you sure you want to sign out?"}),cJ("form",{action:b?.toString(),method:"POST",children:[cJ("input",{type:"hidden",name:"csrfToken",value:c}),cJ("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:a.csrfToken,url:b,theme:c}),title:"Sign Out"}),verifyRequest:a=>f?.verifyRequest?{redirect:`${f.verifyRequest}${b?.search??""}`,cookies:e}:cN({cookies:e,theme:c,html:function(a){let{url:b,theme:c}=a;return cJ("div",{className:"verify-request",children:[c.brandColor&&cJ("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${c.brandColor}
        }
      `}}),cJ("div",{className:"card",children:[c.logo&&cJ("img",{src:c.logo,alt:"Logo",className:"logo"}),cJ("h1",{children:"Check your email"}),cJ("p",{children:"A sign in link has been sent to your email address."}),cJ("p",{children:cJ("a",{className:"site",href:b.origin,children:b.host})})]})]})}({url:b,theme:c,...a}),title:"Verify Request"}),error:a=>f?.error?{redirect:`${f.error}${f.error.includes("?")?"&":"?"}error=${a}`,cookies:e}:cN({cookies:e,theme:c,...function(a){let{url:b,error:c="default",theme:d}=a,e=`${b}/signin`,f={default:{status:200,heading:"Error",message:cJ("p",{children:cJ("a",{className:"site",href:b?.origin,children:b?.host})})},Configuration:{status:500,heading:"Server error",message:cJ("div",{children:[cJ("p",{children:"There is a problem with the server configuration."}),cJ("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:cJ("div",{children:[cJ("p",{children:"You do not have permission to sign in."}),cJ("p",{children:cJ("a",{className:"button",href:e,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:cJ("div",{children:[cJ("p",{children:"The sign in link is no longer valid."}),cJ("p",{children:"It may have been used already or it may have expired."})]}),signin:cJ("a",{className:"button",href:e,children:"Sign in"})}},{status:g,heading:h,message:i,signin:j}=f[c]??f.default;return{status:g,html:cJ("div",{className:"error",children:[d?.brandColor&&cJ("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${d?.brandColor}
        }
      `}}),cJ("div",{className:"card",children:[d?.logo&&cJ("img",{src:d?.logo,alt:"Logo",className:"logo"}),cJ("h1",{children:h}),cJ("div",{className:"message",children:i}),j]})]})}}({url:b,theme:c,error:a}),title:"Error"})}}function cP(a,b=Date.now()){return new Date(b+1e3*a)}async function cQ(a,b,c,d){if(!c?.providerAccountId||!c.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(c.type))throw Error("Provider not supported");let{adapter:e,jwt:f,events:g,session:{strategy:h,generateSessionToken:i}}=d;if(!e)return{user:b,account:c};let j=c,{createUser:k,updateUser:m,getUser:n,getUserByAccount:o,getUserByEmail:p,linkAccount:q,createSession:r,getSessionAndUser:s,deleteSession:t}=e,u=null,v=null,w=!1,x="jwt"===h;if(a)if(x)try{let b=d.cookies.sessionToken.name;(u=await f.decode({...f,token:a,salt:b}))&&"sub"in u&&u.sub&&(v=await n(u.sub))}catch{}else{let b=await s(a);b&&(u=b.session,v=b.user)}if("email"===j.type){let c=await p(b.email);return c?(v?.id!==c.id&&!x&&a&&await t(a),v=await m({id:c.id,emailVerified:new Date}),await g.updateUser?.({user:v})):(v=await k({...b,emailVerified:new Date}),await g.createUser?.({user:v}),w=!0),{session:u=x?{}:await r({sessionToken:i(),userId:v.id,expires:cP(d.session.maxAge)}),user:v,isNewUser:w}}if("webauthn"===j.type){let a=await o({providerAccountId:j.providerAccountId,provider:j.provider});if(a){if(v){if(a.id===v.id){let a={...j,userId:v.id};return{session:u,user:v,isNewUser:w,account:a}}throw new l.AccountNotLinked("The account is already associated with another user",{provider:j.provider})}u=x?{}:await r({sessionToken:i(),userId:a.id,expires:cP(d.session.maxAge)});let b={...j,userId:a.id};return{session:u,user:a,isNewUser:w,account:b}}{if(v){await q({...j,userId:v.id}),await g.linkAccount?.({user:v,account:j,profile:b});let a={...j,userId:v.id};return{session:u,user:v,isNewUser:w,account:a}}if(b.email?await p(b.email):null)throw new l.AccountNotLinked("Another account already exists with the same e-mail address",{provider:j.provider});v=await k({...b}),await g.createUser?.({user:v}),await q({...j,userId:v.id}),await g.linkAccount?.({user:v,account:j,profile:b}),u=x?{}:await r({sessionToken:i(),userId:v.id,expires:cP(d.session.maxAge)});let a={...j,userId:v.id};return{session:u,user:v,isNewUser:!0,account:a}}}let y=await o({providerAccountId:j.providerAccountId,provider:j.provider});if(y){if(v){if(y.id===v.id)return{session:u,user:v,isNewUser:w};throw new l.OAuthAccountNotLinked("The account is already associated with another user",{provider:j.provider})}return{session:u=x?{}:await r({sessionToken:i(),userId:y.id,expires:cP(d.session.maxAge)}),user:y,isNewUser:w}}{let{provider:a}=d,{type:c,provider:e,providerAccountId:f,userId:h,...m}=j;if(j=Object.assign(a.account(m)??{},{providerAccountId:f,provider:e,type:c,userId:h}),v)return await q({...j,userId:v.id}),await g.linkAccount?.({user:v,account:j,profile:b}),{session:u,user:v,isNewUser:w};let n=b.email?await p(b.email):null;if(n){let a=d.provider;if(a?.allowDangerousEmailAccountLinking)v=n,w=!1;else throw new l.OAuthAccountNotLinked("Another account already exists with the same e-mail address",{provider:j.provider})}else v=await k({...b,emailVerified:null}),w=!0;return await g.createUser?.({user:v}),await q({...j,userId:v.id}),await g.linkAccount?.({user:v,account:j,profile:b}),{session:u=x?{}:await r({sessionToken:i(),userId:v.id,expires:cP(d.session.maxAge)}),user:v,isNewUser:w}}}function cR(a,b){if(null==a)return!1;try{return a instanceof b||Object.getPrototypeOf(a)[Symbol.toStringTag]===b.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="oauth4webapi/v3.8.3");let cS="ERR_INVALID_ARG_VALUE",cT="ERR_INVALID_ARG_TYPE";function cU(a,b,c){let d=TypeError(a,{cause:c});return Object.assign(d,{code:b}),d}let cV=Symbol(),cW=Symbol(),cX=Symbol(),cY=Symbol(),cZ=Symbol(),c$=Symbol();Symbol();let c_=new TextEncoder,c0=new TextDecoder;function c1(a){return"string"==typeof a?c_.encode(a):c0.decode(a)}function c2(a){return"string"==typeof a?f(a):e(a)}e=Uint8Array.prototype.toBase64?a=>(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a.toBase64({alphabet:"base64url",omitPadding:!0})):a=>{a instanceof ArrayBuffer&&(a=new Uint8Array(a));let b=[];for(let c=0;c<a.byteLength;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},f=Uint8Array.fromBase64?a=>{try{return Uint8Array.fromBase64(a,{alphabet:"base64url"})}catch(a){throw cU("The input to be decoded is not correctly encoded.",cS,a)}}:a=>{try{let b=atob(a.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}catch(a){throw cU("The input to be decoded is not correctly encoded.",cS,a)}};class c3 extends Error{code;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=d5,Error.captureStackTrace?.(this,this.constructor)}}class c4 extends Error{code;constructor(a,b){super(a,b),this.name=this.constructor.name,b?.code&&(this.code=b?.code),Error.captureStackTrace?.(this,this.constructor)}}function c5(a,b,c){return new c4(a,{code:b,cause:c})}function c6(a){return!(null===a||"object"!=typeof a||Array.isArray(a))}function c7(a){cR(a,Headers)&&(a=Object.fromEntries(a.entries()));let b=new Headers(a??{});if(d&&!b.has("user-agent")&&b.set("user-agent",d),b.has("authorization"))throw cU('"options.headers" must not include the "authorization" header name',cS);return b}function c8(a,b){if(void 0!==b){if("function"==typeof b&&(b=b(a.href)),!(b instanceof AbortSignal))throw cU('"options.signal" must return or be an instance of AbortSignal',cT);return b}}function c9(a){return a.includes("//")?a.replace("//","/"):a}async function da(a,b,c,d){if(!(a instanceof URL))throw cU(`"${b}" must be an instance of URL`,cT);dr(a,d?.[cV]!==!0);let e=c(new URL(a.href)),f=c7(d?.headers);return f.set("accept","application/json"),(d?.[cY]||fetch)(e.href,{body:void 0,headers:Object.fromEntries(f.entries()),method:"GET",redirect:"manual",signal:c8(e,d?.signal)})}async function db(a,b){return da(a,"issuerIdentifier",a=>{switch(b?.algorithm){case void 0:case"oidc":a.pathname=c9(`${a.pathname}/.well-known/openid-configuration`);break;case"oauth2":!function(a,b,c=!1){"/"===a.pathname?a.pathname=b:a.pathname=c9(`${b}/${c?a.pathname:a.pathname.replace(/(\/)$/,"")}`)}(a,".well-known/oauth-authorization-server");break;default:throw cU('"options.algorithm" must be "oidc" (default), or "oauth2"',cS)}return a},b)}function dc(a,b,c,d,e){try{if("number"!=typeof a||!Number.isFinite(a))throw cU(`${c} must be a number`,cT,e);if(a>0)return;if(b){if(0!==a)throw cU(`${c} must be a non-negative number`,cS,e);return}throw cU(`${c} must be a positive number`,cS,e)}catch(a){if(d)throw c5(a.message,d,e);throw a}}function dd(a,b,c,d){try{if("string"!=typeof a)throw cU(`${b} must be a string`,cT,d);if(0===a.length)throw cU(`${b} must not be empty`,cS,d)}catch(a){if(c)throw c5(a.message,c,d);throw a}}async function de(a,b){if(!(a instanceof URL)&&a!==er)throw cU('"expectedIssuerIdentifier" must be an instance of URL',cT);if(!cR(b,Response))throw cU('"response" must be an instance of Response',cT);if(200!==b.status)throw c5('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',eb,b);ej(b);let c=await eq(b);if(dd(c.issuer,'"response" body "issuer" property',d9,{body:c}),a!==er&&new URL(c.issuer).href!==a.href)throw c5('"response" body "issuer" property does not match the expected value',eg,{expected:a.href,body:c,attribute:"issuer"});return c}function df(a){var b=a,c="application/json";if(dI(b)!==c)throw function(a,...b){let c='"response" content-type must be ';if(b.length>2){let a=b.pop();c+=`${b.join(", ")}, or ${a}`}else 2===b.length?c+=`${b[0]} or ${b[1]}`:c+=b[0];return c5(c,ea,a)}(b,c)}function dg(){return c2(crypto.getRandomValues(new Uint8Array(32)))}async function dh(a){return dd(a,"codeVerifier"),c2(await crypto.subtle.digest("SHA-256",c1(a)))}function di(a){let b=a?.[cW];return"number"==typeof b&&Number.isFinite(b)?b:0}function dj(a){let b=a?.[cX];return"number"==typeof b&&Number.isFinite(b)&&-1!==Math.sign(b)?b:30}function dk(){return Math.floor(Date.now()/1e3)}function dl(a){if("object"!=typeof a||null===a)throw cU('"as" must be an object',cT);dd(a.issuer,'"as.issuer"')}function dm(a){if("object"!=typeof a||null===a)throw cU('"client" must be an object',cT);dd(a.client_id,'"client.client_id"')}function dn(a,b){let c=dk()+di(b);return{jti:dg(),aud:a.issuer,exp:c+60,iat:c,nbf:c,iss:b.client_id,sub:b.client_id}}async function dp(a,b,c){if(!c.usages.includes("sign"))throw cU('CryptoKey instances used for signing assertions must include "sign" in their "usages"',cS);let d=`${c2(c1(JSON.stringify(a)))}.${c2(c1(JSON.stringify(b)))}`,e=c2(await crypto.subtle.sign(function(a){switch(a.algorithm.name){case"ECDSA":return{name:a.algorithm.name,hash:function(a){let{algorithm:b}=a;switch(b.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new c3("unsupported ECDSA namedCurve",{cause:a})}}(a)};case"RSA-PSS":switch(ek(a),a.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:a.algorithm.name,saltLength:parseInt(a.algorithm.hash.name.slice(-3),10)>>3};default:throw new c3("unsupported RSA-PSS hash name",{cause:a})}case"RSASSA-PKCS1-v1_5":return ek(a),a.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return a.algorithm.name}throw new c3("unsupported CryptoKey algorithm name",{cause:a})}(c),c,c1(d)));return`${d}.${e}`}let dq=URL.parse?(a,b)=>URL.parse(a,b):(a,b)=>{try{return new URL(a,b)}catch{return null}};function dr(a,b){if(b&&"https:"!==a.protocol)throw c5("only requests to HTTPS are allowed",ec,a);if("https:"!==a.protocol&&"http:"!==a.protocol)throw c5("only HTTP and HTTPS requests are allowed",ed,a)}function ds(a,b,c,d){let e;if("string"!=typeof a||!(e=dq(a)))throw c5(`authorization server metadata does not contain a valid ${c?`"as.mtls_endpoint_aliases.${b}"`:`"as.${b}"`}`,void 0===a?eh:ei,{attribute:c?`mtls_endpoint_aliases.${b}`:b});return dr(e,d),e}function dt(a,b,c,d){return c&&a.mtls_endpoint_aliases&&b in a.mtls_endpoint_aliases?ds(a.mtls_endpoint_aliases[b],b,c,d):ds(a[b],b,c,d)}class du extends Error{cause;code;error;status;error_description;response;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=d4,this.cause=b.cause,this.error=b.cause.error,this.status=b.response.status,this.error_description=b.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:b.response}),Error.captureStackTrace?.(this,this.constructor)}}class dv extends Error{cause;code;error;error_description;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=d6,this.cause=b.cause,this.error=b.cause.get("error"),this.error_description=b.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class dw extends Error{cause;code;response;status;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=d3,this.cause=b.cause,this.status=b.response.status,this.response=b.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let dx="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",dy=RegExp("^[,\\s]*("+dx+")"),dz=RegExp("^[,\\s]*("+dx+')\\s*=\\s*"((?:[^"\\\\]|\\\\[\\s\\S])*)"[,\\s]*(.*)'),dA=RegExp("^[,\\s]*"+("("+dx+")\\s*=\\s*(")+dx+")[,\\s]*(.*)"),dB=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2})(?:$|[,\\s])(.*)");async function dC(a){if(a.status>399&&a.status<500){ej(a),df(a);try{let b=await a.clone().json();if(c6(b)&&"string"==typeof b.error&&b.error.length)return b}catch{}}}async function dD(a,b,c){if(a.status!==b){let b;if(dQ(a),b=await dC(a))throw await a.body?.cancel(),new du("server responded with an error in the response body",{cause:b,response:a});throw c5(`"response" is not a conform ${c} response (unexpected HTTP status code)`,eb,a)}}function dE(a){if(!dV.has(a))throw cU('"options.DPoP" is not a valid DPoPHandle',cS)}async function dF(a,b,c,d,e,f){if(dd(a,'"accessToken"'),!(c instanceof URL))throw cU('"url" must be an instance of URL',cT);dr(c,f?.[cV]!==!0),d=c7(d),f?.DPoP&&(dE(f.DPoP),await f.DPoP.addProof(c,d,b.toUpperCase(),a)),d.set("authorization",`${d.has("dpop")?"DPoP":"Bearer"} ${a}`);let g=await (f?.[cY]||fetch)(c.href,{body:e,headers:Object.fromEntries(d.entries()),method:b,redirect:"manual",signal:c8(c,f?.signal)});return f?.DPoP?.cacheNonce(g,c),g}async function dG(a,b,c,d){dl(a),dm(b);let e=dt(a,"userinfo_endpoint",b.use_mtls_endpoint_aliases,d?.[cV]!==!0),f=c7(d?.headers);return b.userinfo_signed_response_alg?f.set("accept","application/jwt"):(f.set("accept","application/json"),f.append("accept","application/jwt")),dF(c,"GET",e,f,null,{...d,[cW]:di(b)})}let dH=Symbol();function dI(a){return a.headers.get("content-type")?.split(";")[0]}async function dJ(a,b,c,d,e){let f;if(dl(a),dm(b),!cR(d,Response))throw cU('"response" must be an instance of Response',cT);if(dQ(d),200!==d.status)throw c5('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',eb,d);if(ej(d),"application/jwt"===dI(d)){let{claims:c,jwt:g}=await el(await d.text(),em.bind(void 0,b.userinfo_signed_response_alg,a.userinfo_signing_alg_values_supported,void 0),di(b),dj(b),e?.[c$]).then(dR.bind(void 0,b.client_id)).then(dT.bind(void 0,a));dN.set(d,g),f=c}else{if(b.userinfo_signed_response_alg)throw c5("JWT UserInfo Response expected",d7,d);f=await eq(d)}if(dd(f.sub,'"response" body "sub" property',d9,{body:f}),c===dH);else if(dd(c,'"expectedSubject"'),f.sub!==c)throw c5('unexpected "response" body "sub" property value',eg,{expected:c,body:f,attribute:"sub"});return f}async function dK(a,b,c,d,e,f,g){return await c(a,b,e,f),f.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(g?.[cY]||fetch)(d.href,{body:e,headers:Object.fromEntries(f.entries()),method:"POST",redirect:"manual",signal:c8(d,g?.signal)})}async function dL(a,b,c,d,e,f){let g=dt(a,"token_endpoint",b.use_mtls_endpoint_aliases,f?.[cV]!==!0);e.set("grant_type",d);let h=c7(f?.headers);h.set("accept","application/json"),f?.DPoP!==void 0&&(dE(f.DPoP),await f.DPoP.addProof(g,h,"POST"));let i=await dK(a,b,c,g,e,h,f);return f?.DPoP?.cacheNonce(i,g),i}let dM=new WeakMap,dN=new WeakMap;function dO(a){if(!a.id_token)return;let b=dM.get(a);if(!b)throw cU('"ref" was already garbage collected or did not resolve from the proper sources',cS);return b}async function dP(a,b,c,d,e,f){if(dl(a),dm(b),!cR(c,Response))throw cU('"response" must be an instance of Response',cT);await dD(c,200,"Token Endpoint"),ej(c);let g=await eq(c);if(dd(g.access_token,'"response" body "access_token" property',d9,{body:g}),dd(g.token_type,'"response" body "token_type" property',d9,{body:g}),g.token_type=g.token_type.toLowerCase(),void 0!==g.expires_in){let a="number"!=typeof g.expires_in?parseFloat(g.expires_in):g.expires_in;dc(a,!0,'"response" body "expires_in" property',d9,{body:g}),g.expires_in=a}if(void 0!==g.refresh_token&&dd(g.refresh_token,'"response" body "refresh_token" property',d9,{body:g}),void 0!==g.scope&&"string"!=typeof g.scope)throw c5('"response" body "scope" property must be a string',d9,{body:g});if(void 0!==g.id_token){dd(g.id_token,'"response" body "id_token" property',d9,{body:g});let f=["aud","exp","iat","iss","sub"];!0===b.require_auth_time&&f.push("auth_time"),void 0!==b.default_max_age&&(dc(b.default_max_age,!0,'"client.default_max_age"'),f.push("auth_time")),d?.length&&f.push(...d);let{claims:h,jwt:i}=await el(g.id_token,em.bind(void 0,b.id_token_signed_response_alg,a.id_token_signing_alg_values_supported,"RS256"),di(b),dj(b),e).then(dZ.bind(void 0,f)).then(dU.bind(void 0,a)).then(dS.bind(void 0,b.client_id));if(Array.isArray(h.aud)&&1!==h.aud.length){if(void 0===h.azp)throw c5('ID Token "aud" (audience) claim includes additional untrusted audiences',ef,{claims:h,claim:"aud"});if(h.azp!==b.client_id)throw c5('unexpected ID Token "azp" (authorized party) claim value',ef,{expected:b.client_id,claims:h,claim:"azp"})}void 0!==h.auth_time&&dc(h.auth_time,!0,'ID Token "auth_time" (authentication time)',d9,{claims:h}),dN.set(c,i),dM.set(g,h)}if(f?.[g.token_type]!==void 0)f[g.token_type](c,g);else if("dpop"!==g.token_type&&"bearer"!==g.token_type)throw new c3("unsupported `token_type` value",{cause:{body:g}});return g}function dQ(a){let b;if(b=function(a){if(!cR(a,Response))throw cU('"response" must be an instance of Response',cT);let b=a.headers.get("www-authenticate");if(null===b)return;let c=[],d=b;for(;d;){let a,b=d.match(dy),e=b?.["1"].toLowerCase();if(!e)return;let f=d.substring(b[0].length);if(f&&!f.match(/^[\s,]/))return;let g=f.match(/^\s+(.*)$/),h=!!g;d=g?g[1]:void 0;let i={};if(h)for(;d;){let c,e;if(b=d.match(dz)){if([,c,e,d]=b,e.includes("\\"))try{e=JSON.parse(`"${e}"`)}catch{}i[c.toLowerCase()]=e;continue}if(b=d.match(dA)){[,c,e,d]=b,i[c.toLowerCase()]=e;continue}if(b=d.match(dB)){if(Object.keys(i).length)break;[,a,d]=b;break}return}else d=f||void 0;let j={scheme:e,parameters:i};a&&(j.token68=a),c.push(j)}if(c.length)return c}(a))throw new dw("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:b,response:a})}function dR(a,b){return void 0!==b.claims.aud?dS(a,b):b}function dS(a,b){if(Array.isArray(b.claims.aud)){if(!b.claims.aud.includes(a))throw c5('unexpected JWT "aud" (audience) claim value',ef,{expected:a,claims:b.claims,claim:"aud"})}else if(b.claims.aud!==a)throw c5('unexpected JWT "aud" (audience) claim value',ef,{expected:a,claims:b.claims,claim:"aud"});return b}function dT(a,b){return void 0!==b.claims.iss?dU(a,b):b}function dU(a,b){let c=a[es]?.(b)??a.issuer;if(b.claims.iss!==c)throw c5('unexpected JWT "iss" (issuer) claim value',ef,{expected:c,claims:b.claims,claim:"iss"});return b}let dV=new WeakSet,dW=Symbol();async function dX(a,b,c,d,e,f,g){if(dl(a),dm(b),!dV.has(d))throw cU('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',cS);dd(e,'"redirectUri"');let h=en(d,"code");if(!h)throw c5('no authorization code in "callbackParameters"',d9);let i=new URLSearchParams(g?.additionalParameters);return i.set("redirect_uri",e),i.set("code",h),f!==dW&&(dd(f,'"codeVerifier"'),i.set("code_verifier",f)),dL(a,b,c,"authorization_code",i,g)}let dY={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function dZ(a,b){for(let c of a)if(void 0===b.claims[c])throw c5(`JWT "${c}" (${dY[c]}) claim missing`,d9,{claims:b.claims});return b}let d$=Symbol(),d_=Symbol();async function d0(a,b,c,d){return"string"==typeof d?.expectedNonce||"number"==typeof d?.maxAge||d?.requireIdToken?d1(a,b,c,d.expectedNonce,d.maxAge,d[c$],d.recognizedTokenTypes):d2(a,b,c,d?.[c$],d?.recognizedTokenTypes)}async function d1(a,b,c,d,e,f,g){let h=[];switch(d){case void 0:d=d$;break;case d$:break;default:dd(d,'"expectedNonce" argument'),h.push("nonce")}switch(e??=b.default_max_age){case void 0:e=d_;break;case d_:break;default:dc(e,!0,'"maxAge" argument'),h.push("auth_time")}let i=await dP(a,b,c,h,f,g);dd(i.id_token,'"response" body "id_token" property',d9,{body:i});let j=dO(i);if(e!==d_){let a=dk()+di(b),c=dj(b);if(j.auth_time+e<a-c)throw c5("too much time has elapsed since the last End-User authentication",ee,{claims:j,now:a,tolerance:c,claim:"auth_time"})}if(d===d$){if(void 0!==j.nonce)throw c5('unexpected ID Token "nonce" claim value',ef,{expected:void 0,claims:j,claim:"nonce"})}else if(j.nonce!==d)throw c5('unexpected ID Token "nonce" claim value',ef,{expected:d,claims:j,claim:"nonce"});return i}async function d2(a,b,c,d,e){let f=await dP(a,b,c,void 0,d,e),g=dO(f);if(g){if(void 0!==b.default_max_age){dc(b.default_max_age,!0,'"client.default_max_age"');let a=dk()+di(b),c=dj(b);if(g.auth_time+b.default_max_age<a-c)throw c5("too much time has elapsed since the last End-User authentication",ee,{claims:g,now:a,tolerance:c,claim:"auth_time"})}if(void 0!==g.nonce)throw c5('unexpected ID Token "nonce" claim value',ef,{expected:void 0,claims:g,claim:"nonce"})}return f}let d3="OAUTH_WWW_AUTHENTICATE_CHALLENGE",d4="OAUTH_RESPONSE_BODY_ERROR",d5="OAUTH_UNSUPPORTED_OPERATION",d6="OAUTH_AUTHORIZATION_RESPONSE_ERROR",d7="OAUTH_JWT_USERINFO_EXPECTED",d8="OAUTH_PARSE_ERROR",d9="OAUTH_INVALID_RESPONSE",ea="OAUTH_RESPONSE_IS_NOT_JSON",eb="OAUTH_RESPONSE_IS_NOT_CONFORM",ec="OAUTH_HTTP_REQUEST_FORBIDDEN",ed="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",ee="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",ef="OAUTH_JWT_CLAIM_COMPARISON_FAILED",eg="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",eh="OAUTH_MISSING_SERVER_METADATA",ei="OAUTH_INVALID_SERVER_METADATA";function ej(a){if(a.bodyUsed)throw cU('"response" body has been used already',cS)}function ek(a){let{algorithm:b}=a;if("number"!=typeof b.modulusLength||b.modulusLength<2048)throw new c3(`unsupported ${b.name} modulusLength`,{cause:a})}async function el(a,b,c,d,e){let f,g,{0:h,1:i,length:j}=a.split(".");if(5===j)if(void 0!==e)a=await e(a),{0:h,1:i,length:j}=a.split(".");else throw new c3("JWE decryption is not configured",{cause:a});if(3!==j)throw c5("Invalid JWT",d9,a);try{f=JSON.parse(c1(c2(h)))}catch(a){throw c5("failed to parse JWT Header body as base64url encoded JSON",d8,a)}if(!c6(f))throw c5("JWT Header must be a top level object",d9,a);if(b(f),void 0!==f.crit)throw new c3('no JWT "crit" header parameter extensions are supported',{cause:{header:f}});try{g=JSON.parse(c1(c2(i)))}catch(a){throw c5("failed to parse JWT Payload body as base64url encoded JSON",d8,a)}if(!c6(g))throw c5("JWT Payload must be a top level object",d9,a);let k=dk()+c;if(void 0!==g.exp){if("number"!=typeof g.exp)throw c5('unexpected JWT "exp" (expiration time) claim type',d9,{claims:g});if(g.exp<=k-d)throw c5('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',ee,{claims:g,now:k,tolerance:d,claim:"exp"})}if(void 0!==g.iat&&"number"!=typeof g.iat)throw c5('unexpected JWT "iat" (issued at) claim type',d9,{claims:g});if(void 0!==g.iss&&"string"!=typeof g.iss)throw c5('unexpected JWT "iss" (issuer) claim type',d9,{claims:g});if(void 0!==g.nbf){if("number"!=typeof g.nbf)throw c5('unexpected JWT "nbf" (not before) claim type',d9,{claims:g});if(g.nbf>k+d)throw c5('unexpected JWT "nbf" (not before) claim value',ee,{claims:g,now:k,tolerance:d,claim:"nbf"})}if(void 0!==g.aud&&"string"!=typeof g.aud&&!Array.isArray(g.aud))throw c5('unexpected JWT "aud" (audience) claim type',d9,{claims:g});return{header:f,claims:g,jwt:a}}function em(a,b,c,d){if(void 0!==a){if("string"==typeof a?d.alg!==a:!a.includes(d.alg))throw c5('unexpected JWT "alg" header parameter',d9,{header:d,expected:a,reason:"client configuration"});return}if(Array.isArray(b)){if(!b.includes(d.alg))throw c5('unexpected JWT "alg" header parameter',d9,{header:d,expected:b,reason:"authorization server metadata"});return}if(void 0!==c){if("string"==typeof c?d.alg!==c:"function"==typeof c?!c(d.alg):!c.includes(d.alg))throw c5('unexpected JWT "alg" header parameter',d9,{header:d,expected:c,reason:"default value"});return}throw c5('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:a,issuer:b,fallback:c})}function en(a,b){let{0:c,length:d}=a.getAll(b);if(d>1)throw c5(`"${b}" parameter must be provided only once`,d9);return c}let eo=Symbol(),ep=Symbol();async function eq(a,b=df){let c;try{c=await a.json()}catch(c){throw b(a),c5('failed to parse "response" body as JSON',d8,c)}if(!c6(c))throw c5('"response" body must be a top level object',d9,{body:c});return c}let er=Symbol(),es=Symbol();async function et(a,b,c){let{cookies:d,logger:e}=c,f=d[a],g=new Date;g.setTime(g.getTime()+9e5),e.debug(`CREATE_${a.toUpperCase()}`,{name:f.name,payload:b,COOKIE_TTL:900,expires:g});let h=await bk({...c.jwt,maxAge:900,token:{value:b},salt:f.name}),i={...f.options,expires:g};return{name:f.name,value:h,options:i}}async function eu(a,b,c){try{let{logger:d,cookies:e,jwt:f}=c;if(d.debug(`PARSE_${a.toUpperCase()}`,{cookie:b}),!b)throw new l.InvalidCheck(`${a} cookie was missing`);let g=await bl({...f,token:b,salt:e[a].name});if(g?.value)return g.value;throw Error("Invalid cookie")}catch(b){throw new l.InvalidCheck(`${a} value could not be parsed`,{cause:b})}}function ev(a,b,c){let{logger:d,cookies:e}=b,f=e[a];d.debug(`CLEAR_${a.toUpperCase()}`,{cookie:f}),c.push({name:f.name,value:"",options:{...e[a].options,maxAge:0}})}function ew(a,b){return async function(c,d,e){let{provider:f,logger:g}=e;if(!f?.checks?.includes(a))return;let h=c?.[e.cookies[b].name];g.debug(`USE_${b.toUpperCase()}`,{value:h});let i=await eu(b,h,e);return ev(b,e,d),i}}let ex={async create(a){let b=dg(),c=await dh(b);return{cookie:await et("pkceCodeVerifier",b,a),value:c}},use:ew("pkce","pkceCodeVerifier")},ey="encodedState",ez={async create(a,b){let{provider:c}=a;if(!c.checks.includes("state")){if(b)throw new l.InvalidCheck("State data was provided but the provider is not configured to use state");return}let d={origin:b,random:dg()},e=await bk({secret:a.jwt.secret,token:d,salt:ey,maxAge:900});return{cookie:await et("state",e,a),value:e}},use:ew("state","state"),async decode(a,b){try{b.logger.debug("DECODE_STATE",{state:a});let c=await bl({secret:b.jwt.secret,token:a,salt:ey});if(c)return c;throw Error("Invalid state")}catch(a){throw new l.InvalidCheck("State could not be decoded",{cause:a})}}},eA={async create(a){if(!a.provider.checks.includes("nonce"))return;let b=dg();return{cookie:await et("nonce",b,a),value:b}},use:ew("nonce","nonce")},eB="encodedWebauthnChallenge",eC={create:async(a,b,c)=>({cookie:await et("webauthnChallenge",await bk({secret:a.jwt.secret,token:{challenge:b,registerData:c},salt:eB,maxAge:900}),a)}),async use(a,b,c){let d=b?.[a.cookies.webauthnChallenge.name],e=await eu("webauthnChallenge",d,a),f=await bl({secret:a.jwt.secret,token:e,salt:eB});if(ev("webauthnChallenge",a,c),!f)throw new l.InvalidCheck("WebAuthn challenge was missing");return f}};function eD(a){return encodeURIComponent(a).replace(/%20/g,"+")}async function eE(a,b,c){var d,e;let f,g,h,i,j,{logger:k,provider:m}=c,{token:n,userinfo:o}=m;if(n?.url&&"authjs.dev"!==n.url.host||o?.url&&"authjs.dev"!==o.url.host)f={issuer:m.issuer??"https://authjs.dev",token_endpoint:n?.url.toString(),userinfo_endpoint:o?.url.toString()};else{let a=new URL(m.issuer),b=await db(a,{[cV]:!0,[cY]:m[bG]});if(!(f=await de(a,b)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!f.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let p={client_id:m.clientId,...m.client};switch(p.token_endpoint_auth_method){case void 0:case"client_secret_basic":g=(a,b,c,d)=>{var e,f;let g,h,i;d.set("authorization",(e=m.clientId,f=m.clientSecret,g=eD(e),h=eD(f),i=btoa(`${g}:${h}`),`Basic ${i}`))};break;case"client_secret_post":dd(d=m.clientSecret,'"clientSecret"'),g=(a,b,c,e)=>{c.set("client_id",b.client_id),c.set("client_secret",d)};break;case"client_secret_jwt":dd(e=m.clientSecret,'"clientSecret"'),j=void 0,g=async(a,b,c,d)=>{i||=await crypto.subtle.importKey("raw",c1(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let f={alg:"HS256"},g=dn(a,b);j?.(f,g);let h=`${c2(c1(JSON.stringify(f)))}.${c2(c1(JSON.stringify(g)))}`,k=await crypto.subtle.sign(i.algorithm,i,c1(h));c.set("client_id",b.client_id),c.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),c.set("client_assertion",`${h}.${c2(new Uint8Array(k))}`)};break;case"private_key_jwt":g=function(a,b){let{key:c,kid:d}=a instanceof CryptoKey?{key:a}:a?.key instanceof CryptoKey?(void 0!==a.kid&&dd(a.kid,'"kid"'),{key:a.key,kid:a.kid}):{};var e='"clientPrivateKey.key"';if(!(c instanceof CryptoKey))throw cU(`${e} must be a CryptoKey`,cT);if("private"!==c.type)throw cU(`${e} must be a private CryptoKey`,cS);return async(a,e,f,g)=>{let h={alg:function(a){switch(a.algorithm.name){case"RSA-PSS":switch(a.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new c3("unsupported RsaHashedKeyAlgorithm hash name",{cause:a})}case"RSASSA-PKCS1-v1_5":switch(a.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new c3("unsupported RsaHashedKeyAlgorithm hash name",{cause:a})}case"ECDSA":switch(a.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new c3("unsupported EcKeyAlgorithm namedCurve",{cause:a})}case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return a.algorithm.name;case"EdDSA":return"Ed25519";default:throw new c3("unsupported CryptoKey algorithm name",{cause:a})}}(c),kid:d},i=dn(a,e);b?.[cZ]?.(h,i),f.set("client_id",e.client_id),f.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),f.set("client_assertion",await dp(h,i,c))}}(m.token.clientPrivateKey,{[cZ](a,b){b.aud=[f.issuer,f.token_endpoint]}});break;case"none":g=(a,b,c,d)=>{c.set("client_id",b.client_id)};break;default:throw Error("unsupported client authentication method")}let q=[],r=await ez.use(b,q,c);try{h=function(a,b,c,d){var e;if(dl(a),dm(b),c instanceof URL&&(c=c.searchParams),!(c instanceof URLSearchParams))throw cU('"parameters" must be an instance of URLSearchParams, or URL',cT);if(en(c,"response"))throw c5('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',d9,{parameters:c});let f=en(c,"iss"),g=en(c,"state");if(!f&&a.authorization_response_iss_parameter_supported)throw c5('response parameter "iss" (issuer) missing',d9,{parameters:c});if(f&&f!==a.issuer)throw c5('unexpected "iss" (issuer) response parameter value',d9,{expected:a.issuer,parameters:c});switch(d){case void 0:case ep:if(void 0!==g)throw c5('unexpected "state" response parameter encountered',d9,{expected:void 0,parameters:c});break;case eo:break;default:if(dd(d,'"expectedState" argument'),g!==d)throw c5(void 0===g?'response parameter "state" missing':'unexpected "state" response parameter value',d9,{expected:d,parameters:c})}if(en(c,"error"))throw new dv("authorization response from the server is an error",{cause:c});let h=en(c,"id_token"),i=en(c,"token");if(void 0!==h||void 0!==i)throw new c3("implicit and hybrid flows are not supported");return e=new URLSearchParams(c),dV.add(e),e}(f,p,new URLSearchParams(a),m.checks.includes("state")?r:eo)}catch(a){if(a instanceof dv){let b={providerId:m.id,...Object.fromEntries(a.cause.entries())};throw k.debug("OAuthCallbackError",b),new l.OAuthCallbackError("OAuth Provider returned an error",b)}throw a}let s=await ex.use(b,q,c),t=m.callbackUrl;!c.isOnRedirectProxy&&m.redirectProxyUrl&&(t=m.redirectProxyUrl);let u=await dX(f,p,g,h,t,s??"decoy",{[cV]:!0,[cY]:(...a)=>(m.checks.includes("pkce")||a[1].body.delete("code_verifier"),(m[bG]??fetch)(...a))});m.token?.conform&&(u=await m.token.conform(u.clone())??u);let v={},w="oidc"===m.type;if(m[bH])switch(m.id){case"microsoft-entra-id":case"azure-ad":{let a=await u.clone().json();if(a.error){let b={providerId:m.id,...a};throw new l.OAuthCallbackError(`OAuth Provider returned an error: ${a.error}`,b)}let{tid:b}=function(a){let b,c;if("string"!=typeof a)throw new P("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new P("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new P("Invalid JWT");if(!d)throw new P("JWTs must contain a payload");try{b=F(d)}catch{throw new P("Failed to base64url decode the payload")}try{c=JSON.parse(z.decode(b))}catch{throw new P("Failed to parse the decoded payload as JSON")}if(!av(c))throw new P("Invalid JWT Claims Set");return c}(a.id_token);if("string"==typeof b){let a=f.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",c=new URL(f.issuer.replace(a,b)),d=await db(c,{[cY]:m[bG]});f=await de(c,d)}}}let x=await d0(f,p,u,{expectedNonce:await eA.use(b,q,c),requireIdToken:w});if(w){let b=dO(x);if(v=b,m[bH]&&"apple"===m.id)try{v.user=JSON.parse(a?.user)}catch{}if(!1===m.idToken){let a=await dG(f,p,x.access_token,{[cY]:m[bG],[cV]:!0});v=await dJ(f,p,b.sub,a)}}else if(o?.request){let a=await o.request({tokens:x,provider:m});a instanceof Object&&(v=a)}else if(o?.url){let a=await dG(f,p,x.access_token,{[cY]:m[bG],[cV]:!0});v=await a.json()}else throw TypeError("No userinfo endpoint configured");return x.expires_in&&(x.expires_at=Math.floor(Date.now()/1e3)+Number(x.expires_in)),{...await eF(v,m,x,k),profile:v,cookies:q}}async function eF(a,b,c,d){try{let d=await b.profile(a,c);return{user:{...d,id:crypto.randomUUID(),email:d.email?.toLowerCase()},account:{...c,provider:b.id,type:b.type,providerAccountId:d.id??crypto.randomUUID()}}}catch(c){d.debug("getProfile error details",a),d.error(new l.OAuthProfileParseError(c,{provider:b.id}))}}async function eG(a,b,c,d){let e=await eL(a,b,c),{cookie:f}=await eC.create(a,e.challenge,c);return{status:200,cookies:[...d??[],f],body:{action:"register",options:e},headers:{"Content-Type":"application/json"}}}async function eH(a,b,c,d){let e=await eK(a,b,c),{cookie:f}=await eC.create(a,e.challenge);return{status:200,cookies:[...d??[],f],body:{action:"authenticate",options:e},headers:{"Content-Type":"application/json"}}}async function eI(a,b,c){let d,{adapter:e,provider:f}=a,g=b.body&&"string"==typeof b.body.data?JSON.parse(b.body.data):void 0;if(!g||"object"!=typeof g||!("id"in g)||"string"!=typeof g.id)throw new l.AuthError("Invalid WebAuthn Authentication response");let h=eO(eN(g.id)),i=await e.getAuthenticator(h);if(!i)throw new l.AuthError(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:h})}`);let{challenge:j}=await eC.use(a,b.cookies,c);try{var k;let c=f.getRelayingParty(a,b);d=await f.simpleWebAuthn.verifyAuthenticationResponse({...f.verifyAuthenticationOptions,expectedChallenge:j,response:g,authenticator:{...k=i,credentialDeviceType:k.credentialDeviceType,transports:eP(k.transports),credentialID:eN(k.credentialID),credentialPublicKey:eN(k.credentialPublicKey)},expectedOrigin:c.origin,expectedRPID:c.id})}catch(a){throw new l.WebAuthnVerificationError(a)}let{verified:m,authenticationInfo:n}=d;if(!m)throw new l.WebAuthnVerificationError("WebAuthn authentication response could not be verified");try{let{newCounter:a}=n;await e.updateAuthenticatorCounter(i.credentialID,a)}catch(a){throw new l.AdapterError(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:h,oldCounter:i.counter,newCounter:n.newCounter})}`,a)}let o=await e.getAccount(i.providerAccountId,f.id);if(!o)throw new l.AuthError(`WebAuthn account not found in database: ${JSON.stringify({credentialID:h,providerAccountId:i.providerAccountId})}`);let p=await e.getUser(o.userId);if(!p)throw new l.AuthError(`WebAuthn user not found in database: ${JSON.stringify({credentialID:h,providerAccountId:i.providerAccountId,userID:o.userId})}`);return{account:o,user:p}}async function eJ(a,b,c){var d;let e,{provider:f}=a,g=b.body&&"string"==typeof b.body.data?JSON.parse(b.body.data):void 0;if(!g||"object"!=typeof g||!("id"in g)||"string"!=typeof g.id)throw new l.AuthError("Invalid WebAuthn Registration response");let{challenge:h,registerData:i}=await eC.use(a,b.cookies,c);if(!i)throw new l.AuthError("Missing user registration data in WebAuthn challenge cookie");try{let c=f.getRelayingParty(a,b);e=await f.simpleWebAuthn.verifyRegistrationResponse({...f.verifyRegistrationOptions,expectedChallenge:h,response:g,expectedOrigin:c.origin,expectedRPID:c.id})}catch(a){throw new l.WebAuthnVerificationError(a)}if(!e.verified||!e.registrationInfo)throw new l.WebAuthnVerificationError("WebAuthn registration response could not be verified");let j={providerAccountId:eO(e.registrationInfo.credentialID),provider:a.provider.id,type:f.type},k={providerAccountId:j.providerAccountId,counter:e.registrationInfo.counter,credentialID:eO(e.registrationInfo.credentialID),credentialPublicKey:eO(e.registrationInfo.credentialPublicKey),credentialBackedUp:e.registrationInfo.credentialBackedUp,credentialDeviceType:e.registrationInfo.credentialDeviceType,transports:(d=g.response.transports,d?.join(","))};return{user:i,account:j,authenticator:k}}async function eK(a,b,c){let{provider:d,adapter:e}=a,f=c&&c.id?await e.listAuthenticatorsByUserId(c.id):null,g=d.getRelayingParty(a,b);return await d.simpleWebAuthn.generateAuthenticationOptions({...d.authenticationOptions,rpID:g.id,allowCredentials:f?.map(a=>({id:eN(a.credentialID),type:"public-key",transports:eP(a.transports)}))})}async function eL(a,b,c){let{provider:d,adapter:e}=a,f=c.id?await e.listAuthenticatorsByUserId(c.id):null,g=bz(32),h=d.getRelayingParty(a,b);return await d.simpleWebAuthn.generateRegistrationOptions({...d.registrationOptions,userID:g,userName:c.email,userDisplayName:c.name??void 0,rpID:h.id,rpName:h.name,excludeCredentials:f?.map(a=>({id:eN(a.credentialID),type:"public-key",transports:eP(a.transports)}))})}function eM(a){let{provider:b,adapter:c}=a;if(!c)throw new l.MissingAdapter("An adapter is required for the WebAuthn provider");if(!b||"webauthn"!==b.type)throw new l.InvalidProvider("Provider must be WebAuthn");return{...a,provider:b,adapter:c}}function eN(a){return new Uint8Array(Buffer.from(a,"base64"))}function eO(a){return Buffer.from(a).toString("base64")}function eP(a){return a?a.split(","):void 0}async function eQ(a,b,c,d){if(!b.provider)throw new l.InvalidProvider("Callback route called without provider");let{query:e,body:f,method:g,headers:h}=a,{provider:i,adapter:j,url:k,callbackUrl:m,pages:n,jwt:o,events:p,callbacks:q,session:{strategy:r,maxAge:s},logger:t}=b,u="jwt"===r;try{if("oauth"===i.type||"oidc"===i.type){let g,h=i.authorization?.url.searchParams.get("response_mode")==="form_post"?f:e;if(b.isOnRedirectProxy&&h?.state){let a=await ez.decode(h.state,b);if(a?.origin&&new URL(a.origin).origin!==b.url.origin){let b=`${a.origin}?${new URLSearchParams(h)}`;return t.debug("Proxy redirecting to",b),{redirect:b,cookies:d}}}let l=await eE(h,a.cookies,b);l.cookies.length&&d.push(...l.cookies),t.debug("authorization result",l);let{user:r,account:v,profile:w}=l;if(!r||!v||!w)return{redirect:`${k}/signin`,cookies:d};if(j){let{getUserByAccount:a}=j;g=await a({providerAccountId:v.providerAccountId,provider:i.id})}let x=await eR({user:g??r,account:v,profile:w},b);if(x)return{redirect:x,cookies:d};let{user:y,session:z,isNewUser:A}=await cQ(c.value,r,v,b);if(u){let a={name:y.name,email:y.email,picture:y.image,sub:y.id?.toString()},e=await q.jwt({token:a,user:y,account:v,profile:w,isNewUser:A,trigger:A?"signUp":"signIn"});if(null===e)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,f=await o.encode({...o,token:e,salt:a}),g=new Date;g.setTime(g.getTime()+1e3*s);let h=c.chunk(f,{expires:g});d.push(...h)}}else d.push({name:b.cookies.sessionToken.name,value:z.sessionToken,options:{...b.cookies.sessionToken.options,expires:z.expires}});if(await p.signIn?.({user:y,account:v,profile:w,isNewUser:A}),A&&n.newUser)return{redirect:`${n.newUser}${n.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:m})}`,cookies:d};return{redirect:m,cookies:d}}if("email"===i.type){let a=e?.token,f=e?.email;if(!a){let b=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!a}});throw b.name="Configuration",b}let g=i.secret??b.secret,h=await j.useVerificationToken({identifier:f,token:await by(`${a}${g}`)}),k=!!h,r=k&&h.expires.valueOf()<Date.now();if(!k||r||f&&h.identifier!==f)throw new l.Verification({hasInvite:k,expired:r});let{identifier:t}=h,v=await j.getUserByEmail(t)??{id:crypto.randomUUID(),email:t,emailVerified:null},w={providerAccountId:v.email,userId:v.id,type:"email",provider:i.id},x=await eR({user:v,account:w},b);if(x)return{redirect:x,cookies:d};let{user:y,session:z,isNewUser:A}=await cQ(c.value,v,w,b);if(u){let a={name:y.name,email:y.email,picture:y.image,sub:y.id?.toString()},e=await q.jwt({token:a,user:y,account:w,isNewUser:A,trigger:A?"signUp":"signIn"});if(null===e)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,f=await o.encode({...o,token:e,salt:a}),g=new Date;g.setTime(g.getTime()+1e3*s);let h=c.chunk(f,{expires:g});d.push(...h)}}else d.push({name:b.cookies.sessionToken.name,value:z.sessionToken,options:{...b.cookies.sessionToken.options,expires:z.expires}});if(await p.signIn?.({user:y,account:w,isNewUser:A}),A&&n.newUser)return{redirect:`${n.newUser}${n.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:m})}`,cookies:d};return{redirect:m,cookies:d}}if("credentials"===i.type&&"POST"===g){let a=f??{};Object.entries(e??{}).forEach(([a,b])=>k.searchParams.set(a,b));let j=await i.authorize(a,new Request(k,{headers:h,method:g,body:JSON.stringify(f)}));if(j)j.id=j.id?.toString()??crypto.randomUUID();else throw new l.CredentialsSignin;let n={providerAccountId:j.id,type:"credentials",provider:i.id},r=await eR({user:j,account:n,credentials:a},b);if(r)return{redirect:r,cookies:d};let t={name:j.name,email:j.email,picture:j.image,sub:j.id},u=await q.jwt({token:t,user:j,account:n,isNewUser:!1,trigger:"signIn"});if(null===u)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,e=await o.encode({...o,token:u,salt:a}),f=new Date;f.setTime(f.getTime()+1e3*s);let g=c.chunk(e,{expires:f});d.push(...g)}return await p.signIn?.({user:j,account:n}),{redirect:m,cookies:d}}else if("webauthn"===i.type&&"POST"===g){let e,f,g,h=a.body?.action;if("string"!=typeof h||"authenticate"!==h&&"register"!==h)throw new l.AuthError("Invalid action parameter");let i=eM(b);switch(h){case"authenticate":{let b=await eI(i,a,d);e=b.user,f=b.account;break}case"register":{let c=await eJ(b,a,d);e=c.user,f=c.account,g=c.authenticator}}await eR({user:e,account:f},b);let{user:j,isNewUser:k,session:r,account:t}=await cQ(c.value,e,f,b);if(!t)throw new l.AuthError("Error creating or finding account");if(g&&j.id&&await i.adapter.createAuthenticator({...g,userId:j.id}),u){let a={name:j.name,email:j.email,picture:j.image,sub:j.id?.toString()},e=await q.jwt({token:a,user:j,account:t,isNewUser:k,trigger:k?"signUp":"signIn"});if(null===e)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,f=await o.encode({...o,token:e,salt:a}),g=new Date;g.setTime(g.getTime()+1e3*s);let h=c.chunk(f,{expires:g});d.push(...h)}}else d.push({name:b.cookies.sessionToken.name,value:r.sessionToken,options:{...b.cookies.sessionToken.options,expires:r.expires}});if(await p.signIn?.({user:j,account:t,isNewUser:k}),k&&n.newUser)return{redirect:`${n.newUser}${n.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:m})}`,cookies:d};return{redirect:m,cookies:d}}throw new l.InvalidProvider(`Callback for provider type (${i.type}) is not supported`)}catch(b){if(b instanceof l.AuthError)throw b;let a=new l.CallbackRouteError(b,{provider:i.id});throw t.debug("callback route error details",{method:g,query:e,body:f}),a}}async function eR(a,b){let c,{signIn:d,redirect:e}=b.callbacks;try{c=await d(a)}catch(a){if(a instanceof l.AuthError)throw a;throw new l.AccessDenied(a)}if(!c)throw new l.AccessDenied("AccessDenied");if("string"==typeof c)return await e({url:c,baseUrl:b.url.origin})}async function eS(a,b,c,d,e){let{adapter:f,jwt:g,events:h,callbacks:i,logger:j,session:{strategy:k,maxAge:m}}=a,n={body:null,headers:{"Content-Type":"application/json",...!d&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:c},o=b.value;if(!o)return n;if("jwt"===k){try{let c=a.cookies.sessionToken.name,f=await g.decode({...g,token:o,salt:c});if(!f)throw Error("Invalid JWT");let j=await i.jwt({token:f,...d&&{trigger:"update"},session:e}),k=cP(m);if(null!==j){let a={user:{name:j.name,email:j.email,image:j.picture},expires:k.toISOString()},d=await i.session({session:a,token:j});n.body=d;let e=await g.encode({...g,token:j,salt:c}),f=b.chunk(e,{expires:k});n.cookies?.push(...f),await h.session?.({session:d,token:j})}else n.cookies?.push(...b.clean())}catch(a){j.error(new l.JWTSessionError(a)),n.cookies?.push(...b.clean())}return n}try{let{getSessionAndUser:c,deleteSession:g,updateSession:j}=f,k=await c(o);if(k&&k.session.expires.valueOf()<Date.now()&&(await g(o),k=null),k){let{user:b,session:c}=k,f=a.session.updateAge,g=c.expires.valueOf()-1e3*m+1e3*f,l=cP(m);g<=Date.now()&&await j({sessionToken:o,expires:l});let p=await i.session({session:{...c,user:b},user:b,newSession:e,...d?{trigger:"update"}:{}});n.body=p,n.cookies?.push({name:a.cookies.sessionToken.name,value:o,options:{...a.cookies.sessionToken.options,expires:l}}),await h.session?.({session:p})}else o&&n.cookies?.push(...b.clean())}catch(a){j.error(new l.SessionTokenError(a))}return n}async function eT(a,b){let c,d,{logger:e,provider:f}=b,g=f.authorization?.url;if(!g||"authjs.dev"===g.host){let a=new URL(f.issuer),b=await db(a,{[cY]:f[bG],[cV]:!0}),c=await de(a,b).catch(b=>{if(!(b instanceof TypeError)||"Invalid URL"!==b.message)throw b;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${a}`)});if(!c.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");g=new URL(c.authorization_endpoint)}let h=g.searchParams,i=f.callbackUrl;!b.isOnRedirectProxy&&f.redirectProxyUrl&&(i=f.redirectProxyUrl,d=f.callbackUrl,e.debug("using redirect proxy",{redirect_uri:i,data:d}));let j=Object.assign({response_type:"code",client_id:f.clientId,redirect_uri:i,...f.authorization?.params},Object.fromEntries(f.authorization?.url.searchParams??[]),a);for(let a in j)h.set(a,j[a]);let k=[];f.authorization?.url.searchParams.get("response_mode")==="form_post"&&(b.cookies.state.options.sameSite="none",b.cookies.state.options.secure=!0,b.cookies.nonce.options.sameSite="none",b.cookies.nonce.options.secure=!0);let l=await ez.create(b,d);if(l&&(h.set("state",l.value),k.push(l.cookie)),f.checks?.includes("pkce"))if(c&&!c.code_challenge_methods_supported?.includes("S256"))"oidc"===f.type&&(f.checks=["nonce"]);else{let{value:a,cookie:c}=await ex.create(b);h.set("code_challenge",a),h.set("code_challenge_method","S256"),k.push(c)}let m=await eA.create(b);return m&&(h.set("nonce",m.value),k.push(m.cookie)),"oidc"!==f.type||g.searchParams.has("scope")||g.searchParams.set("scope","openid profile email"),e.debug("authorization url is ready",{url:g,cookies:k,provider:f}),{redirect:g.toString(),cookies:k}}async function eU(a,b){let c,{body:d}=a,{provider:e,callbacks:f,adapter:g}=b,h=(e.normalizeIdentifier??function(a){if(!a)throw Error("Missing email from request body.");let[b,c]=a.toLowerCase().trim().split("@");return c=c.split(",")[0],`${b}@${c}`})(d?.email),i={id:crypto.randomUUID(),email:h,emailVerified:null},j=await g.getUserByEmail(h)??i,k={providerAccountId:h,userId:j.id,type:"email",provider:e.id};try{c=await f.signIn({user:j,account:k,email:{verificationRequest:!0}})}catch(a){throw new l.AccessDenied(a)}if(!c)throw new l.AccessDenied("AccessDenied");if("string"==typeof c)return{redirect:await f.redirect({url:c,baseUrl:b.url.origin})};let{callbackUrl:m,theme:n}=b,o=await e.generateVerificationToken?.()??bz(32),p=new Date(Date.now()+(e.maxAge??86400)*1e3),q=e.secret??b.secret,r=new URL(b.basePath,b.url.origin),s=e.sendVerificationRequest({identifier:h,token:o,expires:p,url:`${r}/callback/${e.id}?${new URLSearchParams({callbackUrl:m,token:o,email:h})}`,provider:e,theme:n,request:new Request(a.url,{headers:a.headers,method:a.method,body:"POST"===a.method?JSON.stringify(a.body??{}):void 0})}),t=g.createVerificationToken?.({identifier:h,token:await by(`${o}${q}`),expires:p});return await Promise.all([s,t]),{redirect:`${r}/verify-request?${new URLSearchParams({provider:e.id,type:e.type})}`}}async function eV(a,b,c){let d=`${c.url.origin}${c.basePath}/signin`;if(!c.provider)return{redirect:d,cookies:b};switch(c.provider.type){case"oauth":case"oidc":{let{redirect:d,cookies:e}=await eT(a.query,c);return e&&b.push(...e),{redirect:d,cookies:b}}case"email":return{...await eU(a,c),cookies:b};default:return{redirect:d,cookies:b}}}async function eW(a,b,c){let{jwt:d,events:e,callbackUrl:f,logger:g,session:h}=c,i=b.value;if(!i)return{redirect:f,cookies:a};try{if("jwt"===h.strategy){let a=c.cookies.sessionToken.name,b=await d.decode({...d,token:i,salt:a});await e.signOut?.({token:b})}else{let a=await c.adapter?.deleteSession(i);await e.signOut?.({session:a})}}catch(a){g.error(new l.SignOutError(a))}return a.push(...b.clean()),{redirect:f,cookies:a}}async function eX(a,b){let{adapter:c,jwt:d,session:{strategy:e}}=a,f=b.value;if(!f)return null;if("jwt"===e){let b=a.cookies.sessionToken.name,c=await d.decode({...d,token:f,salt:b});if(c&&c.sub)return{id:c.sub,name:c.name,email:c.email,image:c.picture}}else{let a=await c?.getSessionAndUser(f);if(a)return a.user}return null}async function eY(a,b,c,d){let e=eM(b),{provider:f}=e,{action:g}=a.query??{};if("register"!==g&&"authenticate"!==g&&void 0!==g)return{status:400,body:{error:"Invalid action"},cookies:d,headers:{"Content-Type":"application/json"}};let h=await eX(b,c),i=h?{user:h,exists:!0}:await f.getUserInfo(b,a),j=i?.user;switch(function(a,b,c){let{user:d,exists:e=!1}=c??{};switch(a){case"authenticate":return"authenticate";case"register":if(d&&b===e)return"register";break;case void 0:if(!b)if(!d)return"authenticate";else if(e)return"authenticate";else return"register"}return null}(g,!!h,i)){case"authenticate":return eH(e,a,j,d);case"register":if("string"==typeof j?.email)return eG(e,a,j,d);break;default:return{status:400,body:{error:"Invalid request"},cookies:d,headers:{"Content-Type":"application/json"}}}}async function eZ(a,b){let{action:c,providerId:d,error:e,method:f}=a,g=b.skipCSRFCheck===bE,{options:h,cookies:i}=await bN({authOptions:b,action:c,providerId:d,url:a.url,callbackUrl:a.body?.callbackUrl??a.query?.callbackUrl,csrfToken:a.body?.csrfToken,cookies:a.cookies,isPost:"POST"===f,csrfDisabled:g}),j=new k(h.cookies.sessionToken,a.cookies,h.logger);if("GET"===f){let b=cO({...h,query:a.query,cookies:i});switch(c){case"callback":return await eQ(a,h,j,i);case"csrf":return b.csrf(g,h,i);case"error":return b.error(e);case"providers":return b.providers(h.providers);case"session":return await eS(h,j,i);case"signin":return b.signin(d,e);case"signout":return b.signout();case"verify-request":return b.verifyRequest();case"webauthn-options":return await eY(a,h,j,i)}}else{let{csrfTokenVerified:b}=h;switch(c){case"callback":return"credentials"===h.provider.type&&bB(c,b),await eQ(a,h,j,i);case"session":return bB(c,b),await eS(h,j,i,!0,a.body?.data);case"signin":return bB(c,b),await eV(a,i,h);case"signout":return bB(c,b),await eW(i,j,h)}}throw new l.UnknownAction(`Cannot handle action: ${c}`)}function e$(a,b,c,d,e){let f,g=e?.basePath,h=d.AUTH_URL??d.NEXTAUTH_URL;if(h)f=new URL(h),g&&"/"!==g&&"/"!==f.pathname&&(f.pathname!==g&&br(e).warn("env-url-basepath-mismatch"),f.pathname="/");else{let a=c.get("x-forwarded-host")??c.get("host"),d=c.get("x-forwarded-proto")??b??"https",e=d.endsWith(":")?d:d+":";f=new URL(`${e}//${a}`)}let i=f.toString().replace(/\/$/,"");if(g){let b=g?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${i}/${b}/${a}`)}return new URL(`${i}/${a}`)}async function e_(a,b){let c=br(b),d=await bw(a,b);if(!d)return Response.json("Bad request.",{status:400});let e=function(a,b){let{url:c}=a,d=[];if(!m&&b.debug&&d.push("debug-enabled"),!b.trustHost)return new l.UntrustedHost(`Host must be trusted. URL was: ${a.url}`);if(!b.secret?.length)return new l.MissingSecret("Please define a `secret`");let e=a.query?.callbackUrl;if(e&&!n(e,c.origin))return new l.InvalidCallbackUrl(`Invalid callback URL. Received: ${e}`);let{callbackUrl:f}=j(b.useSecureCookies??"https:"===c.protocol),g=a.cookies?.[b.cookies?.callbackUrl?.name??f.name];if(g&&!n(g,c.origin))return new l.InvalidCallbackUrl(`Invalid callback URL. Received: ${g}`);let h=!1;for(let a of b.providers){let b="function"==typeof a?a():a;if(("oauth"===b.type||"oidc"===b.type)&&!(b.issuer??b.options?.issuer)){let a,{authorization:c,token:d,userinfo:e}=b;if("string"==typeof c||c?.url?"string"==typeof d||d?.url?"string"==typeof e||e?.url||(a="userinfo"):a="token":a="authorization",a)return new l.InvalidEndpoints(`Provider "${b.id}" is missing both \`issuer\` and \`${a}\` endpoint config. At least one of them is required`)}if("credentials"===b.type)o=!0;else if("email"===b.type)p=!0;else if("webauthn"===b.type){var i;if(q=!0,b.simpleWebAuthnBrowserVersion&&(i=b.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(i)))return new l.AuthError(`Invalid provider config for "${b.id}": simpleWebAuthnBrowserVersion "${b.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(b.enableConditionalUI){if(h)return new l.DuplicateConditionalUI("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(h=!0,!Object.values(b.formFields).some(a=>a.autocomplete&&a.autocomplete.toString().indexOf("webauthn")>-1))return new l.MissingWebAuthnAutocomplete(`Provider "${b.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(o){let a=b.session?.strategy==="database",c=!b.providers.some(a=>"credentials"!==("function"==typeof a?a():a).type);if(a&&c)return new l.UnsupportedStrategy("Signing in with credentials only supported if JWT strategy is enabled");if(b.providers.some(a=>{let b="function"==typeof a?a():a;return"credentials"===b.type&&!b.authorize}))return new l.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}let{adapter:k,session:u}=b,v=[];if(p||u?.strategy==="database"||!u?.strategy&&k)if(p){if(!k)return new l.MissingAdapter("Email login requires an adapter");v.push(...r)}else{if(!k)return new l.MissingAdapter("Database session requires an adapter");v.push(...s)}if(q){if(!b.experimental?.enableWebAuthn)return new l.ExperimentalFeatureNotEnabled("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(d.push("experimental-webauthn"),!k)return new l.MissingAdapter("WebAuthn requires an adapter");v.push(...t)}if(k){let a=v.filter(a=>!(a in k));if(a.length)return new l.MissingAdapterMethods(`Required adapter methods were missing: ${a.join(", ")}`)}return m||(m=!0),d}(d,b);if(Array.isArray(e))e.forEach(c.warn);else if(e){if(c.error(e),!new Set(["signin","signout","error","verify-request"]).has(d.action)||"GET"!==d.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:a,theme:f}=b,g=a?.error&&d.url.searchParams.get("callbackUrl")?.startsWith(a.error);if(!a?.error||g)return g&&c.error(new l.ErrorPageLoop(`The error page ${a?.error} should not require authentication`)),bx(cO({theme:f}).error("Configuration"));let h=`${d.url.origin}${a.error}?error=Configuration`;return Response.redirect(h)}let f=a.headers?.has("X-Auth-Return-Redirect"),g=b.raw===bF;try{let a=await eZ(d,b);if(g)return a;let c=bx(a),e=c.headers.get("Location");if(!f||!e)return c;return Response.json({url:e},{headers:c.headers})}catch(m){c.error(m);let e=m instanceof l.AuthError;if(e&&g&&!f)throw m;if("POST"===a.method&&"session"===d.action)return Response.json(null,{status:400});let h=new URLSearchParams({error:(0,l.isClientError)(m)?m.type:"Configuration"});m instanceof l.CredentialsSignin&&h.set("code",m.code);let i=e&&m.kind||"error",j=b.pages?.[i]??`${b.basePath}/${i.toLowerCase()}`,k=`${d.url.origin}${j}?${h}`;if(f)return Response.json({url:k});return Response.redirect(k)}}var e0=a.i(43405);function e1(a){let b=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!b)return a;let{origin:c}=new URL(b),{href:d,origin:e}=a.nextUrl;return new e0.NextRequest(d.replace(e,c),a)}function e2(a){try{a.secret??(a.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let b=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!b)return;let{pathname:c}=new URL(b);if("/"===c)return;a.basePath||(a.basePath=c)}catch{}finally{a.basePath||(a.basePath="/api/auth"),function(a,b,c=!1){try{let d=a.AUTH_URL;d&&(b.basePath?c||br(b).warn("env-url-basepath-redundant"):b.basePath=new URL(d).pathname)}catch{}finally{b.basePath??(b.basePath="/auth")}if(!b.secret?.length){b.secret=[];let c=a.AUTH_SECRET;for(let d of(c&&b.secret.push(c),[1,2,3])){let c=a[`AUTH_SECRET_${d}`];c&&b.secret.unshift(c)}}b.redirectProxyUrl??(b.redirectProxyUrl=a.AUTH_REDIRECT_PROXY_URL),b.trustHost??(b.trustHost=!!(a.AUTH_URL??a.AUTH_TRUST_HOST??a.VERCEL??a.CF_PAGES??"production"!==a.NODE_ENV)),b.providers=b.providers.map(b=>{let{id:c}="function"==typeof b?b({}):b,d=c.toUpperCase().replace(/-/g,"_"),e=a[`AUTH_${d}_ID`],f=a[`AUTH_${d}_SECRET`],g=a[`AUTH_${d}_ISSUER`],h=a[`AUTH_${d}_KEY`],i="function"==typeof b?b({clientId:e,clientSecret:f,issuer:g,apiKey:h}):b;return"oauth"===i.type||"oidc"===i.type?(i.clientId??(i.clientId=e),i.clientSecret??(i.clientSecret=f),i.issuer??(i.issuer=g)):"email"===i.type&&(i.apiKey??(i.apiKey=h)),i})}(process.env,a,!0)}}var e3=a.i(5246);async function e4(a,b){return e_(new Request(e$("session",a.get("x-forwarded-proto"),a,process.env,b),{headers:{cookie:a.get("cookie")??""}}),{...b,callbacks:{...b.callbacks,async session(...a){let c=await b.callbacks?.session?.(...a)??{...a[0].session,expires:a[0].session.expires?.toISOString?.()??a[0].session.expires};return{user:a[0].user??a[0].token,...c}}}})}function e5(a){return"function"==typeof a}function e6(a,b){return"function"==typeof a?async(...c)=>{if(!c.length){let c=await (0,e3.headers)(),d=await a(void 0);return b?.(d),e4(c,d).then(a=>a.json())}if(c[0]instanceof Request){let d=c[0],e=c[1],f=await a(d);return b?.(f),e7([d,e],f)}if(e5(c[0])){let d=c[0];return async(...c)=>{let e=await a(c[0]);return b?.(e),e7(c,e,d)}}let d="req"in c[0]?c[0].req:c[0],e="res"in c[0]?c[0].res:c[1],f=await a(d);return b?.(f),e4(new Headers(d.headers),f).then(async a=>{let b=await a.json();for(let b of a.headers.getSetCookie())"headers"in e?e.headers.append("set-cookie",b):e.appendHeader("set-cookie",b);return b})}:(...b)=>{if(!b.length)return Promise.resolve((0,e3.headers)()).then(b=>e4(b,a).then(a=>a.json()));if(b[0]instanceof Request)return e7([b[0],b[1]],a);if(e5(b[0])){let c=b[0];return async(...b)=>e7(b,a,c).then(a=>a)}let c="req"in b[0]?b[0].req:b[0],d="res"in b[0]?b[0].res:b[1];return e4(new Headers(c.headers),a).then(async a=>{let b=await a.json();for(let b of a.headers.getSetCookie())"headers"in d?d.headers.append("set-cookie",b):d.appendHeader("set-cookie",b);return b})}}async function e7(a,b,c){let d=e1(a[0]),e=await e4(d.headers,b),f=await e.json(),g=!0;b.callbacks?.authorized&&(g=await b.callbacks.authorized({request:d,auth:f}));let h=e0.NextResponse.next?.();if(g instanceof Response){var i,j,k;let a,c;h=g;let e=g.headers.get("Location"),{pathname:f}=d.nextUrl;e&&(i=f,j=new URL(e).pathname,k=b,a=j.replace(`${i}/`,""),c=Object.values(k.pages??{}),(e8.has(a)||c.includes(j))&&j===i)&&(g=!0)}else if(c)d.auth=f,h=await c(d,a[1])??e0.NextResponse.next();else if(!g){let a=b.pages?.signIn??`${b.basePath}/signin`;if(d.nextUrl.pathname!==a){let b=d.nextUrl.clone();b.pathname=a,b.searchParams.set("callbackUrl",d.nextUrl.href),h=e0.NextResponse.redirect(b)}}let l=new Response(h?.body,h);for(let a of e.headers.getSetCookie())l.headers.append("set-cookie",a);return l}let e8=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var e9=a.i(73727);async function fa(a,b={},c,d){let e=new Headers(await (0,e3.headers)()),{redirect:f=!0,redirectTo:g,...h}=b instanceof FormData?Object.fromEntries(b):b,i=g?.toString()??e.get("Referer")??"/",j=e$("signin",e.get("x-forwarded-proto"),e,process.env,d);if(!a)return j.searchParams.append("callbackUrl",i),f&&(0,e9.redirect)(j.toString()),j.toString();let k=`${j}/${a}?${new URLSearchParams(c)}`,l={};for(let b of d.providers){let{options:c,...d}="function"==typeof b?b():b,e=c?.id??d.id;if(e===a){l={id:e,type:c?.type??d.type};break}}if(!l.id){let a=`${j}?${new URLSearchParams({callbackUrl:i})}`;return f&&(0,e9.redirect)(a),a}"credentials"===l.type&&(k=k.replace("signin","callback")),e.set("Content-Type","application/x-www-form-urlencoded");let m=new Request(k,{method:"POST",headers:e,body:new URLSearchParams({...h,callbackUrl:i})}),n=await e_(m,{...d,raw:bF,skipCSRFCheck:bE}),o=await (0,e3.cookies)();for(let a of n?.cookies??[])o.set(a.name,a.value,a.options);let p=(n instanceof Response?n.headers.get("Location"):n.redirect)??k;return f?(0,e9.redirect)(p):p}async function fb(a,b){let c=new Headers(await (0,e3.headers)());c.set("Content-Type","application/x-www-form-urlencoded");let d=e$("signout",c.get("x-forwarded-proto"),c,process.env,b),e=new URLSearchParams({callbackUrl:a?.redirectTo??c.get("Referer")??"/"}),f=new Request(d,{method:"POST",headers:c,body:e}),g=await e_(f,{...b,raw:bF,skipCSRFCheck:bE}),h=await (0,e3.cookies)();for(let a of g?.cookies??[])h.set(a.name,a.value,a.options);return a?.redirect??!0?(0,e9.redirect)(g.redirect):g}async function fc(a,b){let c=new Headers(await (0,e3.headers)());c.set("Content-Type","application/json");let d=new Request(e$("session",c.get("x-forwarded-proto"),c,process.env,b),{method:"POST",headers:c,body:JSON.stringify({data:a})}),e=await e_(d,{...b,raw:bF,skipCSRFCheck:bE}),f=await (0,e3.cookies)();for(let a of e?.cookies??[])f.set(a.name,a.value,a.options);return e.body}function fd(a){if("function"==typeof a){let b=async b=>{let c=await a(b);return e2(c),e_(e1(b),c)};return{handlers:{GET:b,POST:b},auth:e6(a,a=>e2(a)),signIn:async(b,c,d)=>{let e=await a(void 0);return e2(e),fa(b,c,d,e)},signOut:async b=>{let c=await a(void 0);return e2(c),fb(b,c)},unstable_update:async b=>{let c=await a(void 0);return e2(c),fc(b,c)}}}e2(a);let b=b=>e_(e1(b),a);return{handlers:{GET:b,POST:b},auth:e6(a),signIn:(b,c,d)=>fa(b,c,d,a),signOut:b=>fb(b,a),unstable_update:b=>fc(b,a)}}a.s(["default",()=>fd],40522)},28958,a=>{"use strict";function b(a){return{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{brandColor:"#1a73e8"},options:a}}a.s(["default",()=>b])},59351,a=>{"use strict";a.i(28958),a.s([])},34217,a=>{"use strict";function b(a){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:a}}a.s(["default",()=>b])},5151,a=>{"use strict";a.i(34217),a.s([])},33957,a=>{"use strict";var b=a.i(63227),c=a.i(30928),d=a.i(51674),e=a.i(4501),f=d;class g extends f.SQL{constructor(a){super(g.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=g.buildCount(a.source,a.filters)}sql;static [b.entityKind]="MySqlCountBuilder";[Symbol.toStringTag]="MySqlCountBuilder";session;static buildEmbeddedCount(a,b){return f.sql`(select count(*) from ${a}${f.sql.raw(" where ").if(b)}${b})`}static buildCount(a,b){return f.sql`select count(*) as count from ${a}${f.sql.raw(" where ").if(b)}${b}`}then(a,b){return Promise.resolve(this.session.count(this.sql)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}var h=a.i(7484),i=a.i(20713);class j extends h.QueryPromise{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [b.entityKind]="MySqlDelete";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[i.Table.Symbol.Columns],new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),d=Array.isArray(b)?b:[b];this.config.orderBy=d}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}var k=h,l=a.i(44551),m=a.i(77001),n=a.i(41657),o=a.i(94415),p=a.i(11832),q=a.i(93321),r=a.i(68540),s=a.i(55280),t=a.i(77396),u=o,v=a.i(37003);class w{static [b.entityKind]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new x(a,this)}}class x{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [b.entityKind]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[v.TableName],...d,c[0].table[v.TableName],...e];return a??`${f.join("_")}_fk`}}function y(a,b){return`${a[v.TableName]}_${b.join("_")}_unique`}class z{constructor(a,b){this.name=b,this.columns=a}static [b.entityKind]="MySqlUniqueConstraintBuilder";columns;build(a){return new B(a,this.columns,this.name)}}class A{static [b.entityKind]="MySqlUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new z(a,this.name)}}class B{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??y(this.table,this.columns.map(a=>a.name))}static [b.entityKind]="MySqlUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}class C extends t.ColumnBuilder{static [b.entityKind]="MySqlColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}generatedAlwaysAs(a,b){return this.config.generated={as:a,type:"always",mode:b?.mode??"virtual"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>{let e;return e=new w(()=>({columns:[a],foreignColumns:[c()]})),d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})}}class D extends u.Column{constructor(a,b){b.uniqueName||(b.uniqueName=y(a,[b.name])),super(a,b),this.table=a}static [b.entityKind]="MySqlColumn"}class E extends C{static [b.entityKind]="MySqlColumnBuilderWithAutoIncrement";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class F extends D{static [b.entityKind]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}var G=i;class H extends E{static [b.entityKind]="MySqlBigInt53Builder";constructor(a,b=!1){super(a,"number","MySqlBigInt53"),this.config.unsigned=b}build(a){return new I(a,this.config)}}class I extends F{static [b.entityKind]="MySqlBigInt53";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class J extends E{static [b.entityKind]="MySqlBigInt64Builder";constructor(a,b=!1){super(a,"bigint","MySqlBigInt64"),this.config.unsigned=b}build(a){return new K(a,this.config)}}class K extends F{static [b.entityKind]="MySqlBigInt64";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return BigInt(a)}}function L(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return"number"===d.mode?new H(c,d.unsigned):new J(c,d.unsigned)}class M extends C{static [b.entityKind]="MySqlBinaryBuilder";constructor(a,b){super(a,"string","MySqlBinary"),this.config.length=b}build(a){return new N(a,this.config)}}class N extends D{static [b.entityKind]="MySqlBinary";length=this.config.length;getSQLType(){return void 0===this.length?"binary":`binary(${this.length})`}}function O(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new M(c,d.length)}class P extends C{static [b.entityKind]="MySqlBooleanBuilder";constructor(a){super(a,"boolean","MySqlBoolean")}build(a){return new Q(a,this.config)}}class Q extends D{static [b.entityKind]="MySqlBoolean";getSQLType(){return"boolean"}mapFromDriverValue(a){return"boolean"==typeof a?a:1===a}}function R(a){return new P(a??"")}class S extends C{static [b.entityKind]="MySqlCharBuilder";constructor(a,b){super(a,"string","MySqlChar"),this.config.length=b.length,this.config.enum=b.enum}build(a){return new T(a,this.config)}}class T extends D{static [b.entityKind]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function U(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new S(c,d)}class V extends C{static [b.entityKind]="MySqlCustomColumnBuilder";constructor(a,b,c){super(a,"custom","MySqlCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new W(a,this.config)}}class W extends D{static [b.entityKind]="MySqlCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function X(a){return(b,c)=>{let{name:d,config:e}=(0,l.getColumnNameAndConfig)(b,c);return new V(d,e,a)}}class Y extends C{static [b.entityKind]="MySqlDateBuilder";constructor(a){super(a,"date","MySqlDate")}build(a){return new Z(a,this.config)}}class Z extends D{static [b.entityKind]="MySqlDate";constructor(a,b){super(a,b)}getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}}class $ extends C{static [b.entityKind]="MySqlDateStringBuilder";constructor(a){super(a,"string","MySqlDateString")}build(a){return new _(a,this.config)}}class _ extends D{static [b.entityKind]="MySqlDateString";constructor(a,b){super(a,b)}getSQLType(){return"date"}}function aa(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return d?.mode==="string"?new $(c):new Y(c)}class ab extends C{static [b.entityKind]="MySqlDateTimeBuilder";constructor(a,b){super(a,"date","MySqlDateTime"),this.config.fsp=b?.fsp}build(a){return new ac(a,this.config)}}class ac extends D{static [b.entityKind]="MySqlDateTime";fsp;constructor(a,b){super(a,b),this.fsp=b.fsp}getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${a}`}mapToDriverValue(a){return a.toISOString().replace("T"," ").replace("Z","")}mapFromDriverValue(a){return new Date(a.replace(" ","T")+"Z")}}class ad extends C{static [b.entityKind]="MySqlDateTimeStringBuilder";constructor(a,b){super(a,"string","MySqlDateTimeString"),this.config.fsp=b?.fsp}build(a){return new ae(a,this.config)}}class ae extends D{static [b.entityKind]="MySqlDateTimeString";fsp;constructor(a,b){super(a,b),this.fsp=b.fsp}getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${a}`}}function af(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return d?.mode==="string"?new ad(c,d):new ab(c,d)}class ag extends E{static [b.entityKind]="MySqlDecimalBuilder";constructor(a,b){super(a,"string","MySqlDecimal"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new ah(a,this.config)}}class ah extends F{static [b.entityKind]="MySqlDecimal";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?a+="decimal":a+=`decimal(${this.precision})`,a="decimal(10,0)"===a||"decimal(10)"===a?"decimal":a,this.unsigned?`${a} unsigned`:a}}function ai(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new ag(c,d)}class aj extends E{static [b.entityKind]="MySqlDoubleBuilder";constructor(a,b){super(a,"number","MySqlDouble"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new ak(a,this.config)}}class ak extends F{static [b.entityKind]="MySqlDouble";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`double(${this.precision},${this.scale})`:void 0===this.precision?a+="double":a+=`double(${this.precision})`,this.unsigned?`${a} unsigned`:a}}function al(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aj(c,d)}class am extends C{static [b.entityKind]="MySqlEnumColumnBuilder";constructor(a,b){super(a,"string","MySqlEnumColumn"),this.config.enumValues=b}build(a){return new an(a,this.config)}}class an extends D{static [b.entityKind]="MySqlEnumColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(a=>`'${a}'`).join(",")})`}}function ao(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);if(0===d.length)throw Error(`You have an empty array for "${c}" enum values`);return new am(c,d)}class ap extends E{static [b.entityKind]="MySqlFloatBuilder";constructor(a,b){super(a,"number","MySqlFloat"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new aq(a,this.config)}}class aq extends F{static [b.entityKind]="MySqlFloat";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`float(${this.precision},${this.scale})`:void 0===this.precision?a+="float":a+=`float(${this.precision})`,this.unsigned?`${a} unsigned`:a}}function ar(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new ap(c,d)}class as extends E{static [b.entityKind]="MySqlIntBuilder";constructor(a,b){super(a,"number","MySqlInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new at(a,this.config)}}class at extends F{static [b.entityKind]="MySqlInt";getSQLType(){return`int${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function au(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new as(c,d)}class av extends C{static [b.entityKind]="MySqlJsonBuilder";constructor(a){super(a,"json","MySqlJson")}build(a){return new aw(a,this.config)}}class aw extends D{static [b.entityKind]="MySqlJson";getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}}function ax(a){return new av(a??"")}class ay extends E{static [b.entityKind]="MySqlMediumIntBuilder";constructor(a,b){super(a,"number","MySqlMediumInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new az(a,this.config)}}class az extends F{static [b.entityKind]="MySqlMediumInt";getSQLType(){return`mediumint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aA(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new ay(c,d)}class aB extends E{static [b.entityKind]="MySqlRealBuilder";constructor(a,b){super(a,"number","MySqlReal"),this.config.precision=b?.precision,this.config.scale=b?.scale}build(a){return new aC(a,this.config)}}class aC extends F{static [b.entityKind]="MySqlReal";precision=this.config.precision;scale=this.config.scale;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`real(${this.precision}, ${this.scale})`:void 0===this.precision?"real":`real(${this.precision})`}}function aD(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aB(c,d)}class aE extends E{static [b.entityKind]="MySqlSerialBuilder";constructor(a){super(a,"number","MySqlSerial"),this.config.hasDefault=!0,this.config.autoIncrement=!0}build(a){return new aF(a,this.config)}}class aF extends F{static [b.entityKind]="MySqlSerial";getSQLType(){return"serial"}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aG(a){return new aE(a??"")}class aH extends E{static [b.entityKind]="MySqlSmallIntBuilder";constructor(a,b){super(a,"number","MySqlSmallInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new aI(a,this.config)}}class aI extends F{static [b.entityKind]="MySqlSmallInt";getSQLType(){return`smallint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aJ(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aH(c,d)}class aK extends C{static [b.entityKind]="MySqlTextBuilder";constructor(a,b,c){super(a,"string","MySqlText"),this.config.textType=b,this.config.enumValues=c.enum}build(a){return new aL(a,this.config)}}class aL extends D{static [b.entityKind]="MySqlText";textType=this.config.textType;enumValues=this.config.enumValues;getSQLType(){return this.textType}}function aM(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aK(c,"text",d)}function aN(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aK(c,"tinytext",d)}function aO(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aK(c,"mediumtext",d)}function aP(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aK(c,"longtext",d)}class aQ extends C{static [b.entityKind]="MySqlTimeBuilder";constructor(a,b){super(a,"string","MySqlTime"),this.config.fsp=b?.fsp}build(a){return new aR(a,this.config)}}class aR extends D{static [b.entityKind]="MySqlTime";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`time${a}`}}function aS(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new aQ(c,d)}class aT extends C{static [b.entityKind]="MySqlDateColumnBuilder";defaultNow(){return this.default(d.sql`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class aU extends D{static [b.entityKind]="MySqlDateColumn";hasOnUpdateNow=this.config.hasOnUpdateNow}class aV extends aT{static [b.entityKind]="MySqlTimestampBuilder";constructor(a,b){super(a,"date","MySqlTimestamp"),this.config.fsp=b?.fsp}build(a){return new aW(a,this.config)}}class aW extends aU{static [b.entityKind]="MySqlTimestamp";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${a}`}mapFromDriverValue(a){return new Date(a+"+0000")}mapToDriverValue(a){return a.toISOString().slice(0,-1).replace("T"," ")}}class aX extends aT{static [b.entityKind]="MySqlTimestampStringBuilder";constructor(a,b){super(a,"string","MySqlTimestampString"),this.config.fsp=b?.fsp}build(a){return new aY(a,this.config)}}class aY extends aU{static [b.entityKind]="MySqlTimestampString";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${a}`}}function aZ(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return d?.mode==="string"?new aX(c,d):new aV(c,d)}class a$ extends E{static [b.entityKind]="MySqlTinyIntBuilder";constructor(a,b){super(a,"number","MySqlTinyInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new a_(a,this.config)}}class a_ extends F{static [b.entityKind]="MySqlTinyInt";getSQLType(){return`tinyint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function a0(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new a$(c,d)}class a1 extends C{static [b.entityKind]="MySqlVarBinaryBuilder";constructor(a,b){super(a,"string","MySqlVarBinary"),this.config.length=b?.length}build(a){return new a2(a,this.config)}}class a2 extends D{static [b.entityKind]="MySqlVarBinary";length=this.config.length;getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}function a3(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new a1(c,d)}class a4 extends C{static [b.entityKind]="MySqlVarCharBuilder";constructor(a,b){super(a,"string","MySqlVarChar"),this.config.length=b.length,this.config.enum=b.enum}build(a){return new a5(a,this.config)}}class a5 extends D{static [b.entityKind]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function a6(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return new a4(c,d)}class a7 extends C{static [b.entityKind]="MySqlYearBuilder";constructor(a){super(a,"number","MySqlYear")}build(a){return new a8(a,this.config)}}class a8 extends D{static [b.entityKind]="MySqlYear";getSQLType(){return"year"}}function a9(a){return new a7(a??"")}let ba=Symbol.for("drizzle:MySqlInlineForeignKeys");class bb extends G.Table{static [b.entityKind]="MySqlTable";static Symbol=Object.assign({},G.Table.Symbol,{InlineForeignKeys:ba});[G.Table.Symbol.Columns];[ba]=[];[G.Table.Symbol.ExtraConfigBuilder]=void 0}let bc=(a,b,c)=>(function(a,b,c,d,e=a){let f=new bb(a,d,e),g=Object.fromEntries(Object.entries("function"==typeof b?b({bigint:L,binary:O,boolean:R,char:U,customType:X,date:aa,datetime:af,decimal:ai,double:al,mysqlEnum:ao,float:ar,int:au,json:ax,mediumint:aA,real:aD,serial:aG,smallint:aJ,text:aM,time:aS,timestamp:aZ,tinyint:a0,varbinary:a3,varchar:a6,year:a9,longtext:aP,mediumtext:aO,tinytext:aN}):b).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[ba].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[G.Table.Symbol.Columns]=g,h[G.Table.Symbol.ExtraConfigColumns]=g,c&&(h[bb.Symbol.ExtraConfigBuilder]=c),h})(a,b,c,void 0,a);var bd=d;class be extends bd.View{static [b.entityKind]="MySqlViewBase"}class bf{static [b.entityKind]="MySqlDialect";casing;constructor(a){this.casing=new n.CasingCache(a?.casing)}async migrate(a,b,c){let e=c.migrationsTable??"__drizzle_migrations",f=d.sql`
			create table if not exists ${d.sql.identifier(e)} (
				id serial primary key,
				hash text not null,
				created_at bigint
			)
		`;await b.execute(f);let g=(await b.all(d.sql`select id, hash, created_at from ${d.sql.identifier(e)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for(let c of a)if(!g||Number(g.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(d.sql.raw(a));await b.execute(d.sql`insert into ${d.sql.identifier(e)} (\`hash\`, \`created_at\`) values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`\`${a}\``}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[d.sql`with `];for(let[c,e]of a.entries())b.push(d.sql`${d.sql.identifier(e._.alias)} as (${e._.sql})`),c<a.length-1&&b.push(d.sql`, `);return b.push(d.sql` `),d.sql.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:e,limit:f,orderBy:g}){let h=this.buildWithCTE(e),i=c?d.sql` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,j=b?d.sql` where ${b}`:void 0,k=this.buildOrderBy(g),l=this.buildLimit(f);return d.sql`${h}delete from ${a}${j}${k}${l}${i}`}buildUpdateSet(a,b){let c=a[i.Table.Symbol.Columns],e=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),f=e.length;return d.sql.join(e.flatMap((a,e)=>{let g=c[a],h=b[a]??d.sql.param(g.onUpdateFn(),g),i=d.sql`${d.sql.identifier(this.casing.getColumnCasing(g))} = ${h}`;return e<f-1?[i,d.sql.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:e,withList:f,limit:g,orderBy:h}){let i=this.buildWithCTE(f),j=this.buildUpdateSet(a,b),k=e?d.sql` returning ${this.buildSelection(e,{isSingleTable:!0})}`:void 0,l=c?d.sql` where ${c}`:void 0,m=this.buildOrderBy(h),n=this.buildLimit(g);return d.sql`${i}update ${a} set ${j}${l}${m}${n}${k}`}buildSelection(a,{isSingleTable:c=!1}={}){let e=a.length,f=a.flatMap(({field:a},f)=>{let g=[];if((0,b.is)(a,d.SQL.Aliased)&&a.isSelectionField)g.push(d.sql.identifier(a.fieldAlias));else if((0,b.is)(a,d.SQL.Aliased)||(0,b.is)(a,d.SQL)){let e=(0,b.is)(a,d.SQL.Aliased)?a.sql:a;c?g.push(new d.SQL(e.queryChunks.map(a=>(0,b.is)(a,D)?d.sql.identifier(this.casing.getColumnCasing(a)):a))):g.push(e),(0,b.is)(a,d.SQL.Aliased)&&g.push(d.sql` as ${d.sql.identifier(a.fieldAlias)}`)}else(0,b.is)(a,o.Column)&&(c?g.push(d.sql.identifier(this.casing.getColumnCasing(a))):g.push(a));return f<e-1&&g.push(d.sql`, `),g});return d.sql.join(f)}buildLimit(a){return"object"==typeof a||"number"==typeof a&&a>=0?d.sql` limit ${a}`:void 0}buildOrderBy(a){return a&&a.length>0?d.sql` order by ${d.sql.join(a,d.sql`, `)}`:void 0}buildIndex({indexes:a,indexFor:b}){return a&&a.length>0?d.sql` ${d.sql.raw(b)} INDEX (${d.sql.raw(a.join(", "))})`:void 0}buildSelectQuery({withList:a,fields:c,fieldsFlat:f,where:g,having:h,table:j,joins:k,orderBy:m,groupBy:n,limit:p,offset:q,lockingClause:r,distinct:t,setOperators:u,useIndex:v,forceIndex:w,ignoreIndex:x}){let y,z=f??(0,l.orderSelectedFields)(c);for(let a of z){let c;if((0,b.is)(a.field,o.Column)&&(0,i.getTableName)(a.field.table)!==((0,b.is)(j,e.Subquery)?j._.alias:(0,b.is)(j,be)?j[s.ViewBaseConfig].name:(0,b.is)(j,d.SQL)?void 0:(0,i.getTableName)(j))&&(c=a.field.table,!k?.some(({alias:a})=>a===(c[i.Table.Symbol.IsAlias]?(0,i.getTableName)(c):c[i.Table.Symbol.BaseName])))){let b=(0,i.getTableName)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let A=!k||0===k.length,B=this.buildWithCTE(a),C=t?d.sql` distinct`:void 0,D=this.buildSelection(z,{isSingleTable:A}),E=(0,b.is)(j,i.Table)&&j[i.Table.Symbol.OriginalName]!==j[i.Table.Symbol.Name]?d.sql`${d.sql.identifier(j[i.Table.Symbol.OriginalName])} ${d.sql.identifier(j[i.Table.Symbol.Name])}`:j,F=[];if(k)for(let[a,c]of k.entries()){0===a&&F.push(d.sql` `);let e=c.table,f=c.lateral?d.sql` lateral`:void 0;if((0,b.is)(e,bb)){let a=e[bb.Symbol.Name],b=e[bb.Symbol.Schema],g=e[bb.Symbol.OriginalName],h=a===g?void 0:c.alias,i=this.buildIndex({indexes:c.useIndex,indexFor:"USE"}),j=this.buildIndex({indexes:c.forceIndex,indexFor:"FORCE"}),k=this.buildIndex({indexes:c.ignoreIndex,indexFor:"IGNORE"});F.push(d.sql`${d.sql.raw(c.joinType)} join${f} ${b?d.sql`${d.sql.identifier(b)}.`:void 0}${d.sql.identifier(g)}${i}${j}${k}${h&&d.sql` ${d.sql.identifier(h)}`} on ${c.on}`)}else if((0,b.is)(e,d.View)){let a=e[s.ViewBaseConfig].name,b=e[s.ViewBaseConfig].schema,g=e[s.ViewBaseConfig].originalName,h=a===g?void 0:c.alias;F.push(d.sql`${d.sql.raw(c.joinType)} join${f} ${b?d.sql`${d.sql.identifier(b)}.`:void 0}${d.sql.identifier(g)}${h&&d.sql` ${d.sql.identifier(h)}`} on ${c.on}`)}else F.push(d.sql`${d.sql.raw(c.joinType)} join${f} ${e} on ${c.on}`);a<k.length-1&&F.push(d.sql` `)}let G=d.sql.join(F),H=g?d.sql` where ${g}`:void 0,I=h?d.sql` having ${h}`:void 0,J=this.buildOrderBy(m),K=n&&n.length>0?d.sql` group by ${d.sql.join(n,d.sql`, `)}`:void 0,L=this.buildLimit(p),M=q?d.sql` offset ${q}`:void 0,N=this.buildIndex({indexes:v,indexFor:"USE"}),O=this.buildIndex({indexes:w,indexFor:"FORCE"}),P=this.buildIndex({indexes:x,indexFor:"IGNORE"});if(r){let{config:a,strength:b}=r;y=d.sql` for ${d.sql.raw(b)}`,a.noWait?y.append(d.sql` no wait`):a.skipLocked&&y.append(d.sql` skip locked`)}let Q=d.sql`${B}select${C} ${D} from ${E}${N}${O}${P}${G}${H}${K}${I}${J}${L}${M}${y}`;return u.length>0?this.buildSetOperations(Q,u):Q}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:c,isAll:e,rightSelect:f,limit:g,orderBy:h,offset:i}}){let j,k=d.sql`(${a.getSQL()}) `,l=d.sql`(${f.getSQL()})`;if(h&&h.length>0){let a=[];for(let c of h)if((0,b.is)(c,D))a.push(d.sql.identifier(this.casing.getColumnCasing(c)));else if((0,b.is)(c,d.SQL)){for(let a=0;a<c.queryChunks.length;a++){let e=c.queryChunks[a];(0,b.is)(e,D)&&(c.queryChunks[a]=d.sql.identifier(this.casing.getColumnCasing(e)))}a.push(d.sql`${c}`)}else a.push(d.sql`${c}`);j=d.sql` order by ${d.sql.join(a,d.sql`, `)} `}let m="object"==typeof g||"number"==typeof g&&g>=0?d.sql` limit ${g}`:void 0,n=d.sql.raw(`${c} ${e?"all ":""}`),o=i?d.sql` offset ${i}`:void 0;return d.sql`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:c,ignore:e,onConflict:f,select:g}){let h=[],j=Object.entries(a[i.Table.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),k=j.map(([,a])=>d.sql.identifier(this.casing.getColumnCasing(a))),l=[];if(g)(0,b.is)(c,d.SQL)?h.push(c):h.push(c.getSQL());else for(let[a,e]of(h.push(d.sql.raw("values ")),c.entries())){let f={},g=[];for(let[a,c]of j){let h=e[a];if(void 0===h||(0,b.is)(h,d.Param)&&void 0===h.value)if(void 0!==c.defaultFn){let e=c.defaultFn();f[a]=e;let h=(0,b.is)(e,d.SQL)?e:d.sql.param(e,c);g.push(h)}else if(c.default||void 0===c.onUpdateFn)g.push(d.sql`default`);else{let a=c.onUpdateFn(),e=(0,b.is)(a,d.SQL)?a:d.sql.param(a,c);g.push(e)}else c.defaultFn&&(0,b.is)(h,d.Param)&&(f[a]=h.value),g.push(h)}l.push(f),h.push(g),a<c.length-1&&h.push(d.sql`, `)}let m=d.sql.join(h),n=e?d.sql` ignore`:void 0,o=f?d.sql` on duplicate key ${f}`:void 0;return{sql:d.sql`insert${n} into ${a} ${k} ${m}${o}`,generatedIds:l}}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:b})}buildRelationalQuery({fullSchema:a,schema:c,tableNamesMap:f,table:g,tableConfig:h,queryConfig:j,tableAlias:k,nestedQueryRelation:l,joinOn:n}){let s,t,u,v,w,x=[],y=[];if(!0===j)x=Object.entries(h.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,m.aliasedTableColumn)(b,k),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let g=Object.fromEntries(Object.entries(h.columns).map(([a,b])=>[a,(0,m.aliasedTableColumn)(b,k)]));if(j.where){let a="function"==typeof j.where?j.where(g,(0,r.getOperators)()):j.where;v=a&&(0,m.mapColumnsInSQLToAlias)(a,k)}let l=[],n=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in h.columns&&(a||!0!==c||(a=!0),n.push(b));n.length>0&&(n=a?n.filter(a=>j.columns?.[a]===!0):Object.keys(h.columns).filter(a=>!n.includes(a)))}else n=Object.keys(h.columns);for(let a of n){let b=h.columns[a];l.push({tsKey:a,value:b})}let p=[];if(j.with&&(p=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:h.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(g,{sql:d.sql}):j.extras))l.push({tsKey:a,value:(0,m.mapColumnsInAliasedSQLToAlias)(b,k)});for(let{tsKey:a,value:c}of l)x.push({dbKey:(0,b.is)(c,d.SQL.Aliased)?c.fieldAlias:h.columns[a].name,tsKey:a,field:(0,b.is)(c,o.Column)?(0,m.aliasedTableColumn)(c,k):c,relationTableTsKey:void 0,isJson:!1,selection:[]});let w="function"==typeof j.orderBy?j.orderBy(g,(0,r.getOrderByOperators)()):j.orderBy??[];for(let{tsKey:g,queryConfig:h,relation:l}of(Array.isArray(w)||(w=[w]),u=w.map(a=>(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):(0,m.mapColumnsInSQLToAlias)(a,k)),s=j.limit,t=j.offset,p)){let j=(0,r.normalizeRelation)(c,f,l),n=f[(0,i.getTableUniqueName)(l.referencedTable)],o=`${k}_${g}`,p=(0,q.and)(...j.fields.map((a,b)=>(0,q.eq)((0,m.aliasedTableColumn)(j.references[b],o),(0,m.aliasedTableColumn)(a,k)))),s=this.buildRelationalQuery({fullSchema:a,schema:c,tableNamesMap:f,table:a[n],tableConfig:c[n],queryConfig:(0,b.is)(l,r.One)?!0===h?{limit:1}:{...h,limit:1}:h,tableAlias:o,joinOn:p,nestedQueryRelation:l}),t=d.sql`${d.sql.identifier(o)}.${d.sql.identifier("data")}`.as(g);y.push({on:d.sql`true`,table:new e.Subquery(s.sql,{},o),alias:o,joinType:"left",lateral:!0}),x.push({dbKey:g,tsKey:g,field:t,relationTableTsKey:n,isJson:!0,selection:s.selection})}}if(0===x.length)throw new p.DrizzleError({message:`No fields selected for table "${h.tsName}" ("${k}")`});if(v=(0,q.and)(n,v),l){let a=d.sql`json_array(${d.sql.join(x.map(({field:a,tsKey:c,isJson:e})=>e?d.sql`${d.sql.identifier(`${k}_${c}`)}.${d.sql.identifier("data")}`:(0,b.is)(a,d.SQL.Aliased)?a.sql:a),d.sql`, `)})`;(0,b.is)(l,r.Many)&&(a=d.sql`coalesce(json_arrayagg(${a}), json_array())`);let c=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:h.tsName,selection:x}];void 0!==s||void 0!==t||(u?.length??0)>0?(w=this.buildSelectQuery({table:(0,m.aliasedTable)(g,k),fields:{},fieldsFlat:[{path:[],field:d.sql.raw("*")},...(u?.length??0)>0?[{path:[],field:d.sql`row_number() over (order by ${d.sql.join(u,d.sql`, `)})`}]:[]],where:v,limit:s,offset:t,setOperators:[]}),v=void 0,s=void 0,t=void 0,u=void 0):w=(0,m.aliasedTable)(g,k),w=this.buildSelectQuery({table:(0,b.is)(w,bb)?w:new e.Subquery(w,{},k),fields:{},fieldsFlat:c.map(({field:a})=>({path:[],field:(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):a})),joins:y,where:v,limit:s,offset:t,orderBy:u,setOperators:[]})}else w=this.buildSelectQuery({table:(0,m.aliasedTable)(g,k),fields:{},fieldsFlat:x.map(({field:a})=>({path:[],field:(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):a})),joins:y,where:v,limit:s,offset:t,orderBy:u,setOperators:[]});return{tableTsKey:h.tsName,sql:w,selection:x}}buildRelationalQueryWithoutLateralSubqueries({fullSchema:a,schema:c,tableNamesMap:f,table:g,tableConfig:h,queryConfig:j,tableAlias:k,nestedQueryRelation:l,joinOn:n}){let s,t=[],u,v,w=[],x;if(!0===j)t=Object.entries(h.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,m.aliasedTableColumn)(b,k),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(h.columns).map(([a,b])=>[a,(0,m.aliasedTableColumn)(b,k)]));if(j.where){let a="function"==typeof j.where?j.where(e,(0,r.getOperators)()):j.where;x=a&&(0,m.mapColumnsInSQLToAlias)(a,k)}let g=[],l=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in h.columns&&(a||!0!==c||(a=!0),l.push(b));l.length>0&&(l=a?l.filter(a=>j.columns?.[a]===!0):Object.keys(h.columns).filter(a=>!l.includes(a)))}else l=Object.keys(h.columns);for(let a of l){let b=h.columns[a];g.push({tsKey:a,value:b})}let n=[];if(j.with&&(n=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:h.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(e,{sql:d.sql}):j.extras))g.push({tsKey:a,value:(0,m.mapColumnsInAliasedSQLToAlias)(b,k)});for(let{tsKey:a,value:c}of g)t.push({dbKey:(0,b.is)(c,d.SQL.Aliased)?c.fieldAlias:h.columns[a].name,tsKey:a,field:(0,b.is)(c,o.Column)?(0,m.aliasedTableColumn)(c,k):c,relationTableTsKey:void 0,isJson:!1,selection:[]});let p="function"==typeof j.orderBy?j.orderBy(e,(0,r.getOrderByOperators)()):j.orderBy??[];for(let{tsKey:e,queryConfig:g,relation:h}of(Array.isArray(p)||(p=[p]),w=p.map(a=>(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):(0,m.mapColumnsInSQLToAlias)(a,k)),u=j.limit,v=j.offset,n)){let j=(0,r.normalizeRelation)(c,f,h),l=f[(0,i.getTableUniqueName)(h.referencedTable)],n=`${k}_${e}`,o=(0,q.and)(...j.fields.map((a,b)=>(0,q.eq)((0,m.aliasedTableColumn)(j.references[b],n),(0,m.aliasedTableColumn)(a,k)))),p=this.buildRelationalQueryWithoutLateralSubqueries({fullSchema:a,schema:c,tableNamesMap:f,table:a[l],tableConfig:c[l],queryConfig:(0,b.is)(h,r.One)?!0===g?{limit:1}:{...g,limit:1}:g,tableAlias:n,joinOn:o,nestedQueryRelation:h}),s=d.sql`(${p.sql})`;(0,b.is)(h,r.Many)&&(s=d.sql`coalesce(${s}, json_array())`);let u=s.as(e);t.push({dbKey:e,tsKey:e,field:u,relationTableTsKey:l,isJson:!0,selection:p.selection})}}if(0===t.length)throw new p.DrizzleError({message:`No fields selected for table "${h.tsName}" ("${k}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(x=(0,q.and)(n,x),l){let a=d.sql`json_array(${d.sql.join(t.map(({field:a})=>(0,b.is)(a,D)?d.sql.identifier(this.casing.getColumnCasing(a)):(0,b.is)(a,d.SQL.Aliased)?a.sql:a),d.sql`, `)})`;(0,b.is)(l,r.Many)&&(a=d.sql`json_arrayagg(${a})`);let c=[{dbKey:"data",tsKey:"data",field:a,isJson:!0,relationTableTsKey:h.tsName,selection:t}];void 0!==u||void 0!==v||w.length>0?(s=this.buildSelectQuery({table:(0,m.aliasedTable)(g,k),fields:{},fieldsFlat:[{path:[],field:d.sql.raw("*")},...w.length>0?[{path:[],field:d.sql`row_number() over (order by ${d.sql.join(w,d.sql`, `)})`}]:[]],where:x,limit:u,offset:v,setOperators:[]}),x=void 0,u=void 0,v=void 0,w=void 0):s=(0,m.aliasedTable)(g,k),s=this.buildSelectQuery({table:(0,b.is)(s,bb)?s:new e.Subquery(s,{},k),fields:{},fieldsFlat:c.map(({field:a})=>({path:[],field:(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):a})),where:x,limit:u,offset:v,orderBy:w,setOperators:[]})}else s=this.buildSelectQuery({table:(0,m.aliasedTable)(g,k),fields:{},fieldsFlat:t.map(({field:a})=>({path:[],field:(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):a})),where:x,limit:u,offset:v,orderBy:w,setOperators:[]});return{tableTsKey:h.tsName,sql:s,selection:t}}}var bg=a.i(82534);class bh{constructor(a,b){this.name=a,this.value=b}static [b.entityKind]="MySqlCheckBuilder";brand;build(a){return new bi(a,this)}}class bi{constructor(a,b){this.table=a,this.name=b.name,this.value=b.value}static [b.entityKind]="MySqlCheck";name;value}class bj{constructor(a,b){this.name=a,this.unique=b}static [b.entityKind]="MySqlIndexBuilderOn";on(...a){return new bk(this.name,a,this.unique)}}class bk{static [b.entityKind]="MySqlIndexBuilder";config;constructor(a,b,c){this.config={name:a,columns:b,unique:c}}using(a){return this.config.using=a,this}algorythm(a){return this.config.algorythm=a,this}lock(a){return this.config.lock=a,this}build(a){return new bl(this.config,a)}}class bl{static [b.entityKind]="MySqlIndex";config;constructor(a,b){this.config={...a,table:b}}}function bm(...a){return a[0].columns?new bn(a[0].columns,a[0].name):new bn(a)}class bn{static [b.entityKind]="MySqlPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new bo(a,this.columns,this.name)}}class bo{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [b.entityKind]="MySqlPrimaryKey";columns;name;getName(){return this.name??`${this.table[bb.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function bp(a){return a.map(a=>"object"==typeof a?a.config.name:a)}function bq(a){return Array.isArray(a)?a:[a]}Symbol.for("drizzle:MySqlViewConfig");class br{static [b.entityKind]="MySqlSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}from(a,c){let f,g=!!this.fields;f=this.fields?this.fields:(0,b.is)(a,e.Subquery)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,b.is)(a,be)?a[s.ViewBaseConfig].selectedFields:(0,b.is)(a,d.SQL)?{}:(0,l.getTableColumns)(a);let h=[],i=[],j=[];return(0,b.is)(a,bb)&&c&&"string"!=typeof c&&(c.useIndex&&(h=bp(bq(c.useIndex))),c.forceIndex&&(i=bp(bq(c.forceIndex))),c.ignoreIndex&&(j=bp(bq(c.ignoreIndex)))),new bt({table:a,fields:f,isPartialSelect:g,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct,useIndex:h,forceIndex:i,ignoreIndex:j})}}class bs extends bg.TypedQueryBuilder{static [b.entityKind]="MySqlSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g,useIndex:h,forceIndex:i,ignoreIndex:j}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[],useIndex:h,forceIndex:i,ignoreIndex:j},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,l.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(f,g,h)=>{let j=this.tableName,k=(0,l.getTableLikeName)(f);if("string"==typeof k&&this.config.joins?.some(a=>a.alias===k))throw Error(`Alias "${k}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof j&&(this.config.fields={[j]:this.config.fields}),"string"==typeof k&&!(0,b.is)(f,d.SQL))){let a=(0,b.is)(f,e.Subquery)?f._.selectedFields:(0,b.is)(f,d.View)?f[s.ViewBaseConfig].selectedFields:f[i.Table.Symbol.Columns];this.config.fields[k]=a}"function"==typeof g&&(g=g(new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]);let m=[],n=[],o=[];if((0,b.is)(f,bb)&&h&&"string"!=typeof h&&(h.useIndex&&(m=bp(bq(h.useIndex))),h.forceIndex&&(n=bp(bq(h.forceIndex))),h.ignoreIndex&&(o=bp(bq(h.ignoreIndex)))),this.config.joins.push({on:g,table:f,joinType:a,alias:k,useIndex:m,forceIndex:n,ignoreIndex:o}),"string"==typeof k)switch(a){case"left":this.joinsNotNullableMap[k]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[k]=!0;break;case"inner":this.joinsNotNullableMap[k]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[k]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(bv()):c;if(!(0,l.haveSameKeys)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),d=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=d:this.config.orderBy=d}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new e.Subquery(this.getSQL(),this.config.fields,a),new c.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new c.SelectionProxyHandler({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class bt extends bs{static [b.entityKind]="MySqlSelect";prepare(){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let a=(0,l.orderSelectedFields)(this.config.fields),b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),a);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator()}function bu(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,l.haveSameKeys)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,l.applyMixins)(bt,[h.QueryPromise]);let bv=()=>({union:bw,unionAll:bx,intersect:by,intersectAll:bz,except:bA,exceptAll:bB}),bw=bu("union",!1),bx=bu("union",!0),by=bu("intersect",!1),bz=bu("intersect",!0),bA=bu("except",!1),bB=bu("except",!0);class bC{static [b.entityKind]="MySqlQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,b.is)(a,bf)?a:void 0,this.dialectConfig=(0,b.is)(a,bf)?void 0:a}$with=(a,b)=>{let d=this;return{as:f=>("function"==typeof f&&(f=f(d)),new Proxy(new e.WithSubquery(f.getSQL(),b??("getSelectedFields"in f?f.getSelectedFields()??{}:{}),a,!0),new c.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new br({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new br({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new br({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new br({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new bf(this.dialectConfig)),this.dialect}}class bD{constructor(a,b,c){this.table=a,this.session=b,this.dialect=c}static [b.entityKind]="MySqlInsertBuilder";shouldIgnore=!1;ignore(){return this.shouldIgnore=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let c=a.map(a=>{let c={},e=this.table[i.Table.Symbol.Columns];for(let f of Object.keys(a)){let g=a[f];c[f]=(0,b.is)(g,d.SQL)?g:new d.Param(g,e[f])}return c});return new bE(this.table,c,this.shouldIgnore,this.session,this.dialect)}select(a){let c="function"==typeof a?a(new bC):a;if(!(0,b.is)(c,d.SQL)&&!(0,l.haveSameKeys)(this.table[i.Columns],c._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new bE(this.table,c,this.shouldIgnore,this.session,this.dialect,!0)}}class bE extends k.QueryPromise{constructor(a,b,c,d,e,f){super(),this.session=d,this.dialect=e,this.config={table:a,values:b,select:f,ignore:c}}static [b.entityKind]="MySqlInsert";config;onDuplicateKeyUpdate(a){let b=this.dialect.buildUpdateSet(this.config.table,(0,l.mapUpdateSet)(this.config.table,a.set));return this.config.onConflict=d.sql`update ${b}`,this}$returningId(){let a=[];for(let[b,c]of Object.entries(this.config.table[i.Table.Symbol.Columns]))c.primary&&a.push({field:c,path:[b]});return this.config.returning=a,this}getSQL(){return this.dialect.buildInsertQuery(this.config).sql}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){let{sql:a,generatedIds:b}=this.dialect.buildInsertQuery(this.config);return this.session.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,b,this.config.returning)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}var bF=h;class bG{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [b.entityKind]="MySqlUpdateBuilder";set(a){return new bH(this.table,(0,l.mapUpdateSet)(this.table,a),this.session,this.dialect,this.withList)}}class bH extends bF.QueryPromise{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e}}static [b.entityKind]="MySqlUpdate";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[i.Table.Symbol.Columns],new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),d=Array.isArray(b)?b:[b];this.config.orderBy=d}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}var bI=h;class bJ{constructor(a,b,c,d,e,f,g,h){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.mode=h}static [b.entityKind]="MySqlRelationalQueryBuilder";findMany(a){return new bK(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many",this.mode)}findFirst(a){return new bK(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first",this.mode)}}class bK extends bI.QueryPromise{constructor(a,b,c,d,e,f,g,h,i,j){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.queryMode=i,this.mode=j}static [b.entityKind]="MySqlRelationalQuery";prepare(){let{query:a,builtQuery:b}=this._toSQL();return this.session.prepareQuery(b,void 0,b=>{let c=b.map(b=>(0,r.mapRelationalRow)(this.schema,this.tableConfig,b,a.selection));return"first"===this.queryMode?c[0]:c})}_getQuery(){return"planetscale"===this.mode?this.dialect.buildRelationalQueryWithoutLateralSubqueries({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}):this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}_toSQL(){let a=this._getQuery();return{builtQuery:this.dialect.sqlToQuery(a.sql),query:a}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class bL{constructor(a,b,c,d){if(this.dialect=a,this.session=b,this.mode=d,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={},this._.schema)for(const[d,e]of Object.entries(this._.schema))this.query[d]=new bJ(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b,this.mode)}static [b.entityKind]="MySqlDatabase";query;$with=(a,b)=>{let d=this;return{as:f=>("function"==typeof f&&(f=f(new bC(d.dialect))),new Proxy(new e.WithSubquery(f.getSQL(),b??("getSelectedFields"in f?f.getSelectedFields()??{}:{}),a,!0),new c.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new g({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new br({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new br({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new bG(c,b.session,b.dialect,a)},delete:function(c){return new j(c,b.session,b.dialect,a)}}}select(a){return new br({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new br({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new bG(a,this.session,this.dialect)}insert(a){return new bD(a,this.session,this.dialect)}delete(a){return new j(a,this.session,this.dialect)}execute(a){return this.session.execute("string"==typeof a?d.sql.raw(a):a.getSQL())}transaction(a,b){return this.session.transaction(a,b)}}var bM=a.i(63343),bN=t,bO=o;class bP{static [b.entityKind]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new bQ(a,this)}}class bQ{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [b.entityKind]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[v.TableName],...d,c[0].table[v.TableName],...e];return a??`${f.join("_")}_fk`}}function bR(a,b){return`${a[v.TableName]}_${b.join("_")}_unique`}class bS{constructor(a,b){this.name=b,this.columns=a}static [b.entityKind]="SQLiteUniqueConstraintBuilder";columns;build(a){return new bU(a,this.columns,this.name)}}class bT{static [b.entityKind]="SQLiteUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new bS(a,this.name)}}class bU{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??bR(this.table,this.columns.map(a=>a.name))}static [b.entityKind]="SQLiteUniqueConstraint";columns;name;getName(){return this.name}}class bV extends bN.ColumnBuilder{static [b.entityKind]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}generatedAlwaysAs(a,b){return this.config.generated={as:a,type:"always",mode:b?.mode??"virtual"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>{let e;return e=new bP(()=>({columns:[a],foreignColumns:[c()]})),d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})}}class bW extends bO.Column{constructor(a,b){b.uniqueName||(b.uniqueName=bR(a,[b.name])),super(a,b),this.table=a}static [b.entityKind]="SQLiteColumn"}var bX=i;class bY extends bV{static [b.entityKind]="SQLiteBigIntBuilder";constructor(a){super(a,"bigint","SQLiteBigInt")}build(a){return new bZ(a,this.config)}}class bZ extends bW{static [b.entityKind]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(a){return Buffer.isBuffer(a)?BigInt(a.toString()):a instanceof ArrayBuffer?BigInt(new TextDecoder().decode(a)):BigInt(String.fromCodePoint(...a))}mapToDriverValue(a){return Buffer.from(a.toString())}}class b$ extends bV{static [b.entityKind]="SQLiteBlobJsonBuilder";constructor(a){super(a,"json","SQLiteBlobJson")}build(a){return new b_(a,this.config)}}class b_ extends bW{static [b.entityKind]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(a){return Buffer.isBuffer(a)?JSON.parse(a.toString()):a instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(a)):JSON.parse(String.fromCodePoint(...a))}mapToDriverValue(a){return Buffer.from(JSON.stringify(a))}}class b0 extends bV{static [b.entityKind]="SQLiteBlobBufferBuilder";constructor(a){super(a,"buffer","SQLiteBlobBuffer")}build(a){return new b1(a,this.config)}}class b1 extends bW{static [b.entityKind]="SQLiteBlobBuffer";getSQLType(){return"blob"}}function b2(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return d?.mode==="json"?new b$(c):d?.mode==="bigint"?new bY(c):new b0(c)}class b3 extends bV{static [b.entityKind]="SQLiteCustomColumnBuilder";constructor(a,b,c){super(a,"custom","SQLiteCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new b4(a,this.config)}}class b4 extends bW{static [b.entityKind]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function b5(a){return(b,c)=>{let{name:d,config:e}=(0,l.getColumnNameAndConfig)(b,c);return new b3(d,e,a)}}class b6 extends bV{static [b.entityKind]="SQLiteBaseIntegerBuilder";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}primaryKey(a){return a?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class b7 extends bW{static [b.entityKind]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class b8 extends b6{static [b.entityKind]="SQLiteIntegerBuilder";constructor(a){super(a,"number","SQLiteInteger")}build(a){return new b9(a,this.config)}}class b9 extends b7{static [b.entityKind]="SQLiteInteger"}class ca extends b6{static [b.entityKind]="SQLiteTimestampBuilder";constructor(a,b){super(a,"date","SQLiteTimestamp"),this.config.mode=b}defaultNow(){return this.default(d.sql`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(a){return new cb(a,this.config)}}class cb extends b7{static [b.entityKind]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(a){return new Date("timestamp"===this.config.mode?1e3*a:a)}mapToDriverValue(a){let b=a.getTime();return"timestamp"===this.config.mode?Math.floor(b/1e3):b}}class cc extends b6{static [b.entityKind]="SQLiteBooleanBuilder";constructor(a,b){super(a,"boolean","SQLiteBoolean"),this.config.mode=b}build(a){return new cd(a,this.config)}}class cd extends b7{static [b.entityKind]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(a){return 1===Number(a)}mapToDriverValue(a){return+!!a}}function ce(a,b){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return d?.mode==="timestamp"||d?.mode==="timestamp_ms"?new ca(c,d.mode):d?.mode==="boolean"?new cc(c,d.mode):new b8(c)}class cf extends bV{static [b.entityKind]="SQLiteNumericBuilder";constructor(a){super(a,"string","SQLiteNumeric")}build(a){return new cg(a,this.config)}}class cg extends bW{static [b.entityKind]="SQLiteNumeric";getSQLType(){return"numeric"}}function ch(a){return new cf(a??"")}class ci extends bV{static [b.entityKind]="SQLiteRealBuilder";constructor(a){super(a,"number","SQLiteReal")}build(a){return new cj(a,this.config)}}class cj extends bW{static [b.entityKind]="SQLiteReal";getSQLType(){return"real"}}function ck(a){return new ci(a??"")}class cl extends bV{static [b.entityKind]="SQLiteTextBuilder";constructor(a,b){super(a,"string","SQLiteText"),this.config.enumValues=b.enum,this.config.length=b.length}build(a){return new cm(a,this.config)}}class cm extends bW{static [b.entityKind]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(a,b){super(a,b)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class cn extends bV{static [b.entityKind]="SQLiteTextJsonBuilder";constructor(a){super(a,"json","SQLiteTextJson")}build(a){return new co(a,this.config)}}class co extends bW{static [b.entityKind]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(a){return JSON.parse(a)}mapToDriverValue(a){return JSON.stringify(a)}}function cp(a,b={}){let{name:c,config:d}=(0,l.getColumnNameAndConfig)(a,b);return"json"===d.mode?new cn(c):new cl(c,d)}let cq=Symbol.for("drizzle:SQLiteInlineForeignKeys");class cr extends bX.Table{static [b.entityKind]="SQLiteTable";static Symbol=Object.assign({},bX.Table.Symbol,{InlineForeignKeys:cq});[bX.Table.Symbol.Columns];[cq]=[];[bX.Table.Symbol.ExtraConfigBuilder]=void 0}let cs=(a,b,c)=>(function(a,b,c,d,e=a){let f=new cr(a,void 0,e),g=Object.fromEntries(Object.entries("function"==typeof b?b({blob:b2,customType:b5,integer:ce,numeric:ch,real:ck,text:cp}):b).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[cq].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[bX.Table.Symbol.Columns]=g,h[bX.Table.Symbol.ExtraConfigColumns]=g,c&&(h[cr.Symbol.ExtraConfigBuilder]=c),h})(a,b,c);var ct=d;class cu extends ct.View{static [b.entityKind]="SQLiteViewBase"}class cv{static [b.entityKind]="SQLiteDialect";casing;constructor(a){this.casing=new n.CasingCache(a?.casing)}escapeName(a){return`"${a}"`}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[d.sql`with `];for(let[c,e]of a.entries())b.push(d.sql`${d.sql.identifier(e._.alias)} as (${e._.sql})`),c<a.length-1&&b.push(d.sql`, `);return b.push(d.sql` `),d.sql.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:e,limit:f,orderBy:g}){let h=this.buildWithCTE(e),i=c?d.sql` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,j=b?d.sql` where ${b}`:void 0,k=this.buildOrderBy(g),l=this.buildLimit(f);return d.sql`${h}delete from ${a}${j}${i}${k}${l}`}buildUpdateSet(a,b){let c=a[i.Table.Symbol.Columns],e=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),f=e.length;return d.sql.join(e.flatMap((a,e)=>{let g=c[a],h=b[a]??d.sql.param(g.onUpdateFn(),g),i=d.sql`${d.sql.identifier(this.casing.getColumnCasing(g))} = ${h}`;return e<f-1?[i,d.sql.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:e,withList:f,joins:g,from:h,limit:i,orderBy:j}){let k=this.buildWithCTE(f),l=this.buildUpdateSet(a,b),m=h&&d.sql.join([d.sql.raw(" from "),this.buildFromTable(h)]),n=this.buildJoins(g),o=e?d.sql` returning ${this.buildSelection(e,{isSingleTable:!0})}`:void 0,p=c?d.sql` where ${c}`:void 0,q=this.buildOrderBy(j),r=this.buildLimit(i);return d.sql`${k}update ${a} set ${l}${m}${n}${p}${o}${q}${r}`}buildSelection(a,{isSingleTable:c=!1}={}){let e=a.length,f=a.flatMap(({field:a},f)=>{let g=[];if((0,b.is)(a,d.SQL.Aliased)&&a.isSelectionField)g.push(d.sql.identifier(a.fieldAlias));else if((0,b.is)(a,d.SQL.Aliased)||(0,b.is)(a,d.SQL)){let e=(0,b.is)(a,d.SQL.Aliased)?a.sql:a;c?g.push(new d.SQL(e.queryChunks.map(a=>(0,b.is)(a,o.Column)?d.sql.identifier(this.casing.getColumnCasing(a)):a))):g.push(e),(0,b.is)(a,d.SQL.Aliased)&&g.push(d.sql` as ${d.sql.identifier(a.fieldAlias)}`)}else if((0,b.is)(a,o.Column)){let b=a.table[i.Table.Symbol.Name];c?g.push(d.sql.identifier(this.casing.getColumnCasing(a))):g.push(d.sql`${d.sql.identifier(b)}.${d.sql.identifier(this.casing.getColumnCasing(a))}`)}return f<e-1&&g.push(d.sql`, `),g});return d.sql.join(f)}buildJoins(a){if(!a||0===a.length)return;let c=[];if(a)for(let[e,f]of a.entries()){0===e&&c.push(d.sql` `);let g=f.table;if((0,b.is)(g,cr)){let a=g[cr.Symbol.Name],b=g[cr.Symbol.Schema],e=g[cr.Symbol.OriginalName],h=a===e?void 0:f.alias;c.push(d.sql`${d.sql.raw(f.joinType)} join ${b?d.sql`${d.sql.identifier(b)}.`:void 0}${d.sql.identifier(e)}${h&&d.sql` ${d.sql.identifier(h)}`} on ${f.on}`)}else c.push(d.sql`${d.sql.raw(f.joinType)} join ${g} on ${f.on}`);e<a.length-1&&c.push(d.sql` `)}return d.sql.join(c)}buildLimit(a){return"object"==typeof a||"number"==typeof a&&a>=0?d.sql` limit ${a}`:void 0}buildOrderBy(a){let b=[];if(a)for(let[c,e]of a.entries())b.push(e),c<a.length-1&&b.push(d.sql`, `);return b.length>0?d.sql` order by ${d.sql.join(b)}`:void 0}buildFromTable(a){return(0,b.is)(a,i.Table)&&a[i.Table.Symbol.OriginalName]!==a[i.Table.Symbol.Name]?d.sql`${d.sql.identifier(a[i.Table.Symbol.OriginalName])} ${d.sql.identifier(a[i.Table.Symbol.Name])}`:a}buildSelectQuery({withList:a,fields:c,fieldsFlat:f,where:g,having:h,table:j,joins:k,orderBy:m,groupBy:n,limit:p,offset:q,distinct:r,setOperators:t}){let u=f??(0,l.orderSelectedFields)(c);for(let a of u){let c;if((0,b.is)(a.field,o.Column)&&(0,i.getTableName)(a.field.table)!==((0,b.is)(j,e.Subquery)?j._.alias:(0,b.is)(j,cu)?j[s.ViewBaseConfig].name:(0,b.is)(j,d.SQL)?void 0:(0,i.getTableName)(j))&&(c=a.field.table,!k?.some(({alias:a})=>a===(c[i.Table.Symbol.IsAlias]?(0,i.getTableName)(c):c[i.Table.Symbol.BaseName])))){let b=(0,i.getTableName)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let v=!k||0===k.length,w=this.buildWithCTE(a),x=r?d.sql` distinct`:void 0,y=this.buildSelection(u,{isSingleTable:v}),z=this.buildFromTable(j),A=this.buildJoins(k),B=g?d.sql` where ${g}`:void 0,C=h?d.sql` having ${h}`:void 0,D=[];if(n)for(let[a,b]of n.entries())D.push(b),a<n.length-1&&D.push(d.sql`, `);let E=D.length>0?d.sql` group by ${d.sql.join(D)}`:void 0,F=this.buildOrderBy(m),G=this.buildLimit(p),H=q?d.sql` offset ${q}`:void 0,I=d.sql`${w}select${x} ${y} from ${z}${A}${B}${E}${C}${F}${G}${H}`;return t.length>0?this.buildSetOperations(I,t):I}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:c,isAll:e,rightSelect:f,limit:g,orderBy:h,offset:i}}){let j,k=d.sql`${a.getSQL()} `,l=d.sql`${f.getSQL()}`;if(h&&h.length>0){let a=[];for(let c of h)if((0,b.is)(c,bW))a.push(d.sql.identifier(c.name));else if((0,b.is)(c,d.SQL)){for(let a=0;a<c.queryChunks.length;a++){let e=c.queryChunks[a];(0,b.is)(e,bW)&&(c.queryChunks[a]=d.sql.identifier(this.casing.getColumnCasing(e)))}a.push(d.sql`${c}`)}else a.push(d.sql`${c}`);j=d.sql` order by ${d.sql.join(a,d.sql`, `)}`}let m="object"==typeof g||"number"==typeof g&&g>=0?d.sql` limit ${g}`:void 0,n=d.sql.raw(`${c} ${e?"all ":""}`),o=i?d.sql` offset ${i}`:void 0;return d.sql`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:c,onConflict:e,returning:f,withList:g,select:h}){let j=[],k=Object.entries(a[i.Table.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),l=k.map(([,a])=>d.sql.identifier(this.casing.getColumnCasing(a)));if(h)(0,b.is)(c,d.SQL)?j.push(c):j.push(c.getSQL());else for(let[a,e]of(j.push(d.sql.raw("values ")),c.entries())){let f=[];for(let[a,c]of k){let g=e[a];if(void 0===g||(0,b.is)(g,d.Param)&&void 0===g.value){let a;if(null!==c.default&&void 0!==c.default)a=(0,b.is)(c.default,d.SQL)?c.default:d.sql.param(c.default,c);else if(void 0!==c.defaultFn){let e=c.defaultFn();a=(0,b.is)(e,d.SQL)?e:d.sql.param(e,c)}else if(c.default||void 0===c.onUpdateFn)a=d.sql`null`;else{let e=c.onUpdateFn();a=(0,b.is)(e,d.SQL)?e:d.sql.param(e,c)}f.push(a)}else f.push(g)}j.push(f),a<c.length-1&&j.push(d.sql`, `)}let m=this.buildWithCTE(g),n=d.sql.join(j),o=f?d.sql` returning ${this.buildSelection(f,{isSingleTable:!0})}`:void 0,p=e?.length?d.sql.join(e):void 0;return d.sql`${m}insert into ${a} ${l} ${n}${p}${o}`}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:b})}buildRelationalQuery({fullSchema:a,schema:c,tableNamesMap:f,table:g,tableConfig:h,queryConfig:j,tableAlias:k,nestedQueryRelation:l,joinOn:n}){let s,t=[],u,v,w=[],x,y=[];if(!0===j)t=Object.entries(h.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,m.aliasedTableColumn)(b,k),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(h.columns).map(([a,b])=>[a,(0,m.aliasedTableColumn)(b,k)]));if(j.where){let a="function"==typeof j.where?j.where(e,(0,r.getOperators)()):j.where;x=a&&(0,m.mapColumnsInSQLToAlias)(a,k)}let g=[],l=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in h.columns&&(a||!0!==c||(a=!0),l.push(b));l.length>0&&(l=a?l.filter(a=>j.columns?.[a]===!0):Object.keys(h.columns).filter(a=>!l.includes(a)))}else l=Object.keys(h.columns);for(let a of l){let b=h.columns[a];g.push({tsKey:a,value:b})}let n=[];if(j.with&&(n=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:h.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(e,{sql:d.sql}):j.extras))g.push({tsKey:a,value:(0,m.mapColumnsInAliasedSQLToAlias)(b,k)});for(let{tsKey:a,value:c}of g)t.push({dbKey:(0,b.is)(c,d.SQL.Aliased)?c.fieldAlias:h.columns[a].name,tsKey:a,field:(0,b.is)(c,o.Column)?(0,m.aliasedTableColumn)(c,k):c,relationTableTsKey:void 0,isJson:!1,selection:[]});let p="function"==typeof j.orderBy?j.orderBy(e,(0,r.getOrderByOperators)()):j.orderBy??[];for(let{tsKey:e,queryConfig:g,relation:h}of(Array.isArray(p)||(p=[p]),w=p.map(a=>(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):(0,m.mapColumnsInSQLToAlias)(a,k)),u=j.limit,v=j.offset,n)){let j=(0,r.normalizeRelation)(c,f,h),l=f[(0,i.getTableUniqueName)(h.referencedTable)],n=`${k}_${e}`,o=(0,q.and)(...j.fields.map((a,b)=>(0,q.eq)((0,m.aliasedTableColumn)(j.references[b],n),(0,m.aliasedTableColumn)(a,k)))),p=this.buildRelationalQuery({fullSchema:a,schema:c,tableNamesMap:f,table:a[l],tableConfig:c[l],queryConfig:(0,b.is)(h,r.One)?!0===g?{limit:1}:{...g,limit:1}:g,tableAlias:n,joinOn:o,nestedQueryRelation:h}),s=d.sql`(${p.sql})`.as(e);t.push({dbKey:e,tsKey:e,field:s,relationTableTsKey:l,isJson:!0,selection:p.selection})}}if(0===t.length)throw new p.DrizzleError({message:`No fields selected for table "${h.tsName}" ("${k}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(x=(0,q.and)(n,x),l){let a=d.sql`json_array(${d.sql.join(t.map(({field:a})=>(0,b.is)(a,bW)?d.sql.identifier(this.casing.getColumnCasing(a)):(0,b.is)(a,d.SQL.Aliased)?a.sql:a),d.sql`, `)})`;(0,b.is)(l,r.Many)&&(a=d.sql`coalesce(json_group_array(${a}), json_array())`);let c=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:h.tsName,selection:t}];void 0!==u||void 0!==v||w.length>0?(s=this.buildSelectQuery({table:(0,m.aliasedTable)(g,k),fields:{},fieldsFlat:[{path:[],field:d.sql.raw("*")}],where:x,limit:u,offset:v,orderBy:w,setOperators:[]}),x=void 0,u=void 0,v=void 0,w=void 0):s=(0,m.aliasedTable)(g,k),s=this.buildSelectQuery({table:(0,b.is)(s,cr)?s:new e.Subquery(s,{},k),fields:{},fieldsFlat:c.map(({field:a})=>({path:[],field:(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]})}else s=this.buildSelectQuery({table:(0,m.aliasedTable)(g,k),fields:{},fieldsFlat:t.map(({field:a})=>({path:[],field:(0,b.is)(a,o.Column)?(0,m.aliasedTableColumn)(a,k):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]});return{tableTsKey:h.tsName,sql:s,selection:t}}}class cw extends cv{static [b.entityKind]="SQLiteSyncDialect";migrate(a,b,c){let e=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",f=d.sql`
			CREATE TABLE IF NOT EXISTS ${d.sql.identifier(e)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;b.run(f);let g=b.values(d.sql`SELECT id, hash, created_at FROM ${d.sql.identifier(e)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;b.run(d.sql`BEGIN`);try{for(let c of a)if(!g||Number(g[2])<c.folderMillis){for(let a of c.sql)b.run(d.sql.raw(a));b.run(d.sql`INSERT INTO ${d.sql.identifier(e)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}b.run(d.sql`COMMIT`)}catch(a){throw b.run(d.sql`ROLLBACK`),a}}}class cx extends cv{static [b.entityKind]="SQLiteAsyncDialect";async migrate(a,b,c){let e=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",f=d.sql`
			CREATE TABLE IF NOT EXISTS ${d.sql.identifier(e)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await b.run(f);let g=(await b.values(d.sql`SELECT id, hash, created_at FROM ${d.sql.identifier(e)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await b.transaction(async b=>{for(let c of a)if(!g||Number(g[2])<c.folderMillis){for(let a of c.sql)await b.run(d.sql.raw(a));await b.run(d.sql`INSERT INTO ${d.sql.identifier(e)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}})}}var cy=bg;class cz{static [b.entityKind]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,this.withList=a.withList,this.distinct=a.distinct}from(a){let c,f=!!this.fields;return c=this.fields?this.fields:(0,b.is)(a,e.Subquery)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,b.is)(a,cu)?a[s.ViewBaseConfig].selectedFields:(0,b.is)(a,d.SQL)?{}:(0,l.getTableColumns)(a),new cB({table:a,fields:c,isPartialSelect:f,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class cA extends cy.TypedQueryBuilder{static [b.entityKind]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,l.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(f,g)=>{let h=this.tableName,j=(0,l.getTableLikeName)(f);if("string"==typeof j&&this.config.joins?.some(a=>a.alias===j))throw Error(`Alias "${j}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof h&&(this.config.fields={[h]:this.config.fields}),"string"==typeof j&&!(0,b.is)(f,d.SQL))){let a=(0,b.is)(f,e.Subquery)?f._.selectedFields:(0,b.is)(f,d.View)?f[s.ViewBaseConfig].selectedFields:f[i.Table.Symbol.Columns];this.config.fields[j]=a}if("function"==typeof g&&(g=g(new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:g,table:f,joinType:a,alias:j}),"string"==typeof j)switch(a){case"left":this.joinsNotNullableMap[j]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[j]=!0;break;case"inner":this.joinsNotNullableMap[j]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[j]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(cD()):c;if(!(0,l.haveSameKeys)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),d=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=d:this.config.orderBy=d}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new e.Subquery(this.getSQL(),this.config.fields,a),new c.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new c.SelectionProxyHandler({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class cB extends cA{static [b.entityKind]="SQLiteSelect";_prepare(a=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let b=(0,l.orderSelectedFields)(this.config.fields),c=this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),b,"all",!0);return c.joinsNotNullableMap=this.joinsNotNullableMap,c}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.all()}}function cC(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,l.haveSameKeys)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,l.applyMixins)(cB,[h.QueryPromise]);let cD=()=>({union:cE,unionAll:cF,intersect:cG,except:cH}),cE=cC("union",!1),cF=cC("union",!0),cG=cC("intersect",!1),cH=cC("except",!1);class cI{static [b.entityKind]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,b.is)(a,cv)?a:void 0,this.dialectConfig=(0,b.is)(a,cv)?void 0:a}$with=(a,b)=>{let d=this;return{as:f=>("function"==typeof f&&(f=f(d)),new Proxy(new e.WithSubquery(f.getSQL(),b??("getSelectedFields"in f?f.getSelectedFields()??{}:{}),a,!0),new c.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new cz({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new cz({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new cz({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new cz({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new cw(this.dialectConfig)),this.dialect}}var cJ=h;class cK extends cJ.QueryPromise{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [b.entityKind]="SQLiteDelete";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[i.Table.Symbol.Columns],new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),d=Array.isArray(b)?b:[b];this.config.orderBy=d}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}returning(a=this.table[cr.Symbol.Columns]){return this.config.returning=(0,l.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(a){return this._prepare().execute(a)}$dynamic(){return this}}var cL=h;class cM{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [b.entityKind]="SQLiteInsertBuilder";values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let c=a.map(a=>{let c={},e=this.table[i.Table.Symbol.Columns];for(let f of Object.keys(a)){let g=a[f];c[f]=(0,b.is)(g,d.SQL)?g:new d.Param(g,e[f])}return c});return new cN(this.table,c,this.session,this.dialect,this.withList)}select(a){let c="function"==typeof a?a(new cI):a;if(!(0,b.is)(c,d.SQL)&&!(0,l.haveSameKeys)(this.table[i.Columns],c._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new cN(this.table,c,this.session,this.dialect,this.withList,!0)}}class cN extends cL.QueryPromise{constructor(a,b,c,d,e,f){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f}}static [b.entityKind]="SQLiteInsert";config;returning(a=this.config.table[cr.Symbol.Columns]){return this.config.returning=(0,l.orderSelectedFields)(a),this}onConflictDoNothing(a={}){if(this.config.onConflict||(this.config.onConflict=[]),void 0===a.target)this.config.onConflict.push(d.sql` on conflict do nothing`);else{let b=Array.isArray(a.target)?d.sql`${a.target}`:d.sql`${[a.target]}`,c=a.where?d.sql` where ${a.where}`:d.sql``;this.config.onConflict.push(d.sql` on conflict ${b} do nothing${c}`)}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);let b=a.where?d.sql` where ${a.where}`:void 0,c=a.targetWhere?d.sql` where ${a.targetWhere}`:void 0,e=a.setWhere?d.sql` where ${a.setWhere}`:void 0,f=Array.isArray(a.target)?d.sql`${a.target}`:d.sql`${[a.target]}`,g=this.dialect.buildUpdateSet(this.config.table,(0,l.mapUpdateSet)(this.config.table,a.set));return this.config.onConflict.push(d.sql` on conflict ${f}${c} do update set ${g}${b}${e}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}var cO=h;class cP{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [b.entityKind]="SQLiteUpdateBuilder";set(a){return new cQ(this.table,(0,l.mapUpdateSet)(this.table,a),this.session,this.dialect,this.withList)}}class cQ extends cO.QueryPromise{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]}}static [b.entityKind]="SQLiteUpdate";config;from(a){return this.config.from=a,this}createJoin(a){return(d,f)=>{let g=(0,l.getTableLikeName)(d);if("string"==typeof g&&this.config.joins.some(a=>a.alias===g))throw Error(`Alias "${g}" is already used in this query`);if("function"==typeof f){let a=this.config.from?(0,b.is)(d,cr)?d[i.Table.Symbol.Columns]:(0,b.is)(d,e.Subquery)?d._.selectedFields:(0,b.is)(d,cu)?d[s.ViewBaseConfig].selectedFields:void 0:void 0;f=f(new Proxy(this.config.table[i.Table.Symbol.Columns],new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new c.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:f,table:d,joinType:a,alias:g}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[i.Table.Symbol.Columns],new c.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),d=Array.isArray(b)?b:[b];this.config.orderBy=d}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}returning(a=this.config.table[cr.Symbol.Columns]){return this.config.returning=(0,l.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}var cR=d;class cS extends cR.SQL{constructor(a){super(cS.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.session=a.session,this.sql=cS.buildCount(a.source,a.filters)}sql;static [b.entityKind]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(a,b){return cR.sql`(select count(*) from ${a}${cR.sql.raw(" where ").if(b)}${b})`}static buildCount(a,b){return cR.sql`select count(*) from ${a}${cR.sql.raw(" where ").if(b)}${b}`}then(a,b){return Promise.resolve(this.session.count(this.sql)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}var cT=h;class cU{constructor(a,b,c,d,e,f,g,h){this.mode=a,this.fullSchema=b,this.schema=c,this.tableNamesMap=d,this.table=e,this.tableConfig=f,this.dialect=g,this.session=h}static [b.entityKind]="SQLiteAsyncRelationalQueryBuilder";findMany(a){return"sync"===this.mode?new cW(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many"):new cV(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return"sync"===this.mode?new cW(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first"):new cV(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class cV extends cT.QueryPromise{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [b.entityKind]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(a=!1){let{query:b,builtQuery:c}=this._toSQL();return this.session[a?"prepareOneTimeQuery":"prepareQuery"](c,void 0,"first"===this.mode?"get":"all",!0,(a,c)=>{let d=a.map(a=>(0,r.mapRelationalRow)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})}prepare(){return this._prepare(!1)}_toSQL(){let a=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return"first"===this.mode?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class cW extends cV{static [b.entityKind]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}var cX=h;class cY extends cX.QueryPromise{constructor(a,b,c,d,e){super(),this.execute=a,this.getSQL=b,this.dialect=d,this.mapBatchResult=e,this.config={action:c}}static [b.entityKind]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class cZ{constructor(a,b,c,d){this.resultKind=a,this.dialect=b,this.session=c,this._=d?{schema:d.schema,fullSchema:d.fullSchema,tableNamesMap:d.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};const e=this.query;if(this._.schema)for(const[f,g]of Object.entries(this._.schema))e[f]=new cU(a,d.fullSchema,this._.schema,this._.tableNamesMap,d.fullSchema[f],g,b,c)}static [b.entityKind]="BaseSQLiteDatabase";query;$with=(a,b)=>{let d=this;return{as:f=>("function"==typeof f&&(f=f(new cI(d.dialect))),new Proxy(new e.WithSubquery(f.getSQL(),b??("getSelectedFields"in f?f.getSelectedFields()??{}:{}),a,!0),new c.SelectionProxyHandler({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new cS({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new cz({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new cz({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new cP(c,b.session,b.dialect,a)},insert:function(c){return new cM(c,b.session,b.dialect,a)},delete:function(c){return new cK(c,b.session,b.dialect,a)}}}select(a){return new cz({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new cz({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new cP(a,this.session,this.dialect)}insert(a){return new cM(a,this.session,this.dialect)}delete(a){return new cK(a,this.session,this.dialect)}run(a){let b="string"==typeof a?d.sql.raw(a):a.getSQL();return"async"===this.resultKind?new cY(async()=>this.session.run(b),()=>b,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(b)}all(a){let b="string"==typeof a?d.sql.raw(a):a.getSQL();return"async"===this.resultKind?new cY(async()=>this.session.all(b),()=>b,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(b)}get(a){let b="string"==typeof a?d.sql.raw(a):a.getSQL();return"async"===this.resultKind?new cY(async()=>this.session.get(b),()=>b,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(b)}values(a){let b="string"==typeof a?d.sql.raw(a):a.getSQL();return"async"===this.resultKind?new cY(async()=>this.session.values(b),()=>b,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(b)}transaction(a,b){return this.session.transaction(a,b)}}var c$=a.i(13552),c_=a.i(86096),c0=a.i(57833),c1=a.i(74619),c2=a.i(65105),c3=a.i(99450);function c4(...a){return a[0].columns?new c5(a[0].columns,a[0].name):new c5(a)}class c5{static [b.entityKind]="SQLitePrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new c6(a,this.columns,this.name)}}class c6{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [b.entityKind]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[cr.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function c7(a,c){if((0,b.is)(a,bL))return function(a,b){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??bc("user",{id:a6("id",{length:255}).primaryKey().$defaultFn(()=>crypto.randomUUID()),name:a6("name",{length:255}),email:a6("email",{length:255}).unique(),emailVerified:aZ("emailVerified",{mode:"date",fsp:3}),image:a6("image",{length:255})}),c=a.accountsTable??bc("account",{userId:a6("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),type:a6("type",{length:255}).$type().notNull(),provider:a6("provider",{length:255}).notNull(),providerAccountId:a6("providerAccountId",{length:255}).notNull(),refresh_token:a6("refresh_token",{length:255}),access_token:a6("access_token",{length:255}),expires_at:au("expires_at"),token_type:a6("token_type",{length:255}),scope:a6("scope",{length:255}),id_token:a6("id_token",{length:2048}),session_state:a6("session_state",{length:255})},a=>({compositePk:bm({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??bc("session",{sessionToken:a6("sessionToken",{length:255}).primaryKey(),userId:a6("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),expires:aZ("expires",{mode:"date"}).notNull()}),e=a.verificationTokensTable??bc("verificationToken",{identifier:a6("identifier",{length:255}).notNull(),token:a6("token",{length:255}).notNull(),expires:aZ("expires",{mode:"date"}).notNull()},a=>({compositePk:bm({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??bc("authenticator",{credentialID:a6("credentialID",{length:255}).notNull().unique(),userId:a6("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:a6("providerAccountId",{length:255}).notNull(),credentialPublicKey:a6("credentialPublicKey",{length:255}).notNull(),counter:au("counter").notNull(),credentialDeviceType:a6("credentialDeviceType",{length:255}).notNull(),credentialBackedUp:R("credentialBackedUp").notNull(),transports:a6("transports",{length:255})},a=>({compositePk:bm({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=(0,l.getTableColumns)(c).id.defaultFn,[g]=await a.insert(c).values(f?e:{...e,id:d}).$returningId();return a.select().from(c).where((0,q.eq)(c.id,g?g.id:d)).then(a=>a[0])},getUser:async b=>a.select().from(c).where((0,q.eq)(c.id,b)).then(a=>a.length>0?a[0]:null),getUserByEmail:async b=>a.select().from(c).where((0,q.eq)(c.email,b)).then(a=>a.length>0?a[0]:null),createSession:async b=>(await a.insert(e).values(b),a.select().from(e).where((0,q.eq)(e.sessionToken,b.sessionToken)).then(a=>a[0])),getSessionAndUser:async b=>a.select({session:e,user:c}).from(e).where((0,q.eq)(e.sessionToken,b)).innerJoin(c,(0,q.eq)(c.id,e.userId)).then(a=>a.length>0?a[0]:null),async updateUser(b){if(!b.id)throw Error("No user id.");await a.update(c).set(b).where((0,q.eq)(c.id,b.id));let[d]=await a.select().from(c).where((0,q.eq)(c.id,b.id));if(!d)throw Error("No user found.");return d},updateSession:async b=>(await a.update(e).set(b).where((0,q.eq)(e.sessionToken,b.sessionToken)),a.select().from(e).where((0,q.eq)(e.sessionToken,b.sessionToken)).then(a=>a[0])),async linkAccount(b){await a.insert(d).values(b)},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,(0,q.eq)(d.userId,c.id)).where((0,q.and)((0,q.eq)(d.provider,b.provider),(0,q.eq)(d.providerAccountId,b.providerAccountId))).then(a=>a[0]);return e?.user??null},async deleteSession(b){await a.delete(e).where((0,q.eq)(e.sessionToken,b))},createVerificationToken:async b=>(await a.insert(f).values(b),a.select().from(f).where((0,q.eq)(f.identifier,b.identifier)).then(a=>a[0])),async useVerificationToken(b){let c=await a.select().from(f).where((0,q.and)((0,q.eq)(f.identifier,b.identifier),(0,q.eq)(f.token,b.token))).then(a=>a.length>0?a[0]:null);return c&&await a.delete(f).where((0,q.and)((0,q.eq)(f.identifier,b.identifier),(0,q.eq)(f.token,b.token))),c},async deleteUser(b){await a.delete(c).where((0,q.eq)(c.id,b))},async unlinkAccount(b){await a.delete(d).where((0,q.and)((0,q.eq)(d.provider,b.provider),(0,q.eq)(d.providerAccountId,b.providerAccountId)))},getAccount:async(b,c)=>a.select().from(d).where((0,q.and)((0,q.eq)(d.provider,c),(0,q.eq)(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>(await a.insert(g).values(b),await a.select().from(g).where((0,q.eq)(g.credentialID,b.credentialID)).then(a=>a[0]??null)),getAuthenticator:async b=>await a.select().from(g).where((0,q.eq)(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>await a.select().from(g).where((0,q.eq)(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){await a.update(g).set({counter:c}).where((0,q.eq)(g.credentialID,b));let d=await a.select().from(g).where((0,q.eq)(g.credentialID,b)).then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}(a,c);if((0,b.is)(a,bM.PgDatabase))return function(a,b){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??(0,c0.pgTable)("user",{id:(0,c2.text)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:(0,c2.text)("name"),email:(0,c2.text)("email").unique(),emailVerified:(0,c3.timestamp)("emailVerified",{mode:"date"}),image:(0,c2.text)("image")}),c=a.accountsTable??(0,c0.pgTable)("account",{userId:(0,c2.text)("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),type:(0,c2.text)("type").$type().notNull(),provider:(0,c2.text)("provider").notNull(),providerAccountId:(0,c2.text)("providerAccountId").notNull(),refresh_token:(0,c2.text)("refresh_token"),access_token:(0,c2.text)("access_token"),expires_at:(0,c_.integer)("expires_at"),token_type:(0,c2.text)("token_type"),scope:(0,c2.text)("scope"),id_token:(0,c2.text)("id_token"),session_state:(0,c2.text)("session_state")},a=>({compositePk:(0,c1.primaryKey)({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??(0,c0.pgTable)("session",{sessionToken:(0,c2.text)("sessionToken").primaryKey(),userId:(0,c2.text)("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),expires:(0,c3.timestamp)("expires",{mode:"date"}).notNull()}),e=a.verificationTokensTable??(0,c0.pgTable)("verificationToken",{identifier:(0,c2.text)("identifier").notNull(),token:(0,c2.text)("token").notNull(),expires:(0,c3.timestamp)("expires",{mode:"date"}).notNull()},a=>({compositePk:(0,c1.primaryKey)({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??(0,c0.pgTable)("authenticator",{credentialID:(0,c2.text)("credentialID").notNull().unique(),userId:(0,c2.text)("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:(0,c2.text)("providerAccountId").notNull(),credentialPublicKey:(0,c2.text)("credentialPublicKey").notNull(),counter:(0,c_.integer)("counter").notNull(),credentialDeviceType:(0,c2.text)("credentialDeviceType").notNull(),credentialBackedUp:(0,c$.boolean)("credentialBackedUp").notNull(),transports:(0,c2.text)("transports")},a=>({compositePK:(0,c1.primaryKey)({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=(0,l.getTableColumns)(c).id.hasDefault;return a.insert(c).values(f?e:{...e,id:d}).returning().then(a=>a[0])},getUser:async b=>a.select().from(c).where((0,q.eq)(c.id,b)).then(a=>a.length>0?a[0]:null),getUserByEmail:async b=>a.select().from(c).where((0,q.eq)(c.email,b)).then(a=>a.length>0?a[0]:null),createSession:async b=>a.insert(e).values(b).returning().then(a=>a[0]),getSessionAndUser:async b=>a.select({session:e,user:c}).from(e).where((0,q.eq)(e.sessionToken,b)).innerJoin(c,(0,q.eq)(c.id,e.userId)).then(a=>a.length>0?a[0]:null),async updateUser(b){if(!b.id)throw Error("No user id.");let[d]=await a.update(c).set(b).where((0,q.eq)(c.id,b.id)).returning();if(!d)throw Error("No user found.");return d},updateSession:async b=>a.update(e).set(b).where((0,q.eq)(e.sessionToken,b.sessionToken)).returning().then(a=>a[0]),async linkAccount(b){await a.insert(d).values(b)},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,(0,q.eq)(d.userId,c.id)).where((0,q.and)((0,q.eq)(d.provider,b.provider),(0,q.eq)(d.providerAccountId,b.providerAccountId))).then(a=>a[0]);return e?.user??null},async deleteSession(b){await a.delete(e).where((0,q.eq)(e.sessionToken,b))},createVerificationToken:async b=>a.insert(f).values(b).returning().then(a=>a[0]),useVerificationToken:async b=>a.delete(f).where((0,q.and)((0,q.eq)(f.identifier,b.identifier),(0,q.eq)(f.token,b.token))).returning().then(a=>a.length>0?a[0]:null),async deleteUser(b){await a.delete(c).where((0,q.eq)(c.id,b))},async unlinkAccount(b){await a.delete(d).where((0,q.and)((0,q.eq)(d.provider,b.provider),(0,q.eq)(d.providerAccountId,b.providerAccountId)))},getAccount:async(b,c)=>a.select().from(d).where((0,q.and)((0,q.eq)(d.provider,c),(0,q.eq)(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>a.insert(g).values(b).returning().then(a=>a[0]??null),getAuthenticator:async b=>a.select().from(g).where((0,q.eq)(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>a.select().from(g).where((0,q.eq)(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){let d=await a.update(g).set({counter:c}).where((0,q.eq)(g.credentialID,b)).returning().then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}(a,c);if((0,b.is)(a,cZ))return function(a,b){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??cs("user",{id:cp("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:cp("name"),email:cp("email").unique(),emailVerified:ce("emailVerified",{mode:"timestamp_ms"}),image:cp("image")}),c=a.accountsTable??cs("account",{userId:cp("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),type:cp("type").$type().notNull(),provider:cp("provider").notNull(),providerAccountId:cp("providerAccountId").notNull(),refresh_token:cp("refresh_token"),access_token:cp("access_token"),expires_at:ce("expires_at"),token_type:cp("token_type"),scope:cp("scope"),id_token:cp("id_token"),session_state:cp("session_state")},a=>({compositePk:c4({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??cs("session",{sessionToken:cp("sessionToken").primaryKey(),userId:cp("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),expires:ce("expires",{mode:"timestamp_ms"}).notNull()}),e=a.verificationTokensTable??cs("verificationToken",{identifier:cp("identifier").notNull(),token:cp("token").notNull(),expires:ce("expires",{mode:"timestamp_ms"}).notNull()},a=>({compositePk:c4({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??cs("authenticator",{credentialID:cp("credentialID").notNull().unique(),userId:cp("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:cp("providerAccountId").notNull(),credentialPublicKey:cp("credentialPublicKey").notNull(),counter:ce("counter").notNull(),credentialDeviceType:cp("credentialDeviceType").notNull(),credentialBackedUp:ce("credentialBackedUp",{mode:"boolean"}).notNull(),transports:cp("transports")},a=>({compositePK:c4({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=(0,l.getTableColumns)(c).id.hasDefault;return a.insert(c).values(f?e:{...e,id:d}).returning().get()},getUser:async b=>await a.select().from(c).where((0,q.eq)(c.id,b)).get()??null,getUserByEmail:async b=>await a.select().from(c).where((0,q.eq)(c.email,b)).get()??null,createSession:async b=>a.insert(e).values(b).returning().get(),getSessionAndUser:async b=>await a.select({session:e,user:c}).from(e).where((0,q.eq)(e.sessionToken,b)).innerJoin(c,(0,q.eq)(c.id,e.userId)).get()??null,async updateUser(b){if(!b.id)throw Error("No user id.");let d=await a.update(c).set(b).where((0,q.eq)(c.id,b.id)).returning().get();if(!d)throw Error("User not found.");return d},updateSession:async b=>await a.update(e).set(b).where((0,q.eq)(e.sessionToken,b.sessionToken)).returning().get()??null,async linkAccount(b){await a.insert(d).values(b).run()},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,(0,q.eq)(d.userId,c.id)).where((0,q.and)((0,q.eq)(d.provider,b.provider),(0,q.eq)(d.providerAccountId,b.providerAccountId))).get();return e?.user??null},async deleteSession(b){await a.delete(e).where((0,q.eq)(e.sessionToken,b)).run()},createVerificationToken:async b=>a.insert(f).values(b).returning().get(),useVerificationToken:async b=>await a.delete(f).where((0,q.and)((0,q.eq)(f.identifier,b.identifier),(0,q.eq)(f.token,b.token))).returning().get()??null,async deleteUser(b){await a.delete(c).where((0,q.eq)(c.id,b)).run()},async unlinkAccount(b){await a.delete(d).where((0,q.and)((0,q.eq)(d.provider,b.provider),(0,q.eq)(d.providerAccountId,b.providerAccountId))).run()},getAccount:async(b,c)=>a.select().from(d).where((0,q.and)((0,q.eq)(d.provider,c),(0,q.eq)(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>a.insert(g).values(b).returning().then(a=>a[0]??null),getAuthenticator:async b=>a.select().from(g).where((0,q.eq)(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>a.select().from(g).where((0,q.eq)(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){let d=await a.update(g).set({counter:c}).where((0,q.eq)(g.credentialID,b)).returning().then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}(a,c);throw Error(`Unsupported database type (${typeof a}) in Auth.js Drizzle adapter.`)}a.s(["DrizzleAdapter",()=>c7],33957)},98655,a=>{"use strict";a.s(["authConfig",0,{pages:{signIn:"/login"},callbacks:{authorized({auth:a,request:{nextUrl:b}}){let c=!!a?.user,d=b.pathname.startsWith("/dashboard"),e=b.pathname.startsWith("/login");return d?!!c:!c||!e||Response.redirect(new URL("/dashboard",b))},session:({session:a,user:b,token:c})=>(a.user&&(a.user.id=b?.id||c?.sub),a)},providers:[]}])},77607,a=>a.a(async(b,c)=>{try{var d=a.i(40522);a.i(59351);var e=a.i(28958);a.i(5151);var f=a.i(34217),g=a.i(33957),h=a.i(22028),i=a.i(98655),j=a.i(13148),k=a.i(93321),l=a.i(72849),m=a.i(83111),n=b([h]);[h]=n.then?(await n)():n;let{auth:o,handlers:p,signIn:q,signOut:r}=(0,d.default)({...i.authConfig,adapter:(0,g.DrizzleAdapter)(h.db,{usersTable:j.users,accountsTable:j.oauthAccounts,sessionsTable:j.sessions,verificationTokensTable:j.verificationTokens}),session:{strategy:"database"},providers:[(0,e.default)({clientId:process.env.AUTH_GOOGLE_ID||process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET||process.env.GOOGLE_CLIENT_SECRET}),(0,f.default)({async authorize(a){let b=m.z.object({email:m.z.string().email(),password:m.z.string().min(6)}).safeParse(a);if(b.success){let{email:a,password:c}=b.data,[d]=await h.db.select().from(j.users).where((0,k.eq)(j.users.email,a)).limit(1);if(!d||!d.passwordHash)return null;if(await l.default.compare(c,d.passwordHash))return d}return null}})]});a.s(["auth",0,o,"signIn",0,q]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_da0c5483._.js.map